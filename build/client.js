/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./client/bootstrap/registerColorSchemes.ts":
/*!**************************************************!*\
  !*** ./client/bootstrap/registerColorSchemes.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"colorSchemes\": () => (/* binding */ colorSchemes)\n/* harmony export */ });\n/* harmony import */ var _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ui/colorScheme */ \"./client/ui/colorScheme.ts\");\n\nconst colorSchemes = [\n    new _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__.ColorScheme(\"My First LED Screen\", \"Without backlight in the sun\", \"#787\", \"#797\", \"#000\"),\n    new _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__.ColorScheme(\"Public Transport\", \"I’m a bus\", \"#111\", \"#222\", \"#dc0\"),\n    new _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__.ColorScheme(\"Vampire Campfire\", \"Bloody pixels\", \"#000\", \"#100\", \"#f00\", 0.8),\n    new _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__.ColorScheme(\"VFD\", \"Party like it’s 1959\", \"#000\", \"#111\", \"#68F\", 0.8),\n    new _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__.ColorScheme(\"1337\", \"SO HACK omg 0wN3d N00b!!!1\\n<MARQUEE>TESTLOL</MARQUEE>\", \"#010\", \"#000\", \"#0f0\"),\n    new _ui_colorScheme__WEBPACK_IMPORTED_MODULE_0__.ColorScheme(\"Panda\", \"(O)____(o)\", \"#000\", \"#111\", \"#fff\"),\n];\n\n\n//# sourceURL=webpack://xssnake/./client/bootstrap/registerColorSchemes.ts?");

/***/ }),

/***/ "./client/const.ts":
/*!*************************!*\
  !*** ./client/const.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FRAME\": () => (/* binding */ FRAME),\n/* harmony export */   \"MIN_FRAME_DELTA\": () => (/* binding */ MIN_FRAME_DELTA),\n/* harmony export */   \"MAX_FRAME_DELTA\": () => (/* binding */ MAX_FRAME_DELTA),\n/* harmony export */   \"KEY_BACKSPACE\": () => (/* binding */ KEY_BACKSPACE),\n/* harmony export */   \"KEY_TAB\": () => (/* binding */ KEY_TAB),\n/* harmony export */   \"KEY_ENTER\": () => (/* binding */ KEY_ENTER),\n/* harmony export */   \"KEY_ESCAPE\": () => (/* binding */ KEY_ESCAPE),\n/* harmony export */   \"KEY_SPACE\": () => (/* binding */ KEY_SPACE),\n/* harmony export */   \"KEY_LEFT\": () => (/* binding */ KEY_LEFT),\n/* harmony export */   \"KEY_UP\": () => (/* binding */ KEY_UP),\n/* harmony export */   \"KEY_RIGHT\": () => (/* binding */ KEY_RIGHT),\n/* harmony export */   \"KEY_DOWN\": () => (/* binding */ KEY_DOWN),\n/* harmony export */   \"KEY_FULLSCREEN\": () => (/* binding */ KEY_FULLSCREEN),\n/* harmony export */   \"KEY_MUTE\": () => (/* binding */ KEY_MUTE),\n/* harmony export */   \"KEY_START\": () => (/* binding */ KEY_START),\n/* harmony export */   \"FIELD_BUGS\": () => (/* binding */ FIELD_BUGS),\n/* harmony export */   \"FIELD_NAME\": () => (/* binding */ FIELD_NAME),\n/* harmony export */   \"FIELD_QUICK_GAME\": () => (/* binding */ FIELD_QUICK_GAME),\n/* harmony export */   \"FIELD_MAX_PLAYERS\": () => (/* binding */ FIELD_MAX_PLAYERS),\n/* harmony export */   \"FIELD_LEVEL_SET\": () => (/* binding */ FIELD_LEVEL_SET),\n/* harmony export */   \"FIELD_POWERUPS\": () => (/* binding */ FIELD_POWERUPS),\n/* harmony export */   \"FIELD_PRIVATE\": () => (/* binding */ FIELD_PRIVATE),\n/* harmony export */   \"FIELD_XSS\": () => (/* binding */ FIELD_XSS),\n/* harmony export */   \"KEY_TO_DIRECTION\": () => (/* binding */ KEY_TO_DIRECTION),\n/* harmony export */   \"GAME_LEFT\": () => (/* binding */ GAME_LEFT),\n/* harmony export */   \"GAME_TOP\": () => (/* binding */ GAME_TOP),\n/* harmony export */   \"MENU_LEFT\": () => (/* binding */ MENU_LEFT),\n/* harmony export */   \"MENU_TOP\": () => (/* binding */ MENU_TOP),\n/* harmony export */   \"MENU_WIDTH\": () => (/* binding */ MENU_WIDTH),\n/* harmony export */   \"MENU_WRAP\": () => (/* binding */ MENU_WRAP),\n/* harmony export */   \"MENU_TITLE_HEIGHT\": () => (/* binding */ MENU_TITLE_HEIGHT),\n/* harmony export */   \"DOM_EVENT_KEYPRESS\": () => (/* binding */ DOM_EVENT_KEYPRESS),\n/* harmony export */   \"DOM_EVENT_KEYDOWN\": () => (/* binding */ DOM_EVENT_KEYDOWN),\n/* harmony export */   \"DOM_EVENT_KEYUP\": () => (/* binding */ DOM_EVENT_KEYUP),\n/* harmony export */   \"HASH_ROOM\": () => (/* binding */ HASH_ROOM),\n/* harmony export */   \"NS_DEBUG\": () => (/* binding */ NS_DEBUG),\n/* harmony export */   \"NS_ANIM\": () => (/* binding */ NS_ANIM),\n/* harmony export */   \"NS_ACTION\": () => (/* binding */ NS_ACTION),\n/* harmony export */   \"NS_BETWEEN_GAME\": () => (/* binding */ NS_BETWEEN_GAME),\n/* harmony export */   \"NS_EXPLOSION\": () => (/* binding */ NS_EXPLOSION),\n/* harmony export */   \"NS_FLOW\": () => (/* binding */ NS_FLOW),\n/* harmony export */   \"NS_CHAT\": () => (/* binding */ NS_CHAT),\n/* harmony export */   \"NS_DIALOG\": () => (/* binding */ NS_DIALOG),\n/* harmony export */   \"NS_INPUT\": () => (/* binding */ NS_INPUT),\n/* harmony export */   \"NS_GAME\": () => (/* binding */ NS_GAME),\n/* harmony export */   \"NS_MSGBOX\": () => (/* binding */ NS_MSGBOX),\n/* harmony export */   \"NS_ROOM\": () => (/* binding */ NS_ROOM),\n/* harmony export */   \"NS_ROUND\": () => (/* binding */ NS_ROUND),\n/* harmony export */   \"NS_ROUND_SET\": () => (/* binding */ NS_ROUND_SET),\n/* harmony export */   \"NS_PRE_GAME\": () => (/* binding */ NS_PRE_GAME),\n/* harmony export */   \"NS_SCORE\": () => (/* binding */ NS_SCORE),\n/* harmony export */   \"NS_SNAKE\": () => (/* binding */ NS_SNAKE),\n/* harmony export */   \"NS_SNAKE_CONTROLS\": () => (/* binding */ NS_SNAKE_CONTROLS),\n/* harmony export */   \"NS_HEARTBEAT\": () => (/* binding */ NS_HEARTBEAT),\n/* harmony export */   \"NS_SOCKET\": () => (/* binding */ NS_SOCKET),\n/* harmony export */   \"NS_SPAWN\": () => (/* binding */ NS_SPAWN),\n/* harmony export */   \"NS_STAGES\": () => (/* binding */ NS_STAGES),\n/* harmony export */   \"EV_GAME_TICK\": () => (/* binding */ EV_GAME_TICK),\n/* harmony export */   \"EV_WIN_FOCUS_CHANGE\": () => (/* binding */ EV_WIN_FOCUS_CHANGE),\n/* harmony export */   \"EV_FONT_LOAD\": () => (/* binding */ EV_FONT_LOAD),\n/* harmony export */   \"EV_PLAYERS_UPDATED\": () => (/* binding */ EV_PLAYERS_UPDATED),\n/* harmony export */   \"STORAGE_MUTE\": () => (/* binding */ STORAGE_MUTE),\n/* harmony export */   \"STORAGE_NAME\": () => (/* binding */ STORAGE_NAME),\n/* harmony export */   \"STORAGE_XSS\": () => (/* binding */ STORAGE_XSS),\n/* harmony export */   \"STORAGE_COLOR\": () => (/* binding */ STORAGE_COLOR),\n/* harmony export */   \"STORAGE_PREFS\": () => (/* binding */ STORAGE_PREFS),\n/* harmony export */   \"UC_ARR_LEFT\": () => (/* binding */ UC_ARR_LEFT),\n/* harmony export */   \"UC_ARR_UP\": () => (/* binding */ UC_ARR_UP),\n/* harmony export */   \"UC_ARR_RIGHT\": () => (/* binding */ UC_ARR_RIGHT),\n/* harmony export */   \"UC_ARR_DOWN\": () => (/* binding */ UC_ARR_DOWN),\n/* harmony export */   \"UC_CODE\": () => (/* binding */ UC_CODE),\n/* harmony export */   \"UC_ELECTRIC\": () => (/* binding */ UC_ELECTRIC),\n/* harmony export */   \"UC_HOURGLASS\": () => (/* binding */ UC_HOURGLASS),\n/* harmony export */   \"UC_ENTER_KEY\": () => (/* binding */ UC_ENTER_KEY),\n/* harmony export */   \"UC_SQUARE\": () => (/* binding */ UC_SQUARE),\n/* harmony export */   \"UC_TR_LEFT\": () => (/* binding */ UC_TR_LEFT),\n/* harmony export */   \"UC_TR_RIGHT\": () => (/* binding */ UC_TR_RIGHT),\n/* harmony export */   \"UC_TR_UP\": () => (/* binding */ UC_TR_UP),\n/* harmony export */   \"UC_TR_DOWN\": () => (/* binding */ UC_TR_DOWN),\n/* harmony export */   \"UC_APPLE\": () => (/* binding */ UC_APPLE),\n/* harmony export */   \"UC_SKULL\": () => (/* binding */ UC_SKULL),\n/* harmony export */   \"UC_FROWNY_FACE\": () => (/* binding */ UC_FROWNY_FACE),\n/* harmony export */   \"UC_HAPPY_FACE\": () => (/* binding */ UC_HAPPY_FACE),\n/* harmony export */   \"UC_WHITE_HEART\": () => (/* binding */ UC_WHITE_HEART),\n/* harmony export */   \"UC_BLACK_HEART\": () => (/* binding */ UC_BLACK_HEART),\n/* harmony export */   \"UC_MUSIC\": () => (/* binding */ UC_MUSIC),\n/* harmony export */   \"UC_YES\": () => (/* binding */ UC_YES),\n/* harmony export */   \"UC_NO\": () => (/* binding */ UC_NO),\n/* harmony export */   \"UC_BULB\": () => (/* binding */ UC_BULB),\n/* harmony export */   \"UC_BUG\": () => (/* binding */ UC_BUG),\n/* harmony export */   \"UC_FONT\": () => (/* binding */ UC_FONT),\n/* harmony export */   \"UC_LOCK\": () => (/* binding */ UC_LOCK)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/const */ \"./shared/const.ts\");\n// Client-only extension of server/shared/const.js\n\nconst FRAME = 1000 / 60;\nconst MIN_FRAME_DELTA = 5;\nconst MAX_FRAME_DELTA = 250;\nconst KEY_BACKSPACE = 8;\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_ESCAPE = 27;\nconst KEY_SPACE = 32;\nconst KEY_LEFT = 37;\nconst KEY_UP = 38;\nconst KEY_RIGHT = 39;\nconst KEY_DOWN = 40;\nconst KEY_FULLSCREEN = 70; // F key\nconst KEY_MUTE = 77; // M key\nconst KEY_START = 83; // S key\nconst FIELD_BUGS = -1;\nconst FIELD_NAME = 0;\nconst FIELD_QUICK_GAME = 1;\nconst FIELD_MAX_PLAYERS = 2;\nconst FIELD_LEVEL_SET = 3;\nconst FIELD_POWERUPS = 4;\nconst FIELD_PRIVATE = 5;\nconst FIELD_XSS = 6;\nconst KEY_TO_DIRECTION = [];\nKEY_TO_DIRECTION[KEY_LEFT] = _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_LEFT;\nKEY_TO_DIRECTION[KEY_UP] = _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_UP;\nKEY_TO_DIRECTION[KEY_RIGHT] = _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_RIGHT;\nKEY_TO_DIRECTION[KEY_DOWN] = _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_DOWN;\nconst GAME_LEFT = 2;\nconst GAME_TOP = 2;\nconst MENU_LEFT = 44;\nconst MENU_TOP = 48;\nconst MENU_WIDTH = 167;\nconst MENU_WRAP = 176;\nconst MENU_TITLE_HEIGHT = 20;\nconst DOM_EVENT_KEYPRESS = \"keypress\";\nconst DOM_EVENT_KEYDOWN = \"keydown\";\nconst DOM_EVENT_KEYUP = \"keyup\";\nconst HASH_ROOM = \"room\";\nconst NS_DEBUG = \"DEBUG\";\nconst NS_ANIM = \"ANM\";\nconst NS_ACTION = \"ACT\";\nconst NS_BETWEEN_GAME = \"BGM\";\nconst NS_EXPLOSION = \"EXPL\";\nconst NS_FLOW = \"FLW\";\nconst NS_CHAT = \"CHT\";\nconst NS_DIALOG = \"DLG\";\nconst NS_INPUT = \"INP\";\nconst NS_GAME = \"GAM\";\nconst NS_MSGBOX = \"MSG\";\nconst NS_ROOM = \"ROM\";\nconst NS_ROUND = \"RND\";\nconst NS_ROUND_SET = \"RST\";\nconst NS_PRE_GAME = \"PGM\";\nconst NS_SCORE = \"SCR\";\nconst NS_SNAKE = \"SNK\";\nconst NS_SNAKE_CONTROLS = \"SNKC\";\nconst NS_HEARTBEAT = \"HBT\";\nconst NS_SOCKET = \"SOK\";\nconst NS_SPAWN = \"SPN\";\nconst NS_STAGES = \"STG\";\nconst EV_GAME_TICK = \"TIK\";\nconst EV_WIN_FOCUS_CHANGE = \"WFC\";\nconst EV_FONT_LOAD = \"FLD\";\nconst EV_PLAYERS_UPDATED = \"PU\";\nconst STORAGE_MUTE = \"MUT\";\nconst STORAGE_NAME = \"NME\";\nconst STORAGE_XSS = \"XSS\";\nconst STORAGE_COLOR = \"CLR\";\nconst STORAGE_PREFS = \"PRF\";\nconst UC_ARR_LEFT = \"\\u2190\";\nconst UC_ARR_UP = \"\\u2191\";\nconst UC_ARR_RIGHT = \"\\u2192\";\nconst UC_ARR_DOWN = \"\\u2193\";\nconst UC_CODE = \"\\u2263\";\nconst UC_ELECTRIC = \"\\u2301\";\nconst UC_HOURGLASS = \"\\u231B\";\nconst UC_ENTER_KEY = \"\\u23ce\";\nconst UC_SQUARE = \"\\u25a0\";\nconst UC_TR_LEFT = \"\\u25c0\";\nconst UC_TR_RIGHT = \"\\u25b6\";\nconst UC_TR_UP = \"\\u25b2\";\nconst UC_TR_DOWN = \"\\u25bc\";\nconst UC_APPLE = \"\\u25ce\"; // Bullseye\nconst UC_SKULL = \"\\u2620\";\nconst UC_FROWNY_FACE = \"\\u2639\";\nconst UC_HAPPY_FACE = \"\\u263A\";\nconst UC_WHITE_HEART = \"\\u2661\";\nconst UC_BLACK_HEART = \"\\u2665\";\nconst UC_MUSIC = \"\\u266b\";\nconst UC_YES = \"\\u2714\";\nconst UC_NO = \"\\u2717\";\nconst UC_BULB = \"\\u2800\"; // Braille range.\nconst UC_BUG = \"\\u2801\";\nconst UC_FONT = \"\\u2802\";\nconst UC_LOCK = \"\\u2803\";\n\n\n//# sourceURL=webpack://xssnake/./client/const.ts?");

/***/ }),

/***/ "./client/copy/copy.ts":
/*!*****************************!*\
  !*** ./client/copy/copy.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"COPY_AWAITING_PLAYERS_HEADER\": () => (/* binding */ COPY_AWAITING_PLAYERS_HEADER),\n/* harmony export */   \"COPY_AWAITING_PLAYERS_BODY\": () => (/* binding */ COPY_AWAITING_PLAYERS_BODY),\n/* harmony export */   \"COPY_AWAITING_PLAYERS_START_NOW\": () => (/* binding */ COPY_AWAITING_PLAYERS_START_NOW),\n/* harmony export */   \"COPY_CONFIRM_START_HEADER\": () => (/* binding */ COPY_CONFIRM_START_HEADER),\n/* harmony export */   \"COPY_CONFIRM_START_BODY\": () => (/* binding */ COPY_CONFIRM_START_BODY),\n/* harmony export */   \"COPY_CONFIRM_EXIT_HEADER\": () => (/* binding */ COPY_CONFIRM_EXIT_HEADER),\n/* harmony export */   \"COPY_CONFIRM_EXIT_BODY\": () => (/* binding */ COPY_CONFIRM_EXIT_BODY),\n/* harmony export */   \"COPY_CONFIRM_EXIT_BODY_DRAMATIC\": () => (/* binding */ COPY_CONFIRM_EXIT_BODY_DRAMATIC),\n/* harmony export */   \"COPY_ERROR\": () => (/* binding */ COPY_ERROR),\n/* harmony export */   \"COPY_DIALOG_OK\": () => (/* binding */ COPY_DIALOG_OK),\n/* harmony export */   \"COPY_DIALOG_CANCEL\": () => (/* binding */ COPY_DIALOG_CANCEL),\n/* harmony export */   \"COPY_LEVELSET_BASIC\": () => (/* binding */ COPY_LEVELSET_BASIC),\n/* harmony export */   \"COPY_LEVELSET_MOVING\": () => (/* binding */ COPY_LEVELSET_MOVING),\n/* harmony export */   \"COPY_LEVELSET_MAZE\": () => (/* binding */ COPY_LEVELSET_MAZE),\n/* harmony export */   \"COPY_LEVELSET_GAME\": () => (/* binding */ COPY_LEVELSET_GAME),\n/* harmony export */   \"COPY_COMMA_SPACE\": () => (/* binding */ COPY_COMMA_SPACE),\n/* harmony export */   \"COPY_SPACE_AND_SPACE\": () => (/* binding */ COPY_SPACE_AND_SPACE),\n/* harmony export */   \"COPY_ELLIPSIS\": () => (/* binding */ COPY_ELLIPSIS),\n/* harmony export */   \"COPY_JOINER\": () => (/* binding */ COPY_JOINER),\n/* harmony export */   \"COPY_DEF\": () => (/* binding */ COPY_DEF),\n/* harmony export */   \"COPY_MAIN_INSTRUCT\": () => (/* binding */ COPY_MAIN_INSTRUCT),\n/* harmony export */   \"COPY_FORM_INSTRUCT\": () => (/* binding */ COPY_FORM_INSTRUCT),\n/* harmony export */   \"COPY_COUNTDOWN_TITLE\": () => (/* binding */ COPY_COUNTDOWN_TITLE),\n/* harmony export */   \"COPY_COUNTDOWN_BODY\": () => (/* binding */ COPY_COUNTDOWN_BODY),\n/* harmony export */   \"COPY_SOCKET_CONNECTION_LOST\": () => (/* binding */ COPY_SOCKET_CONNECTION_LOST),\n/* harmony export */   \"COPY_SOCKET_CANNOT_CONNECT\": () => (/* binding */ COPY_SOCKET_CANNOT_CONNECT),\n/* harmony export */   \"COPY_SOCKET_SERVER_AWAY\": () => (/* binding */ COPY_SOCKET_SERVER_AWAY),\n/* harmony export */   \"COPY_FIELD_TRUE\": () => (/* binding */ COPY_FIELD_TRUE),\n/* harmony export */   \"COPY_FIELD_FALSE\": () => (/* binding */ COPY_FIELD_FALSE),\n/* harmony export */   \"COPY_FIELD_LEVEL_SET\": () => (/* binding */ COPY_FIELD_LEVEL_SET),\n/* harmony export */   \"COPY_OPTIONS_STAGE_HEADER\": () => (/* binding */ COPY_OPTIONS_STAGE_HEADER),\n/* harmony export */   \"COPY_FIELD_POWERUPS\": () => (/* binding */ COPY_FIELD_POWERUPS),\n/* harmony export */   \"COPY_FIELD_PRIVATE\": () => (/* binding */ COPY_FIELD_PRIVATE),\n/* harmony export */   \"COPY_FIELD_XSS\": () => (/* binding */ COPY_FIELD_XSS),\n/* harmony export */   \"COPY_FIELD_MAX_PLAYERS\": () => (/* binding */ COPY_FIELD_MAX_PLAYERS),\n/* harmony export */   \"COPY_FIELD_BUGS\": () => (/* binding */ COPY_FIELD_BUGS),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT1\": () => (/* binding */ COPY_FIELD_TRUE_OPT1),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT2\": () => (/* binding */ COPY_FIELD_TRUE_OPT2),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT3\": () => (/* binding */ COPY_FIELD_TRUE_OPT3),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT4\": () => (/* binding */ COPY_FIELD_TRUE_OPT4),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT5\": () => (/* binding */ COPY_FIELD_TRUE_OPT5),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT6\": () => (/* binding */ COPY_FIELD_TRUE_OPT6),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT7\": () => (/* binding */ COPY_FIELD_TRUE_OPT7),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT8\": () => (/* binding */ COPY_FIELD_TRUE_OPT8),\n/* harmony export */   \"COPY_FIELD_TRUE_OPT9\": () => (/* binding */ COPY_FIELD_TRUE_OPT9),\n/* harmony export */   \"COPY_BOOL\": () => (/* binding */ COPY_BOOL),\n/* harmony export */   \"COPY_AUTOJOIN_HEADER\": () => (/* binding */ COPY_AUTOJOIN_HEADER),\n/* harmony export */   \"COPY_AUTOJOIN_CONNECTING\": () => (/* binding */ COPY_AUTOJOIN_CONNECTING),\n/* harmony export */   \"COPY_AUTOJOIN_FETCHING\": () => (/* binding */ COPY_AUTOJOIN_FETCHING),\n/* harmony export */   \"COPY_AUTOJOIN_PLAYERS\": () => (/* binding */ COPY_AUTOJOIN_PLAYERS),\n/* harmony export */   \"COPY_AUTOJOIN_ENTER_NAME\": () => (/* binding */ COPY_AUTOJOIN_ENTER_NAME),\n/* harmony export */   \"COPY_CHAT_INSTRUCT\": () => (/* binding */ COPY_CHAT_INSTRUCT),\n/* harmony export */   \"COPY_CONNECTING\": () => (/* binding */ COPY_CONNECTING),\n/* harmony export */   \"COPY_PLAYER_JOINED\": () => (/* binding */ COPY_PLAYER_JOINED),\n/* harmony export */   \"COPY_PLAYER_QUIT\": () => (/* binding */ COPY_PLAYER_QUIT),\n/* harmony export */   \"COPY_SNAKE_CRASHED\": () => (/* binding */ COPY_SNAKE_CRASHED),\n/* harmony export */   \"COPY_ROUND_DRAW_TITLE\": () => (/* binding */ COPY_ROUND_DRAW_TITLE),\n/* harmony export */   \"COPY_ROUND_WINNER_TITLE\": () => (/* binding */ COPY_ROUND_WINNER_TITLE),\n/* harmony export */   \"COPY_ROUND_NEW_BODY\": () => (/* binding */ COPY_ROUND_NEW_BODY)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n\n\n\nconst COPY_AWAITING_PLAYERS_HEADER = \"Msg your friends\";\nconst COPY_AWAITING_PLAYERS_BODY = \"You can fit {0} more player{1} in this room! Share the current page URL with your online friends to allow direct access.\";\nconst COPY_AWAITING_PLAYERS_START_NOW = \"Press S to start now.\";\nconst COPY_CONFIRM_START_HEADER = \"Confirm start\";\nconst COPY_CONFIRM_START_BODY = \"Do you really want to start the game before the room is full?\";\nconst COPY_CONFIRM_EXIT_HEADER = \"Confirm exit\";\nconst COPY_CONFIRM_EXIT_BODY = \"Do you really want to leave this room?\";\nconst COPY_CONFIRM_EXIT_BODY_DRAMATIC = \"Do you REALLY want to leave that other player ALL ALONE in this room?\";\n// Invalid room.\nconst COPY_ERROR = [];\nCOPY_ERROR[_shared_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_INVALID_KEY] = \"Invalid room key\".toUpperCase();\nCOPY_ERROR[_shared_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_NOT_FOUND] = \"Room not found\".toUpperCase();\nCOPY_ERROR[_shared_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_FULL] = \"The room is full!\".toUpperCase();\nCOPY_ERROR[_shared_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_IN_PROGRESS] = \"Game in progress\".toUpperCase();\nCOPY_ERROR[_shared_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_UNKNOWN_ERROR] = \"Unknown errooshiii#^%^\".toUpperCase();\n// Dialog common.\nconst COPY_DIALOG_OK = \"Ok\".toUpperCase();\nconst COPY_DIALOG_CANCEL = \"Cancel\".toUpperCase();\n// Level sets.\nconst COPY_LEVELSET_BASIC = \"Basic\";\nconst COPY_LEVELSET_MOVING = \"Moving\";\nconst COPY_LEVELSET_MAZE = \"Mazes\";\nconst COPY_LEVELSET_GAME = \"Pactris\";\n// Stages misc.\nconst COPY_COMMA_SPACE = \", \";\nconst COPY_SPACE_AND_SPACE = \" & \";\nconst COPY_ELLIPSIS = \" …\";\nconst COPY_JOINER = \" …\\n\";\nconst COPY_DEF = \":  \";\n// Main stage.\nconst COPY_MAIN_INSTRUCT = [\n    \"M to mute/unmute sounds\",\n    ((0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_1__.isMac)() ? \"Cmd+Ctrl+F11\" : \"F11\") + \" to enter/exit fullscreen\",\n    \"Arrow keys, Esc and \" + _const__WEBPACK_IMPORTED_MODULE_2__.UC_ENTER_KEY + \" to navigate\",\n].join(COPY_JOINER);\n// Form stage.\nconst COPY_FORM_INSTRUCT = [\n    _const__WEBPACK_IMPORTED_MODULE_2__.UC_ARR_UP + \" & \" + _const__WEBPACK_IMPORTED_MODULE_2__.UC_ARR_DOWN + \" to select an option\",\n    _const__WEBPACK_IMPORTED_MODULE_2__.UC_ARR_LEFT + \" & \" + _const__WEBPACK_IMPORTED_MODULE_2__.UC_ARR_RIGHT + \" to change the value\",\n    _const__WEBPACK_IMPORTED_MODULE_2__.UC_ENTER_KEY + \" to continue\",\n].join(COPY_JOINER);\n// Pre-game dialog.\nconst COPY_COUNTDOWN_TITLE = \"Get ready!\";\nconst COPY_COUNTDOWN_BODY = \"Game starting in: {0}\";\n// Lost connection.\nconst COPY_SOCKET_CONNECTION_LOST = \"Connection lost\";\nconst COPY_SOCKET_CANNOT_CONNECT = \"Cannot connect\";\nconst COPY_SOCKET_SERVER_AWAY = \"Server went away\";\n// Game options stage.\nconst COPY_FIELD_TRUE = \"Yes\";\nconst COPY_FIELD_FALSE = \"No\";\nconst COPY_FIELD_LEVEL_SET = \"Level Set\";\nconst COPY_OPTIONS_STAGE_HEADER = \"Game Options\";\nconst COPY_FIELD_POWERUPS = \"Power-Ups\";\nconst COPY_FIELD_PRIVATE = \"Private Room\";\nconst COPY_FIELD_XSS = \"Winner fires XSS\";\nconst COPY_FIELD_MAX_PLAYERS = \"Max Players\";\nconst COPY_FIELD_BUGS = \"WEIRD BUGS \" + _const__WEBPACK_IMPORTED_MODULE_2__.UC_BUG;\nconst COPY_FIELD_TRUE_OPT1 = COPY_FIELD_TRUE;\nconst COPY_FIELD_TRUE_OPT2 = \"Enable\";\nconst COPY_FIELD_TRUE_OPT3 = \"OK\";\nconst COPY_FIELD_TRUE_OPT4 = \"True\";\nconst COPY_FIELD_TRUE_OPT5 = \"Accept\";\nconst COPY_FIELD_TRUE_OPT6 = \"Hao\";\nconst COPY_FIELD_TRUE_OPT7 = \"Oui!\";\nconst COPY_FIELD_TRUE_OPT8 = \"Si Senor\";\nconst COPY_FIELD_TRUE_OPT9 = _const__WEBPACK_IMPORTED_MODULE_2__.UC_YES;\nconst COPY_BOOL = [COPY_FIELD_FALSE, COPY_FIELD_TRUE];\n// Join room by key.\nconst COPY_AUTOJOIN_HEADER = \"Auto-Join room\".toUpperCase();\nconst COPY_AUTOJOIN_CONNECTING = \"Connecting to server…\";\nconst COPY_AUTOJOIN_FETCHING = \"Getting room properties…\";\nconst COPY_AUTOJOIN_PLAYERS = \"Players ({0})\";\nconst COPY_AUTOJOIN_ENTER_NAME = \"Enter your name to join: \";\nconst COPY_CHAT_INSTRUCT = \"Press \" + _const__WEBPACK_IMPORTED_MODULE_2__.UC_ENTER_KEY + \" to chat.\";\n// Game stage connecting\nconst COPY_CONNECTING = \"Connecting...\";\n// Chat.\nconst COPY_PLAYER_JOINED = \"{0} joined.\";\nconst COPY_PLAYER_QUIT = \"{0} quit.\";\n// Notify snake crashes.\nconst COPY_SNAKE_CRASHED = \" crashed.\";\n// Round winner.\nconst COPY_ROUND_DRAW_TITLE = \"Round ended in a draw\".toUpperCase();\nconst COPY_ROUND_WINNER_TITLE = \"{0} won!\".toUpperCase();\nconst COPY_ROUND_NEW_BODY = \"New round starting in: {0}\";\n\n\n//# sourceURL=webpack://xssnake/./client/copy/copy.ts?");

/***/ }),

/***/ "./client/data/mp3.ts":
/*!****************************!*\
  !*** ./client/data/mp3.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MP3_FILES\": () => (/* binding */ MP3_FILES)\n/* harmony export */ });\n// TODO: Custom loader.\nconst MP3_FILES = {\n    menu: \"//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAADAAADdQBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVXHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f///////////////////////////////////////////8AAAA5TEFNRTMuOTlyAlMAAAAAAAAAABQgJAYKQgAAIAAAA3UteWP/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//swxAAABCQPYxQxgDGPGay3IPACAAFf+ESuBgYsPlwfghBAEJcEAxlHfE71v/pwQq/lwQdPgAAAlFJxyNxuNxgAAABkUkVPj8C4L8H45AW8DiLJtNZKkN82ZpmpGbbg65EyEsbW2KqI0WWBLVr5yqhdYjeEj8aq3mVCmfPoW3J9nXkxmutLpNZa7Zi5g6mx9y+Wa/pK6a6wcIAK//tQxAEADGi5SzmaAAFgGaWTE1AANANeqFAAACygCETPMImreME06XzUfeHvlvIqBgVNf8RmOEyL25cDVpeUTXIuiU3J4xWNvMyIF0MRiik4WgQoQu8jiKl0DBCARAjeo4g58nTNkUUa/zzKWs8ijrTJgv8h50AAAAAAgQARiuUvzYYlX4UYRCr8i6RRIDokPHPGVKRFuFp4GAAQBhgLAYkCpAkRygv94GW0cBgMECCZ4ggXRD8AuCJkiv2J8vn0JMpP/1GRvMFK9SSX9CcqTP/7EMQAg8AAAaQcAAAgAAA0gAAABEFNRTMuOTkuM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq\",\n    menu_alt: \"//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAAC2QCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAAA5TEFNRTMuOTlyAlMAAAAAAAAAABQgJAMkQgAAIAAAAtkTJ9gjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//swxAAABGAfWTRggDGKGajXNzAAAACYIUACEHBwGAwGTTiCBBDBOPeCAIQxyjvE4P/+XfOfKBgQEAAAA1ZjDixkT588wsGTSsQb9hTM4BOGB4yBdXucaSAtcUYLeRtgRgYEBGdD0GRItkaNcokibmHbh+Yg8mC6kJCIG4vRUubEKThXJpNjVtf5NlxM1RJsuE4vnTUmjb7l0yUk//swxACADFijRbmsgACUAh1DmDABEAANCRZuSNIAAAAABU7bl+DGiJVPP4Cg4CBJa4+CVJ0CBhBJen9mXWvWncH/n4xEIFq54/9Ria523yuymM4//l/UDpy3+VPSUNn947x5Tv/F3EzsXZa4CYtn98rZZyW9vFSsCQHidc5PeGQgo4FbcFYiwXhwKlFZdNi/8Xor//8fCsgroL8V\",\n    swoosh: \"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\",\n    swoosh_rev: \"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\",\n};\n\n\n//# sourceURL=webpack://xssnake/./client/data/mp3.ts?");

/***/ }),

/***/ "./client/data/ogg.ts":
/*!****************************!*\
  !*** ./client/data/ogg.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"OGG_FILES\": () => (/* binding */ OGG_FILES)\n/* harmony export */ });\n// TODO: Check if ogg can be dropped.\nconst OGG_FILES = {\n    menu: \"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\",\n    menu_alt: \"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lFJKKaWUUkoppZRSSimllFJKKaWUUkqppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoplVJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSCgCQinAAkHowoQwUGrISAEgFAACMUUopxpyDEDHmGGPQSSgpYsw5xhyUklLlHIQQUmktt8o5CCGk1FJtmXNSWosx5hgz56SkFFvNOYdSUoux5ppr7qS0VmuuNedaWqs115xzzbm0FmuuOdecc8sx15xzzjnnGHPOOeecc84FAOA0OACAHtiwOsJJ0VhgoSErAYBUAAACGaUYc8456BBSjDnnHIQQIoUYc845CCFUjDnnHHQQQqgYc8w5CCGEkDnnHIQQQgghcw466CCEEEIHHYQQQgihlM5BCCGEEEooIYQQQgghhBA6CCGEEEIIIYQQQgghhFJKCCGEEEIJoZRQAABggQMAQIANqyOcFI0FFhqyEgAAAgCAHJagUs6EQY5Bjw1BylEzDUJMOdGZYk5qMxVTkDkQnXQSGWpB2V4yCwAAgCAAIMAEEBggKPhCCIgxAABBiMwQCYVVsMCgDBoc5gHAA0SERACQmKBIu7iALgNc0MVdB0IIQhCCWBxAAQk4OOGGJ97whBucoFNU6iAAAAAAAAwA4AEA4KAAIiKaq7C4wMjQ2ODo8AgAAAAAABYA+AAAOD6AiIjmKiwuMDI0Njg6PAIAAAAAAAAAAICAgAAAAAAAQAAAAICAT2dnUwAEnAMAAAAAAAAtHQAAAgAAAM5mwvoEIh90dDxZ5he94AbkwUgQIICbNC6KMriiTi9y7/6s/3rcvx7jPmUUXXA7XpcnJsCl03tXvHR+6X0z419fxkcmdPKuBH0ImnmtSQq+wAelvdxdpzupn73nLyC/PpcffX+YLife7ucRWc9tAJ0BheMGrZBCDknQa0++Bf6g46zR+0F9nt3u+pu/tcR56bRB4WAb4wz43lkfBw2ABo4AXXm5I+sFeIxIABiF0r7IjY5XbQIAvlwPAODjQAB+yP176PfYjPJh/LbFh5Sq6RZEFyujtzPy9KaEzKAwEFBIQqvtazPv9K+xYtZX7h9V8eD81GvjbsDZ5/R8o+TOgLA4wouGPAadXwrnc4phI9GSGcA671Ve6XUnEQBAAjQAcP266777laUBAGATAOizkQQFAA==\",\n    swoosh: \"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lFJKKaWUUkoppZRSSimllFJKKaWUUkqppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoplVJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSCgCQinAAkHowoQwUGrISAEgFAACMUUopxpyDEDHmGGPQSSgpYsw5xhyUklLlHIQQUmktt8o5CCGk1FJtmXNSWosx5hgz56SkFFvNOYdSUoux5ppr7qS0VmuuNedaWqs115xzzbm0FmuuOdecc8sx15xzzjnnGHPOOeecc84FAOA0OACAHtiwOsJJ0VhgoSErAYBUAAACGaUYc8456BBSjDnnHIQQIoUYc845CCFUjDnnHHQQQqgYc8w5CCGEkDnnHIQQQgghcw466CCEEEIHHYQQQgihlM5BCCGEEEooIYQQQgghhBA6CCGEEEIIIYQQQgghhFJKCCGEEEIJoZRQAABggQMAQIANqyOcFI0FFhqyEgAAAgCAHJagUs6EQY5Bjw1BylEzDUJMOdGZYk5qMxVTkDkQnXQSGWpB2V4yCwAAgCAAIMAEEBggKPhCCIgxAABBiMwQCYVVsMCgDBoc5gHAA0SERACQmKBIu7iALgNc0MVdB0IIQhCCWBxAAQk4OOGGJ97whBucoFNU6iAAAAAAAA4A4AEA4KAAIiKaq7C4wMjQ2ODo8AgAAAAAABoA+AAAOD6AiIjmKiwuMDI0Njg6PAIAAAAAAAAAAICAgAAAAAAAQAAAAICAT2dnUwAEACMAAAAAAAAOWwAAAgAAAAu68EANISYkI7GyrK+wlaejl7Qus7j1VaMFMAjjrOPEw8SF6a1npT8/vnWBRRUSM3zJAMS0edakL50LkLH54GYmwYMTF40T0db222HllH1cPXeaJ5YsdogCzLZF1bSnymuQTOGd6dbDnrJox+1nT/ZJ4jL+0tiWeGaqbpsr3LZFYdrFc9mQTNrqqWSfOUBrNASz6bzbrrfst9KUKwJxRQCaOePmAb5cBwR04crIz3X9iyG/eX2f9E7FXITE5mxmVTlcg4lG+n9ybF/yK3a7NOH739Os7abkW1VW15mzU+H4hTxFnGNDP4apw25WEmNwnuKMVt2SjsNMuRfu5dOeVC27Lc6d4dIFmYxrBkHL950WLOI2RgnAxtlvXpBZ8mGXpizGkog1eUwdhszYqObt1UA4F70J0Jv+kABxFf2ejkpw1/uBN2nKBkx2EaeAfyJnEUZeaQuEypnpOnUlC6y0VB9DGLHB1hlshFjsslLO4BqLhTUEa1uoP+p3PnHs2yNaPj2bu2mMQbo7PiZm031qEYD6vx6BXqjYqnZKKSGPtFes4e+r4G8qAwzkvhyHwSCX+r5QuWkreMm9pdCsXA2+LTRnvWfImzFLK0vCfdiOTsze0M80NYvYSlPbrE+T6H4da2GtuZoTFDlUPXrTj4bXAriTZwk+qGBmLLbfP2Th7ol5MLwA3tnLe3mvHAC9SIATwWPMZtIOKeY7IttpNPOKXNSodD7O7sbX1g+z/va++9H1b7/vd5+fWdYn7wKFyAAodE7O6X5qEmbde0ILSi24+e5ROUfPMKOpeJF8XPje2wYx7G7Clf5pk4+HbQ/IddeAXxt49Np7E91dpO28K34pbCmdUFtqX29ztKD4YcqEeqaSMD2y69f44HxDhvizn2CvX/NuEHGERTSGYBG2pmZhAN7pG8Y8rcQ1AUYJDIfHzgI2I8YtA1KDVUuyJImWR299nSuWcp//fMp2u6pS6z6Ix/seoOcdOuoJCsfxr/JZOjFQnWiTD1ZkNna14sPjiiRnD+21Lc+WsNW19FunVwp2NE24KJi6p4HMzr2/W7fTvGyW3zRFRlF1aLKoc+Lyw5H8a8oDWYZtxwKj3CNGrN3V83sEHCZqow9z2bXgzgPY3IVjd9h5PG/5vcvp0Jkt2bH+2RtkC6/0CwpNCziEJk+fmW5yrsXQSVO/RWOhyQpzEkQ/K8uZ322FUWb9owVj67753aT+bsjRn5+q2akOZLAPCfvVzTtPUsLP9BOOE7Ol3yiB15xAeWo1lbX1kwu8vV12/Vtb722S0RKJDVRnP2R1UF7nDVJMOUEMAV1cf6UzJBK8eXAWsIms2VUUCG9vpe3mXX+Qh4xtc24IMtApyU7Oli6q7b2QqcthlGMVB8OvEb4ptNHKEWwJEbcYoPDSS9P2jK4fAHGyNeY1XLCqyPDzfNR+ump77H1P2X3ba72WfobuWeP0qSokQN+9/fFi0Oxz9RFDNmqsjmNeii4DjdU1x2SFF18FWF8rTmDk9I6U3VgxAH/V5YIht540+25bL5fFLXtQp5mBoqvnL2vYrcJfquHWj0INaEPgtmCeATXwZ8DyCjwHXilTiMpS/QE7HHgMbGNE/QD0xu5pnSvzJVxQVrSuGTbydR2T+X/DXome3cSUbfyP3vZBkpWOzO91ntIAUE6WMxXoXWY/YpgLtbvUdibiG1gWmD+4NzGs3An5HB73SK98bynNPp6a6R13qKjRV08cdPuPLODRPa/JrQaWKXopYkKnbz0WMHs4GqOeUbKFvAhYmr9ITcpG1jtU0LhcySoFkxTrKKt64Rb+2OKITjWxg2iHtwjcT18Iahv10YmmM+qssVLDSRQRqftV59VYsbvIWlqvPjbXW39WlonOyRoO8LqShQOMXfbD8FyPHsO3JYacYv9Cy1SyKJM/rLZhlJiEo35cOLeprpk86agNC/9jTFy0DoKTZZer/9+2bxFMYtZBxA/B1m4h2lEhtos8ZMSQaJS68n57R5Pru+uUGng5nNRg8oTX2w7qTnMGHqliZuJtvqMXDC0iEU/nHnqMMcYYyYY9PZCsyrxWRFXxGdIu/rcmsQQjcZvnCqW27YeC/XK3zw/o3BgGDHGEejfpTVizX71nec4bj3RzsTkMcbFraMfBfQKR5i+VHit3l3JgPVqkD7YPYCl+9eB20IKU4jcAgHKH8EjxmmJ06KW/Q6AVACagAHjwNcBeHVS5M9jq6dyyAA==\",\n    swoosh_rev: \"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lFJKKaWUUkoppZRSSimllFJKKaWUUkqppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoplVJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSCgCQinAAkHowoQwUGrISAEgFAACMUUopxpyDEDHmGGPQSSgpYsw5xhyUklLlHIQQUmktt8o5CCGk1FJtmXNSWosx5hgz56SkFFvNOYdSUoux5ppr7qS0VmuuNedaWqs115xzzbm0FmuuOdecc8sx15xzzjnnGHPOOeecc84FAOA0OACAHtiwOsJJ0VhgoSErAYBUAAACGaUYc8456BBSjDnnHIQQIoUYc845CCFUjDnnHHQQQqgYc8w5CCGEkDnnHIQQQgghcw466CCEEEIHHYQQQgihlM5BCCGEEEooIYQQQgghhBA6CCGEEEIIIYQQQgghhFJKCCGEEEIJoZRQAABggQMAQIANqyOcFI0FFhqyEgAAAgCAHJagUs6EQY5Bjw1BylEzDUJMOdGZYk5qMxVTkDkQnXQSGWpB2V4yCwAAgCAAIMAEEBggKPhCCIgxAABBiMwQCYVVsMCgDBoc5gHAA0SERACQmKBIu7iALgNc0MVdB0IIQhCCWBxAAQk4OOGGJ97whBucoFNU6iAAAAAAAA4A4AEA4KAAIiKaq7C4wMjQ2ODo8AgAAAAAABoA+AAAOD6AiIjmKiwuMDI0Njg6PAIAAAAAAAAAAICAgAAAAAAAQAAAAICAT2dnUwAEACMAAAAAAABLWgAAAgAAACXCqvEWJiG1sx0cHB4dHCIkJZ+0tK++IiAjJNQwq0zb/O4OMOZb6HO7//xOrPLyl5b02dzv9y9e9Pv9j+c6dcoB5LRU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\",\n};\n\n\n//# sourceURL=webpack://xssnake/./client/data/ogg.ts?");

/***/ }),

/***/ "./client/game/clientGame.ts":
/*!***********************************!*\
  !*** ./client/game/clientGame.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientGame\": () => (/* binding */ ClientGame)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _spawnableRegistry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./spawnableRegistry */ \"./client/game/spawnableRegistry.ts\");\n/***\n * Game\n *\n * A Game does not start immediately after a new instance of the Game class\n * is created. It will show the snakes, level, name labels and directions\n * until ClientGame.start() is called.\n *\n * @param {level.Level} level\n * @param {room.ClientPlayerRegistry} players\n *\n * @constructor\n */\n\n\n\n\nclass ClientGame {\n    constructor(level, players) {\n        this.level = level;\n        this.players = this.updatePlayers(players);\n        this.level.paint();\n        this.started = false;\n        this.spawnables = new _spawnableRegistry__WEBPACK_IMPORTED_MODULE_3__.SpawnableRegistry();\n        this.bindEvents();\n    }\n    destruct() {\n        this.unbindEvents();\n        this.spawnables.destruct();\n        this.level = null;\n        this.players = null;\n        this.spawnables = null;\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_1__.EV_GAME_TICK, _const__WEBPACK_IMPORTED_MODULE_1__.NS_GAME, this.gameloop.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SNAKE_UPDATE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_GAME, this.ncUpdateSnake.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SNAKE_CRASH, _const__WEBPACK_IMPORTED_MODULE_1__.NS_GAME, this.ncSetSnakesCrashed.bind(this));\n        //State.events.on(NC_GAME_SPAWN,     ns, this._evSpawn.bind(this));\n        //State.events.on(NC_GAME_DESPAWN,   ns, this._evSpawnHit.bind(this));\n        //\n        //State.events.on(NC_SNAKE_SIZE,     ns, this._evSnakeSize.bind(this));\n        //State.events.on(NC_SNAKE_CRASH,    ns, this._evSnakeCrash.bind(this));\n        //State.events.on(NC_SNAKE_ACTION,   ns, this._evSnakeAction.bind(this));\n        //State.events.on(NC_SNAKE_SPEED,    ns, this._evSnakeSpeed.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.EV_GAME_TICK, _const__WEBPACK_IMPORTED_MODULE_1__.NS_GAME);\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SNAKE_UPDATE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_GAME);\n    }\n    /**\n     * Update game before round has started.\n     * Don't call this mid-game.\n     */\n    updatePlayers(players) {\n        players.unsetSnakes();\n        players.setSnakes(this.level);\n        players.showMeta();\n        return players;\n    }\n    /**\n     * @param {level.Level} level\n     */\n    updateLevel(level) {\n        this.level.destruct();\n        this.level = level;\n        this.level.paint();\n        // Apply changes in spawns.\n        this.updatePlayers(this.players);\n    }\n    /**\n     * @param {Array} serializedSnake\n     */\n    ncUpdateSnake(serializedSnake) {\n        const clientIndex = serializedSnake.shift();\n        this.players.players[clientIndex].snake.deserialize(serializedSnake);\n    }\n    /**\n     * @param {Array} serializedCollisions\n     */\n    ncSetSnakesCrashed(serializedCollisions) {\n        for (let i = 0, m = serializedCollisions.length; i < m; i++) {\n            let snake;\n            const collision = serializedCollisions[i];\n            snake = this.players.players[collision[0]].snake;\n            snake.parts = collision[1];\n            snake.setCrashed(collision[2]);\n        }\n    }\n    /**\n     * Runs ~ every 16 ms (60 fps)\n     * @param {number} elapsed\n     */\n    gameloop(elapsed) {\n        const shift = this.level.gravity.getShift(elapsed);\n        this.level.animations.update(elapsed, this.started);\n        if (this.started) {\n            this.players.moveSnakes(this.level, elapsed, shift);\n        }\n    }\n    /**\n     * Start game.\n     */\n    start() {\n        this.started = true;\n        this.players.hideMeta();\n        this.players.addControls();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/game/clientGame.ts?");

/***/ }),

/***/ "./client/game/clientSnake.ts":
/*!************************************!*\
  !*** ./client/game/clientSnake.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientSnake\": () => (/* binding */ ClientSnake)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_game_snakeMove__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/game/snakeMove */ \"./shared/game/snakeMove.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_snake__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared/snake */ \"./shared/snake.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/clientShapeGenerator */ \"./client/ui/clientShapeGenerator.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _clientSnakeControls__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./clientSnakeControls */ \"./client/game/clientSnakeControls.ts\");\n/**\n * @param {number} index\n * @param {boolean} local\n * @param {string} name\n * @param {level.Level} level\n * @extends {game.Snake}\n * @constructor\n */\n\n\n\n\n\n\n\n\n\n\nclass ClientSnake extends _shared_snake__WEBPACK_IMPORTED_MODULE_3__.Snake {\n    constructor(index, local, name, level) {\n        super(index, level);\n        this.index = index;\n        this.local = local;\n        this.name = name;\n        this.elapsed = 0;\n        this.exploded = false;\n        this.controls = null;\n        /** @type {Object.<string,string>} */\n        this.shapeKeys = {\n            snake: _const__WEBPACK_IMPORTED_MODULE_4__.NS_SNAKE + index,\n            name: _const__WEBPACK_IMPORTED_MODULE_4__.NS_SNAKE + \"TAG\" + index,\n            direction: _const__WEBPACK_IMPORTED_MODULE_4__.NS_SNAKE + \"DIR\" + index,\n        };\n        this.updateShape();\n    }\n    destruct() {\n        // Remove any related shape.\n        const keys = Object.keys(this.shapeKeys);\n        for (let i = 0, m = keys.length; i < m; i++) {\n            const shapeKey = this.shapeKeys[keys[i]];\n            _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[shapeKey] = null;\n        }\n        if (this.controls) {\n            this.controls.destruct();\n            this.controls = null;\n        }\n    }\n    move(coordinate) {\n        if (this.controls) {\n            this.controls.move();\n        }\n        super.move(coordinate);\n    }\n    getShape() {\n        return _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[this.shapeKeys.snake];\n    }\n    showName() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[this.shapeKeys.name] = (0,_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_6__.tooltipName)(this.name, this.parts[0], this.direction);\n    }\n    showAction(label) {\n        (0,_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_6__.showAction)(label, this.getHead(), this.speed);\n    }\n    showDirection() {\n        let shift;\n        let head;\n        let shape;\n        shift = _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_SHIFT_MAP[this.direction];\n        head = this.getHead();\n        shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape();\n        shape.pixels.add(head[0] + shift[0], head[1] + shift[1]);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_7__.setGameTransform)(shape);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_7__.flash)(shape);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[this.shapeKeys.direction] = shape;\n    }\n    removeNameAndDirection() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[this.shapeKeys.name] = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[this.shapeKeys.direction] = null;\n    }\n    addControls() {\n        this.controls = new _clientSnakeControls__WEBPACK_IMPORTED_MODULE_9__.ClientSnakeControls(this);\n    }\n    /**\n     * @return {Shape}\n     */\n    updateShape() {\n        const shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape();\n        shape.pixels.addPairs(this.parts);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_7__.setGameTransform)(shape);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes[this.shapeKeys.snake] = shape;\n        return shape;\n    }\n    handleNextMove(level, elapsed, shift, players) {\n        this.elapsed += elapsed;\n        if (!this.crashed && this.elapsed >= this.speed) {\n            const move = new _shared_game_snakeMove__WEBPACK_IMPORTED_MODULE_1__.SnakeMove(this, players, level, this.getNextPosition());\n            this.elapsed -= this.speed;\n            // Don't show a snake moving inside a wall, which is caused by latency.\n            // Server wil issue a final verdict whether the snake truly crashed, or\n            // made a turn in time.\n            if (move.collision) {\n                if (this.local) {\n                    this.setCrashed(move.collision.location);\n                }\n                else {\n                    this.collision = move.collision;\n                }\n            }\n            else if (!this.collision) {\n                this.move(move.location);\n                this.updateShape();\n            }\n        }\n    }\n    /**\n     * @param {Coordinate=} crashingPart\n     */\n    setCrashed(crashingPart) {\n        this.crashed = true;\n        if (this.controls) {\n            this.controls.destruct();\n        }\n        if (!this.exploded) {\n            this.exploded = true;\n            this.explodeParticles(crashingPart);\n            const shape = this.updateShape();\n            (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_7__.lifetime)(shape, 0, _const__WEBPACK_IMPORTED_MODULE_4__.FRAME * 50);\n            (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_7__.flash)(shape, _const__WEBPACK_IMPORTED_MODULE_4__.FRAME * 5, _const__WEBPACK_IMPORTED_MODULE_4__.FRAME * 10);\n        }\n    }\n    // TODO: pass direction instead.\n    explodeParticles(collisionPart) {\n        let direction;\n        if (collisionPart) {\n            // Crashed part is specified.\n            direction = -1;\n        }\n        else {\n            // Assume head has crashed.\n            direction = this.direction;\n            collisionPart = this.getHead();\n        }\n        const location = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_8__.translateGame)(collisionPart);\n        location[0] += 1;\n        location[1] += 2;\n        (0,_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_6__.explosion)(location, direction);\n    }\n    deserialize(serializedSnake) {\n        this.direction = serializedSnake[0];\n        this.parts = serializedSnake[1];\n        // If server updated snake, client prediction\n        // of snake crashing was incorrect.\n        this.collision = null;\n    }\n    emit(direction) {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_5__.State.player) {\n            const sync = Math.round(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NETCODE_SYNC_MS / this.speed);\n            _state_state__WEBPACK_IMPORTED_MODULE_5__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SNAKE_UPDATE, [direction, this.parts.slice(-sync)]);\n        }\n    }\n    getNextPosition() {\n        const head = this.getHead();\n        if (this.controls) {\n            this.direction = this.controls.getNextDirection();\n        }\n        const shift = _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_SHIFT_MAP[this.direction];\n        return [head[0] + shift[0], head[1] + shift[1]];\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/game/clientSnake.ts?");

/***/ }),

/***/ "./client/game/clientSnakeControls.ts":
/*!********************************************!*\
  !*** ./client/game/clientSnakeControls.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientSnakeControls\": () => (/* binding */ ClientSnakeControls)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n\n\nclass ClientSnakeControls {\n    constructor(snake) {\n        this.snake = snake;\n        this.upcomingDirections = [];\n        this.bindEvents();\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_SNAKE_CONTROLS);\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_SNAKE_CONTROLS, this.handleKeys.bind(this));\n    }\n    handleKeys(event) {\n        const direction = _const__WEBPACK_IMPORTED_MODULE_0__.KEY_TO_DIRECTION[event.keyCode];\n        if (!_state_state__WEBPACK_IMPORTED_MODULE_1__.State.keysBlocked && typeof direction !== \"undefined\") {\n            this.setDirection(direction);\n        }\n    }\n    setDirection(direction) {\n        if (this.isDirectionAllowed(direction, this.getPreviousDirection())) {\n            this.upcomingDirections.push(direction);\n        }\n    }\n    getPreviousDirection() {\n        if (this.upcomingDirections.length) {\n            return this.upcomingDirections[0];\n        }\n        return this.snake.direction;\n    }\n    isDirectionAllowed(direction, prevDirection) {\n        const turn = Math.abs(direction - prevDirection);\n        return (this.upcomingDirections.length <= 2 &&\n            this.snake.parts.length >= 2 && // Must go to blinkie at start.\n            turn !== 0 &&\n            turn !== 2 // No turn and 180 turn not allowed.\n        );\n    }\n    getNextDirection() {\n        if (this.upcomingDirections.length) {\n            this.snake.direction = this.upcomingDirections[0];\n        }\n        return this.snake.direction;\n    }\n    emitNewDirection(direction) {\n        //        if (State.player && State.player.room && State.player.room.gameHasStarted()) {\n        this.snake.emit(direction);\n        //        }\n    }\n    move() {\n        if (this.upcomingDirections.length) {\n            this.emitNewDirection(this.upcomingDirections.shift());\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/game/clientSnakeControls.ts?");

/***/ }),

/***/ "./client/game/spawnableRegistry.ts":
/*!******************************************!*\
  !*** ./client/game/spawnableRegistry.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SpawnableRegistry\": () => (/* binding */ SpawnableRegistry)\n/* harmony export */ });\nclass SpawnableRegistry {\n}\n\n\n//# sourceURL=webpack://xssnake/./client/game/spawnableRegistry.ts?");

/***/ }),

/***/ "./client/index.ts":
/*!*************************!*\
  !*** ./client/index.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _shared_levels_debug_crosshair__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/levels/debug/crosshair */ \"./shared/levels/debug/crosshair.ts\");\n/* harmony import */ var _shared_levels_debug_lines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/levels/debug/lines */ \"./shared/levels/debug/lines.ts\");\n/* harmony import */ var _shared_levelset_registry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/levelset/registry */ \"./shared/levelset/registry.ts\");\n/* harmony import */ var _shared_levelsets_basic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/levelsets/basic */ \"./shared/levelsets/basic.ts\");\n/* harmony import */ var _netcode_eventHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./netcode/eventHandler */ \"./client/netcode/eventHandler.ts\");\n/* harmony import */ var _stage_stageFlow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stage/stageFlow */ \"./client/stage/stageFlow.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_audioPlayer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ui/audioPlayer */ \"./client/ui/audioPlayer.ts\");\n/* harmony import */ var _ui_canvas__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ui/canvas */ \"./client/ui/canvas.ts\");\n\n\n\n\n\n\n\n\n\nconst basic = new _shared_levelsets_basic__WEBPACK_IMPORTED_MODULE_3__.Basic();\nbasic.register(_shared_levels_debug_lines__WEBPACK_IMPORTED_MODULE_1__.LinesLevel);\nbasic.register(_shared_levels_debug_crosshair__WEBPACK_IMPORTED_MODULE_0__.CrosshairLevel);\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.levelsetRegistry = new _shared_levelset_registry__WEBPACK_IMPORTED_MODULE_2__.Registry();\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.levelsetRegistry.register(basic);\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.levelsetRegistry.preloadLevels();\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.shapes = {};\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.events = new _netcode_eventHandler__WEBPACK_IMPORTED_MODULE_4__.EventHandler();\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.canvas = new _ui_canvas__WEBPACK_IMPORTED_MODULE_8__.Canvas();\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.audio = new _ui_audioPlayer__WEBPACK_IMPORTED_MODULE_7__.AudioPlayer();\n_state_state__WEBPACK_IMPORTED_MODULE_6__.State.flow = new _stage_stageFlow__WEBPACK_IMPORTED_MODULE_5__.StageFlow();\nwindow.onerror = (error) => {\n    console.error(error);\n    _state_state__WEBPACK_IMPORTED_MODULE_6__.State.canvas.error = true; // Stop the paint!\n};\n\n\n//# sourceURL=webpack://xssnake/./client/index.ts?");

/***/ }),

/***/ "./client/level/imageDecoder.ts":
/*!**************************************!*\
  !*** ./client/level/imageDecoder.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ImageDecoder\": () => (/* binding */ ImageDecoder)\n/* harmony export */ });\n/**\n * Level image decoder for Client\n * @param {string} data\n * @constructor\n */\nclass ImageDecoder {\n    constructor(data) {\n        this.successFn = () => { };\n        this.image = new Image();\n        this.image.src = \"data:image/png;base64,\" + data;\n        this.image.onload = this.readFromCanvas.bind(this);\n    }\n    readFromCanvas() {\n        let canvas;\n        let ctx;\n        let imagedata;\n        canvas = document.createElement(\"canvas\");\n        canvas.width = this.image.width;\n        canvas.height = this.image.height;\n        ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(this.image, 0, 0);\n        imagedata = ctx.getImageData(0, 0, this.image.width, this.image.height);\n        this.successFn(imagedata);\n    }\n    /**\n     * @param {Function} successFn\n     */\n    then(successFn) {\n        // TODO: uses async\n        this.successFn = successFn;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/level/imageDecoder.ts?");

/***/ }),

/***/ "./client/netcode/eventHandler.ts":
/*!****************************************!*\
  !*** ./client/netcode/eventHandler.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventHandler\": () => (/* binding */ EventHandler)\n/* harmony export */ });\nclass EventHandler {\n    constructor() {\n        this._topics = {};\n    }\n    trigger(topic, ...eventData) {\n        let topicKeys;\n        const topics = this._topics[topic];\n        if (topics) {\n            topicKeys = Object.keys(topics);\n            for (let i = 0, m = topicKeys.length; i < m; i++) {\n                const key = topicKeys[i];\n                topics[key](...eventData);\n            }\n        }\n    }\n    on(topic, key, callback) {\n        if (!this._topics[topic]) {\n            this._topics[topic] = {};\n        }\n        this._topics[topic][key] = callback;\n        if (\"on\" + topic in document) {\n            document.addEventListener(topic, callback, false);\n        }\n    }\n    once(topic, key, callback) {\n        const callbackAndOff = function (...args) {\n            callback(...args);\n            this.off(topic, key);\n        }.bind(this);\n        this.on(topic, key, callbackAndOff);\n    }\n    off(topic, key) {\n        let callback;\n        if (topic in this._topics) {\n            if (typeof key !== \"undefined\") {\n                if (\"on\" + topic in document) {\n                    callback = this._topics[topic][key];\n                    document.removeEventListener(String(topic), callback, false);\n                }\n                delete this._topics[topic][key];\n            }\n            else {\n                delete this._topics[topic];\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/netcode/eventHandler.ts?");

/***/ }),

/***/ "./client/netcode/heartbeat.ts":
/*!*************************************!*\
  !*** ./client/netcode/heartbeat.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientHeartbeat\": () => (/* binding */ ClientHeartbeat)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n\n\n\nclass ClientHeartbeat {\n    constructor(player) {\n        this.player = player;\n        this.latency = 0;\n        this.pingSent = 0;\n        this.bindEvents();\n        this.ping();\n        this.interval = window.setInterval(this.ping.bind(this), _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEARTBEAT_INTERVAL_MS);\n    }\n    destruct() {\n        this.player = null;\n        clearInterval(this.interval);\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PONG, _const__WEBPACK_IMPORTED_MODULE_1__.NS_HEARTBEAT);\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PONG, _const__WEBPACK_IMPORTED_MODULE_1__.NS_HEARTBEAT, this.pong.bind(this));\n    }\n    ping() {\n        if (this.pingSent) {\n            // Last ping did not pong.\n            // return this.player.timeout();\n            console.error(\"this.player.timeout()\");\n        }\n        this.pingSent = +new Date();\n        this.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PING);\n    }\n    pong() {\n        this.latency = (this.pingSent - +new Date()) / 2;\n        this.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PONG);\n        this.pingSent = null;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/netcode/heartbeat.ts?");

/***/ }),

/***/ "./client/room/clientPlayer.ts":
/*!*************************************!*\
  !*** ./client/room/clientPlayer.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientPlayer\": () => (/* binding */ ClientPlayer)\n/* harmony export */ });\n/* harmony import */ var _shared_room_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/room/player */ \"./shared/room/player.ts\");\n/* harmony import */ var _game_clientSnake__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game/clientSnake */ \"./client/game/clientSnake.ts\");\n/**\n * Client-Server communication\n * @param {string=} name\n * @constructor\n * @extends {room.Player}\n */\n\n\nclass ClientPlayer extends _shared_room_player__WEBPACK_IMPORTED_MODULE_0__.Player {\n    constructor(name = \"\") {\n        super(name);\n        this.snake = null;\n        this.local = false;\n    }\n    /**\n     * @param {Array} serialized\n     */\n    deserialize(serialized) {\n        _shared_room_player__WEBPACK_IMPORTED_MODULE_0__.Player.prototype.deserialize.apply(this, arguments);\n        if (!this.connected && this.snake) {\n            this.snake.setCrashed();\n        }\n    }\n    /**\n     * @param {number} index\n     * @param {level.Level} level\n     */\n    setSnake(index, level) {\n        this.snake = new _game_clientSnake__WEBPACK_IMPORTED_MODULE_1__.ClientSnake(index, this.local, this.name, level);\n    }\n    unsetSnake() {\n        if (this.snake) {\n            this.snake.destruct();\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/clientPlayer.ts?");

/***/ }),

/***/ "./client/room/clientPlayerRegistry.ts":
/*!*********************************************!*\
  !*** ./client/room/clientPlayerRegistry.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientPlayerRegistry\": () => (/* binding */ ClientPlayerRegistry)\n/* harmony export */ });\n/* harmony import */ var _shared_room_playerRegistry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/room/playerRegistry */ \"./shared/room/playerRegistry.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _clientPlayer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./clientPlayer */ \"./client/room/clientPlayer.ts\");\n\n\n\n\nclass ClientPlayerRegistry extends _shared_room_playerRegistry__WEBPACK_IMPORTED_MODULE_0__.PlayerRegistry {\n    constructor() {\n        super();\n        this.localPlayer = null;\n    }\n    destruct() {\n        this.localPlayer = null;\n        super.destruct();\n    }\n    clone(playerRegistry) {\n        this.players = playerRegistry.players.slice();\n        this.localPlayer = playerRegistry.localPlayer;\n    }\n    deserialize(serializedPlayers) {\n        for (let i = 0, m = serializedPlayers.length; i < m; i++) {\n            this.players[i].deserialize(serializedPlayers[i]);\n        }\n    }\n    reconstruct(serializedPlayers) {\n        this.destruct();\n        for (let i = 0, m = serializedPlayers.length; i < m; i++) {\n            this.reconstructPlayer(serializedPlayers[i]);\n        }\n    }\n    reconstructPlayer(serialized) {\n        let player = new _clientPlayer__WEBPACK_IMPORTED_MODULE_3__.ClientPlayer();\n        player.deserialize(serialized);\n        if (player.local) {\n            _state_state__WEBPACK_IMPORTED_MODULE_2__.State.player.deserialize(serialized);\n            player = this.localPlayer = _state_state__WEBPACK_IMPORTED_MODULE_2__.State.player;\n        }\n        this.add(player);\n    }\n    getNames() {\n        const names = [];\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            names.push(this.players[i].name);\n        }\n        return names;\n    }\n    setScores(scores) {\n        for (let i = 0, m = scores.length; i < m; i++) {\n            this.players[i].score = scores[i];\n        }\n    }\n    setSnakes(level) {\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            this.players[i].setSnake(i, level);\n        }\n    }\n    unsetSnakes() {\n        // There may still be a few shapes lingering around.\n        this.clearSnakeShapes();\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            this.players[i].unsetSnake();\n        }\n    }\n    clearSnakeShapes() {\n        const keys = Object.keys(_state_state__WEBPACK_IMPORTED_MODULE_2__.State.shapes);\n        for (let i = 0, m = keys.length; i < m; i++) {\n            if (keys[i].substr(0, _const__WEBPACK_IMPORTED_MODULE_1__.NS_SNAKE.length) === _const__WEBPACK_IMPORTED_MODULE_1__.NS_SNAKE) {\n                _state_state__WEBPACK_IMPORTED_MODULE_2__.State.shapes[keys[i]] = null;\n            }\n        }\n    }\n    moveSnakes(level, elapsed, shift) {\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            this.players[i].snake.handleNextMove(level, elapsed, shift, this.players);\n            this.players[i].snake.shiftParts(shift);\n        }\n    }\n    showMeta() {\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            this.players[i].snake.showName();\n        }\n        if (this.localPlayer) {\n            this.localPlayer.snake.showDirection();\n        }\n    }\n    hideMeta() {\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            this.players[i].snake.removeNameAndDirection();\n        }\n    }\n    addControls() {\n        if (this.localPlayer) {\n            this.localPlayer.snake.addControls();\n        }\n    }\n    getQuitName(prevPlayers) {\n        const prevNames = prevPlayers.getNames();\n        const newNames = this.getNames();\n        for (let i = 0, m = prevNames.length; i < m; i++) {\n            if (-1 === newNames.indexOf(prevNames[i])) {\n                return prevNames[i];\n            }\n        }\n        return null;\n    }\n    /**\n     * Assume last joined player is last in this.players.\n     */\n    getJoinName() {\n        if (this.getTotal()) {\n            return this.players[this.players.length - 1].name;\n        }\n        return null;\n    }\n    localPlayerIsHost() {\n        return Boolean(this.localPlayer &&\n            _state_state__WEBPACK_IMPORTED_MODULE_2__.State.player &&\n            this.localPlayer === _state_state__WEBPACK_IMPORTED_MODULE_2__.State.player &&\n            0 === this.players.indexOf(_state_state__WEBPACK_IMPORTED_MODULE_2__.State.player));\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/clientPlayerRegistry.ts?");

/***/ }),

/***/ "./client/room/clientRoom.ts":
/*!***********************************!*\
  !*** ./client/room/clientRoom.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientRoom\": () => (/* binding */ ClientRoom)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _clientPlayerRegistry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./clientPlayerRegistry */ \"./client/room/clientPlayerRegistry.ts\");\n/* harmony import */ var _clientRoundSet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./clientRoundSet */ \"./client/room/clientRoundSet.ts\");\n/* harmony import */ var _messageBox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./messageBox */ \"./client/room/messageBox.ts\");\n/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./options */ \"./client/room/options.ts\");\n/* harmony import */ var _scoreboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scoreboard */ \"./client/room/scoreboard.ts\");\n/**\n * @constructor\n */\n\n\n\n\n\n\n\n\n\n\nclass ClientRoom {\n    constructor() {\n        this.key = \"\";\n        this.players = new _clientPlayerRegistry__WEBPACK_IMPORTED_MODULE_5__.ClientPlayerRegistry();\n        this.options = new _options__WEBPACK_IMPORTED_MODULE_8__.ClientOptions();\n        this.roundSet = new _clientRoundSet__WEBPACK_IMPORTED_MODULE_6__.ClientRoundSet(this.players, this.options);\n        this.messageBox = null;\n        this.scoreboard = null;\n        this.bindEvents();\n    }\n    destruct() {\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_4__.urlHash)();\n        this.unbindEvents();\n        this.players.destruct();\n        this.options.destruct();\n        this.roundSet.destruct();\n        this.messageBox.destruct();\n        this.scoreboard.destruct();\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM, this.setRoom.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_OPTIONS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM, this.updateOptions.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM, this.updatePlayers.bind(this));\n        // TODO: Move to a new notifier class\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SNAKE_CRASH, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM, this.ncNotifySnakesCrashed.bind(this));\n        //State.events.on(NC_XSS, NS_ROOM, this._requestXss.bind(this));\n        //State.events.on(NC_XSS, NS_ROOM, this._evalXss.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM);\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_OPTIONS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM);\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROOM);\n    }\n    setupComponents() {\n        this.roundSet.setupRound();\n        this.scoreboard = new _scoreboard__WEBPACK_IMPORTED_MODULE_9__.Scoreboard(this.players);\n        this.messageBox = new _messageBox__WEBPACK_IMPORTED_MODULE_7__.MessageBox(this.players);\n    }\n    setRoom(serializedRoom) {\n        this.key = serializedRoom[0];\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_4__.urlHash)(_const__WEBPACK_IMPORTED_MODULE_1__.HASH_ROOM, this.key);\n    }\n    updateOptions(serializedOptions) {\n        this.options.deserialize(serializedOptions);\n    }\n    updatePlayers(serializedPlayers) {\n        if (this.roundSet.round && this.roundSet.round.isMidgame()) {\n            this.players.deserialize(serializedPlayers);\n        }\n        else {\n            this.players.reconstruct(serializedPlayers);\n        }\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.trigger(_const__WEBPACK_IMPORTED_MODULE_1__.EV_PLAYERS_UPDATED, this.players);\n    }\n    ncNotifySnakesCrashed(serializedCollisions) {\n        let notification = \"\";\n        const names = this.players.getNames();\n        for (let i = 0, m = serializedCollisions.length; i < m; i++) {\n            notification += names[serializedCollisions[i][0]];\n            if (i + 1 === m) {\n                notification += _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_SNAKE_CRASHED;\n            }\n            else if (i + 2 === m) {\n                notification += _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_SPACE_AND_SPACE;\n            }\n            else {\n                notification += _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_COMMA_SPACE;\n            }\n            if (1 === i % 2 || m === i + 1) {\n                // Line end.\n                if (i + 1 < m) {\n                    // Continuing.\n                    notification += _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_ELLIPSIS;\n                }\n                this.messageBox.addNotification(notification);\n                notification = \"\";\n            }\n        }\n        this.messageBox.ui.debounceUpdate();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/clientRoom.ts?");

/***/ }),

/***/ "./client/room/clientRound.ts":
/*!************************************!*\
  !*** ./client/room/clientRound.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientRound\": () => (/* binding */ ClientRound)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_levels_debug_blank__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/levels/debug/blank */ \"./shared/levels/debug/blank.ts\");\n/* harmony import */ var _shared_levelset_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/levelset/config */ \"./shared/levelset/config.ts\");\n/* harmony import */ var _shared_room_round__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared/room/round */ \"./shared/room/round.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _game_clientGame__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../game/clientGame */ \"./client/game/clientGame.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_preGame__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ui/preGame */ \"./client/ui/preGame.ts\");\n/* harmony import */ var _ui_switchRound__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../ui/switchRound */ \"./client/ui/switchRound.ts\");\n\n\n\n\n\n\n\n\n\nclass ClientRound extends _shared_room_round__WEBPACK_IMPORTED_MODULE_3__.Round {\n    constructor(players, options) {\n        super(players, options);\n        this.players = players;\n        this.options = options;\n        this.level = new _shared_levels_debug_blank__WEBPACK_IMPORTED_MODULE_1__.BlankLevel(new _shared_levelset_config__WEBPACK_IMPORTED_MODULE_2__.Config());\n        this.game = new _game_clientGame__WEBPACK_IMPORTED_MODULE_5__.ClientGame(this.level, this.players);\n        this.preGameUI = new _ui_preGame__WEBPACK_IMPORTED_MODULE_7__.PreGameUI(players, options);\n        this.wrapupGameUI = null;\n        this.bindEvents();\n    }\n    destruct() {\n        this.unbindEvents();\n        this.game.destruct();\n        this.game = null;\n        if (this.preGameUI) {\n            this.preGameUI.destruct();\n            this.preGameUI = null;\n        }\n        if (this.wrapupGameUI) {\n            this.wrapupGameUI.destruct();\n            this.wrapupGameUI = null;\n        }\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_4__.EV_PLAYERS_UPDATED, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND, this.updatePlayers.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND, this.updateRound.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_COUNTDOWN, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND, this.updateCountdown.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_START, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND, this.startGame.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_WRAPUP, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND, this.wrapupGame.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_4__.EV_PLAYERS_UPDATED, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND);\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND);\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_COUNTDOWN, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND);\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_START, _const__WEBPACK_IMPORTED_MODULE_4__.NS_ROUND);\n    }\n    updatePlayers() {\n        this.game.updatePlayers(this.players);\n        this.preGameUI.updateUI();\n    }\n    updateRound(serializedRound) {\n        this.deserialize(serializedRound);\n        this.level = this.getLevel(this.levelsetIndex, this.levelIndex);\n        this.game.updateLevel(this.level);\n    }\n    updateCountdown(serializedStarted) {\n        this.preGameUI.toggleCountdown(Boolean(serializedStarted[0]));\n        this.preGameUI.updateUI();\n    }\n    startGame() {\n        this.unbindEvents();\n        this.preGameUI.destruct();\n        this.game.start();\n    }\n    wrapupGame(winnerIndex) {\n        this.wrapupGameUI = new _ui_switchRound__WEBPACK_IMPORTED_MODULE_8__.WrapupGame(this.players, this.players.players[winnerIndex] || null);\n    }\n    isMidgame() {\n        return this.game.started;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/clientRound.ts?");

/***/ }),

/***/ "./client/room/clientRoundSet.ts":
/*!***************************************!*\
  !*** ./client/room/clientRoundSet.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientRoundSet\": () => (/* binding */ ClientRoundSet)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _clientRound__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./clientRound */ \"./client/room/clientRound.ts\");\n\n\n\n\nclass ClientRoundSet {\n    constructor(players, options) {\n        this.players = players;\n        this.options = options;\n        this.players = players;\n        this.options = options;\n        this.round = null;\n        this.bindEvents();\n    }\n    destruct() {\n        this.players = null;\n        this.options = null;\n        this.round.destruct();\n        this.round = null;\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROUND_SET, this.updateRound.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROUND_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_ROUND_SET);\n    }\n    setupRound() {\n        this.round = new _clientRound__WEBPACK_IMPORTED_MODULE_3__.ClientRound(this.players, this.options);\n    }\n    updateRound(serializedRound) {\n        if (this.round.isMidgame()) {\n            this.round.destruct();\n            this.round = new _clientRound__WEBPACK_IMPORTED_MODULE_3__.ClientRound(this.players, this.options);\n            this.round.updateRound(serializedRound);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/clientRoundSet.ts?");

/***/ }),

/***/ "./client/room/clientSocketPlayer.ts":
/*!*******************************************!*\
  !*** ./client/room/clientSocketPlayer.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientSocketPlayer\": () => (/* binding */ ClientSocketPlayer)\n/* harmony export */ });\n/* harmony import */ var _shared_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/config */ \"./shared/config.ts\");\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _netcode_heartbeat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../netcode/heartbeat */ \"./client/netcode/heartbeat.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _clientPlayer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./clientPlayer */ \"./client/room/clientPlayer.ts\");\n\n\n\n\n\n\n\n\nclass ClientSocketPlayer extends _clientPlayer__WEBPACK_IMPORTED_MODULE_7__.ClientPlayer {\n    constructor(onopenCallback) {\n        super(\"\");\n        this.onopenCallback = onopenCallback;\n        this.local = true;\n        this.room = null;\n        this.connection = new WebSocket(`ws://${_shared_config__WEBPACK_IMPORTED_MODULE_0__.SERVER_HOST}:${_shared_config__WEBPACK_IMPORTED_MODULE_0__.SERVER_PORT}${_shared_config__WEBPACK_IMPORTED_MODULE_0__.SERVER_PATH}`);\n        this.connection.onopen = this.onopen.bind(this);\n        this.connection.onclose = this.onclose.bind(this);\n        this.connection.onerror = this.onclose.bind(this);\n        this.connection.onmessage = this.onmessage.bind(this);\n    }\n    destruct() {\n        this.connected = false;\n        if (this.heartbeat) {\n            this.heartbeat.destruct();\n            this.heartbeat = null;\n        }\n        this.connection.onopen = null;\n        this.connection.onclose = null;\n        this.connection.onerror = null;\n        this.connection.onmessage = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_1__.NC_PING, _const__WEBPACK_IMPORTED_MODULE_2__.NS_SOCKET);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_1__.NC_PONG, _const__WEBPACK_IMPORTED_MODULE_2__.NS_SOCKET);\n        // Close explicitly when CONNECTING or OPEN.\n        if (this.connection.readyState <= 1) {\n            this.connection.close();\n        }\n    }\n    onopen() {\n        this.connected = true;\n        this.onopenCallback();\n        this.heartbeat = new _netcode_heartbeat__WEBPACK_IMPORTED_MODULE_4__.ClientHeartbeat(this);\n    }\n    onclose() {\n        if (this.connected) {\n            (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_6__.error)(_copy_copy__WEBPACK_IMPORTED_MODULE_3__.COPY_SOCKET_CONNECTION_LOST);\n        }\n        else {\n            (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_6__.error)(_copy_copy__WEBPACK_IMPORTED_MODULE_3__.COPY_SOCKET_CANNOT_CONNECT);\n        }\n        this.destruct();\n    }\n    timeout() {\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_6__.error)(_copy_copy__WEBPACK_IMPORTED_MODULE_3__.COPY_SOCKET_SERVER_AWAY);\n        this.destruct();\n    }\n    /**\n     * Send messages as [event, eventdata1, eventdata2]\n     */\n    emit(event, data) {\n        let emit;\n        if (data) {\n            emit = data;\n            emit.unshift(event);\n        }\n        else {\n            emit = [event];\n        }\n        console.log(\"OUT\", emit);\n        this.connection.send(JSON.stringify(emit));\n    }\n    onmessage(ev) {\n        const data = JSON.parse(ev.data);\n        console.log(\"IN \", data);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.trigger(data[0], data.slice(1));\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/clientSocketPlayer.ts?");

/***/ }),

/***/ "./client/room/message.ts":
/*!********************************!*\
  !*** ./client/room/message.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Message\": () => (/* binding */ Message)\n/* harmony export */ });\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/**\n * @param {string|null|undefined=} author\n * @param {string=} body\n * @constructor\n */\n\nclass Message {\n    constructor(author, body) {\n        this.author = author;\n        this.body = body;\n        this.author = author;\n        this.body = body;\n        this.notificationPrefix = \"#\";\n    }\n    getFormatted() {\n        if (this.author === null) {\n            return this.notificationPrefix + this.body;\n        }\n        else {\n            return this.author + \": \" + this.body;\n        }\n    }\n    getOffset() {\n        return this.author === null ? 0 : (0,_ui_font__WEBPACK_IMPORTED_MODULE_0__.fontWidth)(this.notificationPrefix);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/message.ts?");

/***/ }),

/***/ "./client/room/messageBox.ts":
/*!***********************************!*\
  !*** ./client/room/messageBox.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MessageBox\": () => (/* binding */ MessageBox)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_messageBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/messageBox */ \"./client/ui/messageBox.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _clientPlayerRegistry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./clientPlayerRegistry */ \"./client/room/clientPlayerRegistry.ts\");\n/* harmony import */ var _message__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./message */ \"./client/room/message.ts\");\n\n\n\n\n\n\n\n\nclass MessageBox {\n    constructor(players) {\n        this.players = players;\n        this.previousPlayers = null;\n        this.messages = [new _message__WEBPACK_IMPORTED_MODULE_7__.Message(null, _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_CHAT_INSTRUCT)];\n        this.ui = new _ui_messageBox__WEBPACK_IMPORTED_MODULE_4__.MessageBoxUI(this.messages, _state_state__WEBPACK_IMPORTED_MODULE_3__.State.player);\n        this.ui.sendMessageFn = this.sendMessage.bind(this);\n        this.playerChangeNotified = false;\n        this.bindEvents();\n    }\n    destruct() {\n        this.messages.length = 0;\n        this.previousPlayers = null;\n        this.ui.destruct();\n        this.unbindEvents();\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_CHAT_MESSAGE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_MSGBOX, this.addMessage.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_1__.EV_PLAYERS_UPDATED, _const__WEBPACK_IMPORTED_MODULE_1__.NS_MSGBOX, this.updatePlayers.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_CHAT_MESSAGE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_MSGBOX);\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.EV_PLAYERS_UPDATED, _const__WEBPACK_IMPORTED_MODULE_1__.NS_MSGBOX);\n    }\n    addMessage(serializedMessage) {\n        const name = String(this.players.players[serializedMessage[0]].name);\n        this.messages.push(new _message__WEBPACK_IMPORTED_MODULE_7__.Message(name, serializedMessage[1]));\n        this.ui.debounceUpdate();\n    }\n    addNotification(notification) {\n        this.messages.push(new _message__WEBPACK_IMPORTED_MODULE_7__.Message(null, notification));\n    }\n    updatePlayers() {\n        // TODO: recursion?\n        const disconnectedPlayer = this.players.players.find((p) => !p.connected);\n        if (disconnectedPlayer) {\n            this.notifyMidgameDisconnect(disconnectedPlayer);\n            this.playerChangeNotified = true;\n        }\n        else {\n            // Pre-game player updates.\n            if (this.previousPlayers && !this.playerChangeNotified) {\n                this.notifyPlayersChange();\n            }\n            this.previousPlayers = new _clientPlayerRegistry__WEBPACK_IMPORTED_MODULE_6__.ClientPlayerRegistry();\n            this.previousPlayers.clone(this.players);\n            this.playerChangeNotified = false;\n        }\n    }\n    notifyMidgameDisconnect(player) {\n        const message = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_PLAYER_QUIT, player.name);\n        this.notifyPlayersChangeUI(message);\n    }\n    notifyPlayersChangeUI(message) {\n        this.messages.push(new _message__WEBPACK_IMPORTED_MODULE_7__.Message(null, message));\n        this.ui.debounceUpdate();\n    }\n    notifyPlayersChange() {\n        let message;\n        if (this.players.getTotal() > this.previousPlayers.getTotal()) {\n            message = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_PLAYER_JOINED, String(this.players.getJoinName()));\n        }\n        else if (this.players.getTotal() < this.previousPlayers.getTotal()) {\n            message = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_PLAYER_QUIT, String(this.players.getQuitName(this.previousPlayers)));\n        }\n        if (message) {\n            this.notifyPlayersChangeUI(message);\n        }\n    }\n    sendMessage(body) {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_CHAT_MESSAGE, [body]);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/messageBox.ts?");

/***/ }),

/***/ "./client/room/options.ts":
/*!********************************!*\
  !*** ./client/room/options.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientOptions\": () => (/* binding */ ClientOptions)\n/* harmony export */ });\n/* harmony import */ var _shared_room_roomOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/room/roomOptions */ \"./shared/room/roomOptions.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n\n\n\nclass ClientOptions extends _shared_room_roomOptions__WEBPACK_IMPORTED_MODULE_0__.RoomOptions {\n    constructor() {\n        super();\n        this.levelset = _state_state__WEBPACK_IMPORTED_MODULE_2__.State.levelsetRegistry.getRandomLevelsetIndex();\n    }\n    setOptionsFromForm(indexedOptions) {\n        this.isQuickGame = false;\n        this.maxPlayers = indexedOptions[_const__WEBPACK_IMPORTED_MODULE_1__.FIELD_MAX_PLAYERS];\n        this.levelset = indexedOptions[_const__WEBPACK_IMPORTED_MODULE_1__.FIELD_LEVEL_SET];\n        this.hasPowerups = indexedOptions[_const__WEBPACK_IMPORTED_MODULE_1__.FIELD_POWERUPS];\n        this.isPrivate = indexedOptions[_const__WEBPACK_IMPORTED_MODULE_1__.FIELD_PRIVATE];\n        this.isXSS = indexedOptions[_const__WEBPACK_IMPORTED_MODULE_1__.FIELD_XSS];\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/options.ts?");

/***/ }),

/***/ "./client/room/scoreboard.ts":
/*!***********************************!*\
  !*** ./client/room/scoreboard.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Scoreboard\": () => (/* binding */ Scoreboard)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_scoreboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/scoreboard */ \"./client/ui/scoreboard.ts\");\n\n\n\n\nclass Scoreboard {\n    constructor(players) {\n        this.players = players;\n        this.ui = new _ui_scoreboard__WEBPACK_IMPORTED_MODULE_3__.ScoreboardUI(players);\n        this.bindEvents();\n    }\n    destruct() {\n        this.players = null;\n        this.ui.destruct();\n        this.ui = null;\n        this.unbindEvents();\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_SCORE, this.ui.debounceUpdate.bind(this.ui));\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SCORE_UPDATE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_SCORE, this.updatePlayerScores.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_SCORE);\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_SCORE_UPDATE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_SCORE);\n    }\n    updatePlayerScores(scoreArray) {\n        this.players.setScores(scoreArray);\n        this.ui.debounceUpdate();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/room/scoreboard.ts?");

/***/ }),

/***/ "./client/stage/menuSnake.ts":
/*!***********************************!*\
  !*** ./client/stage/menuSnake.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MenuSnake\": () => (/* binding */ MenuSnake),\n/* harmony export */   \"NeuteredMenuSnake\": () => (/* binding */ NeuteredMenuSnake)\n/* harmony export */ });\n/* harmony import */ var _shared_levels_debug_blank__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/levels/debug/blank */ \"./shared/levels/debug/blank.ts\");\n/* harmony import */ var _shared_levelset_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/levelset/config */ \"./shared/levelset/config.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _game_clientSnake__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../game/clientSnake */ \"./client/game/clientSnake.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_transformClient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/transformClient */ \"./client/ui/transformClient.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n\n\n\n\n\n\n\nclass MenuSnake {\n    constructor() {\n        this.snake = null;\n        this.timeouts = [];\n        this.level = new _shared_levels_debug_blank__WEBPACK_IMPORTED_MODULE_0__.BlankLevel(new _shared_levelset_config__WEBPACK_IMPORTED_MODULE_1__.Config());\n        this.level.preload(this.construct.bind(this));\n    }\n    construct() {\n        const snake = new _game_clientSnake__WEBPACK_IMPORTED_MODULE_3__.ClientSnake(0, false, \"\", this.level);\n        snake.addControls();\n        snake.showDirection();\n        snake.removeNameAndDirection();\n        this.snake = snake;\n        this.timeouts.push(window.setTimeout(this.move.bind(this), 1500));\n    }\n    destruct() {\n        for (let i = 0, m = this.timeouts.length; i < m; i++) {\n            clearTimeout(this.timeouts[i]);\n        }\n        this.snake.destruct();\n        this.level.destruct();\n    }\n    move() {\n        const snake = this.snake;\n        snake.collision = null;\n        const nextpos = snake.getNextPosition();\n        if (this.isCrash(snake, nextpos)) {\n            snake.setCrashed();\n            (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_6__.instruct)(\"Have you seen my snake?\");\n            this.timeouts.push(window.setTimeout(snake.destruct.bind(snake), 2200));\n        }\n        else {\n            snake.elapsed = 1000; // Trigger move.\n            snake.move(snake.getNextPosition());\n            snake.updateShape();\n            this.timeouts.push(window.setTimeout(this.move.bind(this), 100));\n        }\n    }\n    isCrash(snake, nextpos) {\n        const snakeShape = snake.getShape();\n        let crash = false;\n        if (nextpos[0] < 0 || nextpos[1] < 0) {\n            return true;\n        }\n        else if (snakeShape) {\n            const pixels = (0,_ui_transformClient__WEBPACK_IMPORTED_MODULE_5__.zoom)(4, snakeShape.pixels, _const__WEBPACK_IMPORTED_MODULE_2__.GAME_LEFT, _const__WEBPACK_IMPORTED_MODULE_2__.GAME_TOP, false);\n            pixels.each(function (x, y) {\n                if (this.overlaysShape(snakeShape, x, y)) {\n                    crash = true;\n                }\n            }.bind(this));\n        }\n        return crash;\n    }\n    overlaysShape(snakeShape, x, y) {\n        for (const k in _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes) {\n            if (_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[k] !== snakeShape) {\n                if (_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[k] && _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[k].pixels.has(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\nclass NeuteredMenuSnake extends MenuSnake {\n    construct() {\n        this.snake = null;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage/menuSnake.ts?");

/***/ }),

/***/ "./client/stage/stageFlow.ts":
/*!***********************************!*\
  !*** ./client/stage/stageFlow.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StageFlow\": () => (/* binding */ StageFlow)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stages_main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stages/main */ \"./client/stages/main.ts\");\n/* harmony import */ var _stages_startGame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stages/startGame */ \"./client/stages/startGame.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/clientShapeGenerator */ \"./client/ui/clientShapeGenerator.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/**\n * StageFlow instantiation, stage switching\n * @param {Function=} Stage\n * @constructor\n */\n\n\n\n\n\n\n\n\nclass StageFlow {\n    constructor(stage = _stages_main__WEBPACK_IMPORTED_MODULE_2__.MainStage) {\n        this._FirstStage = stage;\n        this.GameStage = _stages_startGame__WEBPACK_IMPORTED_MODULE_3__.StartGameStage;\n        this.start();\n    }\n    destruct() {\n        this.stage.destruct();\n        if (_state_state__WEBPACK_IMPORTED_MODULE_4__.State.player) {\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.player.destruct();\n        }\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes = {};\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_FLOW);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.canvas.garbageCollect();\n    }\n    restart() {\n        this.destruct();\n        this.start();\n    }\n    start() {\n        this._history = [];\n        window.onhashchange = this._hashChange.bind(this);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_FLOW, this._handleKeys.bind(this));\n        Object.assign(_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes, (0,_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_5__.outerBorder)());\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.HEADER = (0,_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_5__.xssnakeHeader)();\n        this._setStage(new this._FirstStage(), false);\n    }\n    getData() {\n        const value = {};\n        for (let i = 0, m = this._history.length; i < m; i++) {\n            Object.assign(value, this._history[i].getData());\n        }\n        return value;\n    }\n    /**\n     * @param {Function} Stage\n     * @param {Object=} options\n     */\n    switchStage(Stage, options = {}) {\n        let switchToStage;\n        if (Stage && !options.back) {\n            switchToStage = new Stage();\n        }\n        else {\n            switchToStage = this._history[this._history.length - 2];\n        }\n        // Unload old stage\n        this.stage.destruct();\n        // Remove everything\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.stage = null;\n        // Replace by levelanim\n        this._switchStageAnimate(this.stage.getShape(), switchToStage.getShape(), options.back, function () {\n            this._setStage(switchToStage, options.back);\n        }.bind(this));\n    }\n    previousStage() {\n        if (this._history.length > 1) {\n            this.switchStage(null, { back: true });\n        }\n    }\n    refreshShapes() {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.stage = this.stage.getShape();\n    }\n    _hashChange() {\n        if ((0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.urlHash)(_const__WEBPACK_IMPORTED_MODULE_1__.HASH_ROOM).length === _shared_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_KEY_LENGTH && 1 === this._history.length) {\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.flow.restart();\n        }\n    }\n    _handleKeys(ev) {\n        // Firefox disconnects websocket on Esc. Disable that.\n        // Also prevent the tab key focusing things outside canvas.\n        if (ev.keyCode === _const__WEBPACK_IMPORTED_MODULE_1__.KEY_ESCAPE || ev.keyCode === _const__WEBPACK_IMPORTED_MODULE_1__.KEY_TAB) {\n            ev.preventDefault();\n        }\n        // Ignore key when user is in input field. Start screen might\n        // contain a dialog, so do not use State.keysBlocked here.\n        if (!_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.INPUT_CARET) {\n            // Mute/Unmute\n            if (ev.keyCode === _const__WEBPACK_IMPORTED_MODULE_1__.KEY_MUTE) {\n                const mute = !(0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.storage)(_const__WEBPACK_IMPORTED_MODULE_1__.STORAGE_MUTE);\n                (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.storage)(_const__WEBPACK_IMPORTED_MODULE_1__.STORAGE_MUTE, mute);\n                (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.instruct)(\"Sounds \" + (mute ? \"muted\" : \"unmuted\"), 1000);\n                _state_state__WEBPACK_IMPORTED_MODULE_4__.State.audio.play(\"menu_alt\");\n            }\n        }\n    }\n    /**\n     * @param {Shape} oldShape\n     * @param {Shape} newShape\n     * @param {boolean} back\n     * @param {function()} callback\n     * @private\n     */\n    _switchStageAnimate(oldShape, newShape, back, callback) {\n        let oldStageAnim;\n        let newStageAnim;\n        const width = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH - _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT;\n        if (back) {\n            oldStageAnim = { to: [width, 0] };\n            newStageAnim = { from: [-width, 0] };\n        }\n        else {\n            oldStageAnim = { to: [-width, 0] };\n            newStageAnim = { from: [width, 0] };\n        }\n        newStageAnim.doneCallback = callback;\n        if (back) {\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.audio.play(\"swoosh_rev\");\n        }\n        else {\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.audio.play(\"swoosh\");\n        }\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.oldstage = (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__.animate)(oldShape, oldStageAnim);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.newstage = (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__.animate)(newShape, newStageAnim);\n    }\n    // TODO: StageInterface\n    _setStage(stage, back) {\n        // Remove animated stages\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.oldstage = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.newstage = null;\n        this.stage = stage;\n        this.stage.construct();\n        this.refreshShapes();\n        if (back) {\n            this._history.pop();\n            (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.urlHash)();\n        }\n        else {\n            this._history.push(stage);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage/stageFlow.ts?");

/***/ }),

/***/ "./client/stage_base/formStage.ts":
/*!****************************************!*\
  !*** ./client/stage_base/formStage.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FormStage\": () => (/* binding */ FormStage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n\n\nclass FormStage {\n    constructor() {\n        /** @type {Form} */\n        this.form = null;\n    }\n    getShape() {\n        return this.form.getShape();\n    }\n    getData() {\n        return {};\n    }\n    /**\n     * @param {Function} data\n     * @return {Function}\n     * @private\n     */\n    getNextStage(data) {\n        return data;\n    }\n    construct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_STAGES, this._handleKeys.bind(this));\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.stage = null;\n    }\n    _handleKeys(ev) {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_1__.State.keysBlocked) {\n            return;\n        }\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_BACKSPACE:\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_ESCAPE:\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.previousStage();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_ENTER:\n                const next = this.getNextStage(this.form.getData());\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.switchStage(next);\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_UP:\n                this.form.selectField(-1);\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.audio.play(\"menu\");\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.refreshShapes();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_DOWN:\n                this.form.selectField(1);\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.audio.play(\"menu\");\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.refreshShapes();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_LEFT:\n                this.form.selectOption(-1);\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.audio.play(\"menu_alt\");\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.refreshShapes();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_RIGHT:\n                this.form.selectOption(1);\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.audio.play(\"menu_alt\");\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.refreshShapes();\n                break;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_base/formStage.ts?");

/***/ }),

/***/ "./client/stage_base/gameStage.ts":
/*!****************************************!*\
  !*** ./client/stage_base/gameStage.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Game\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _room_clientRoom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../room/clientRoom */ \"./client/room/clientRoom.ts\");\n/* harmony import */ var _room_clientSocketPlayer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../room/clientSocketPlayer */ \"./client/room/clientSocketPlayer.ts\");\n/* harmony import */ var _room_options__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../room/options */ \"./client/room/options.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/**\n * Game Stage\n * @implements {StageInterface}\n * @constructor\n */\n\n\n\n\n\n\n\n\n\n\n\n\nclass Game {\n    constructor() { }\n    getShape() {\n        return new _shared_shape__WEBPACK_IMPORTED_MODULE_1__.Shape();\n    }\n    getData() {\n        return {};\n    }\n    construct() {\n        this.connectServer();\n    }\n    destruct() {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_8__.State.player) {\n            if (_state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.room) {\n                _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.room.destruct();\n            }\n            _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.destruct();\n        }\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_3__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.shapes.CONNECTING = null;\n    }\n    getSerializedGameOptions() {\n        const data = _state_state__WEBPACK_IMPORTED_MODULE_8__.State.flow.getData();\n        const options = new _room_options__WEBPACK_IMPORTED_MODULE_7__.ClientOptions();\n        options.setOptionsFromForm(data.multiplayer);\n        return options.serialize();\n    }\n    getPlayerName() {\n        let name = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_11__.storage)(_const__WEBPACK_IMPORTED_MODULE_3__.STORAGE_NAME);\n        if (!name) {\n            name = (0,_shared_util__WEBPACK_IMPORTED_MODULE_2__.getRandomName)();\n            (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_11__.storage)(name, _const__WEBPACK_IMPORTED_MODULE_3__.STORAGE_NAME);\n        }\n        return name;\n    }\n    getEmitData() {\n        return this.getSerializedGameOptions();\n    }\n    connectServer() {\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.shapes.CONNECTING = this.getConnectingShape();\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player = new _room_clientSocketPlayer__WEBPACK_IMPORTED_MODULE_6__.ClientSocketPlayer(this.connectRoom.bind(this));\n    }\n    connectRoom() {\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.room = new _room_clientRoom__WEBPACK_IMPORTED_MODULE_5__.ClientRoom();\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.room.setupComponents();\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYER_NAME, [this.getPlayerName()]);\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_JOIN_MATCHING, this.getEmitData());\n        this.destructStageLeftovers();\n    }\n    getConnectingShape() {\n        const shape = (0,_ui_font__WEBPACK_IMPORTED_MODULE_9__.font)(_copy_copy__WEBPACK_IMPORTED_MODULE_4__.COPY_CONNECTING);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_10__.center)(shape, _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH, _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 20);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_10__.lifetime)(shape, 2000);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_10__.flash)(shape);\n        return shape;\n    }\n    destructStageLeftovers() {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_8__.State.menuSnake) {\n            _state_state__WEBPACK_IMPORTED_MODULE_8__.State.menuSnake.destruct();\n        }\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.shapes.CONNECTING = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_8__.State.shapes.HEADER = null;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_base/gameStage.ts?");

/***/ }),

/***/ "./client/stage_base/inputStage.ts":
/*!*****************************************!*\
  !*** ./client/stage_base/inputStage.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"InputStage\": () => (/* binding */ InputStage)\n/* harmony export */ });\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stage_class_helper_inputField__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stage_class_helper/inputField */ \"./client/stage_class_helper/inputField.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _ui_transformClient__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/transformClient */ \"./client/ui/transformClient.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n\n\n\n\n\n\n\n\nclass InputStage {\n    constructor() {\n        this.fontOptions = { wrap: _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT + _const__WEBPACK_IMPORTED_MODULE_1__.MENU_WIDTH - 25 };\n        this._inputTop = _const__WEBPACK_IMPORTED_MODULE_1__.MENU_TOP + 17;\n        this.name = \"\";\n        this.header = \"\";\n        this.label = \"\";\n        this.next = InputStage; // TODO: StageInterface\n        this.minlength = 0;\n        this.maxChars = 0;\n        this.maxwidth = 0;\n        this.displayWidth = 0;\n        this.value = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.storage)(_const__WEBPACK_IMPORTED_MODULE_1__.STORAGE_NAME) || \"\";\n        this._shape = this._getShape();\n    }\n    getShape() {\n        return this._shape;\n    }\n    getData() {\n        return {};\n    }\n    getValue() {\n        return this.value;\n    }\n    construct() {\n        this.input = this._setupInputField();\n        this._shape = this._getShapeExcludeValue();\n        console.log(this);\n        this._bindEvents();\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.shapes.message = null;\n        this._shape = this._getShape();\n        this.input.destruct();\n        if (this.name) {\n            (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.storage)(this.name, this.value);\n        }\n    }\n    inputSubmit(error, value, top) {\n        if (!error && value && top) {\n            _state_state__WEBPACK_IMPORTED_MODULE_3__.State.flow.switchStage(this.next);\n            _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_INPUT);\n        }\n        else {\n            _state_state__WEBPACK_IMPORTED_MODULE_3__.State.shapes.message = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.font)(error, _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT, top);\n            (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__.lifetime)(_state_state__WEBPACK_IMPORTED_MODULE_3__.State.shapes.message, 0, 500);\n        }\n    }\n    _setupInputField() {\n        const input = new _stage_class_helper_inputField__WEBPACK_IMPORTED_MODULE_2__.InputField(_const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT, this._inputTop, this.label, this.fontOptions);\n        input.maxValWidth = this.maxwidth || input.maxValWidth;\n        input.displayWidth = this.displayWidth || input.displayWidth;\n        input.callback = function (value) {\n            console.log(value, this, \"UPD\");\n            this.value = value;\n        }.bind(this);\n        input.setValue(this.value);\n        return input;\n    }\n    _bindEvents() {\n        console.log(this);\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this._handleKeys.bind(this));\n    }\n    /**\n     * @private\n     */\n    _handleKeys(ev) {\n        console.log(this);\n        let value;\n        let top;\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_1__.KEY_ESCAPE:\n                _state_state__WEBPACK_IMPORTED_MODULE_3__.State.flow.previousStage();\n                ev.preventDefault();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_1__.KEY_ENTER:\n                value = this.value.trim();\n                top = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontHeight)(this.label, _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT, this._inputTop, this.fontOptions);\n                this.inputSubmit(this._getInputError(value), value, top);\n        }\n    }\n    _getInputError(val) {\n        if (val.length < this.minlength) {\n            return \"Too short!!\";\n        }\n        else if (this.maxChars && val.length > this.maxChars) {\n            return \"Too long!!\";\n        }\n        return \"\";\n    }\n    _getShape() {\n        const shape = this._getShapeExcludeValue();\n        shape.add(this._getDataShape().pixels);\n        return shape;\n    }\n    _getShapeExcludeValue() {\n        let pixels = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(this.header);\n        pixels = (0,_ui_transformClient__WEBPACK_IMPORTED_MODULE_6__.zoom)(2, pixels, _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT, _const__WEBPACK_IMPORTED_MODULE_1__.MENU_TOP);\n        return new _shared_shape__WEBPACK_IMPORTED_MODULE_0__.Shape(pixels);\n    }\n    _getDataShape() {\n        const value = this.label + this.value;\n        return new _shared_shape__WEBPACK_IMPORTED_MODULE_0__.Shape((0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(value, _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT, this._inputTop, this.fontOptions));\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_base/inputStage.ts?");

/***/ }),

/***/ "./client/stage_base/screenStage.ts":
/*!******************************************!*\
  !*** ./client/stage_base/screenStage.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ScreenStage\": () => (/* binding */ ScreenStage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/**\n * BaseScreenStage\n * Stage with static content\n * @implements {StageInterface}\n * @constructor\n */\n\n\nclass ScreenStage {\n    constructor() {\n        /** @type {Shape} */\n        this.screen = null;\n    }\n    getShape() {\n        return this.screen;\n    }\n    getData() {\n        return {};\n    }\n    construct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_STAGES, this._handleKeys);\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.stage = null;\n    }\n    _handleKeys(ev) {\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_BACKSPACE:\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_ESCAPE:\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_ENTER:\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.previousStage();\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_base/screenStage.ts?");

/***/ }),

/***/ "./client/stage_base/selectStage.ts":
/*!******************************************!*\
  !*** ./client/stage_base/selectStage.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SelectStage\": () => (/* binding */ SelectStage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/**\n * SelectStage\n * Stage with a vertical select menu\n * @implements {StageInterface}\n * @constructor\n */\n\n\nclass SelectStage {\n    constructor() {\n        this.menu = null;\n    }\n    getShape() {\n        return this.menu.getShape();\n    }\n    getData() {\n        return {};\n    }\n    construct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_STAGES, this.handleKeys.bind(this));\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_0__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_0__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.stage = null;\n    }\n    handleKeys(ev) {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_1__.State.keysBlocked) {\n            return;\n        }\n        const next = this.menu.getNextStage();\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_BACKSPACE:\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_ESCAPE:\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.previousStage();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_ENTER:\n                if (next) {\n                    _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.switchStage(next);\n                }\n                else {\n                    _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.previousStage();\n                }\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_UP:\n                this.menu.prev();\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.audio.play(\"menu\");\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.refreshShapes();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_0__.KEY_DOWN:\n                this.menu.next();\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.audio.play(\"menu\");\n                _state_state__WEBPACK_IMPORTED_MODULE_1__.State.flow.refreshShapes();\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_base/selectStage.ts?");

/***/ }),

/***/ "./client/stage_class_helper/form.ts":
/*!*******************************************!*\
  !*** ./client/stage_class_helper/form.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Form\": () => (/* binding */ Form)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_transformClient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/transformClient */ \"./client/ui/transformClient.ts\");\n\n\n\n\n\n\nclass Form {\n    constructor(header, footer = \"\") {\n        this.header = header;\n        this.footer = footer;\n        this.header = header.toUpperCase();\n        this.selectedField = 0;\n        this.selectedOption = [];\n        this.fields = [];\n        this.maxwidth = 0;\n    }\n    /**\n     * @param {number} id\n     * @param {string} label\n     * @param {Array.<Array>=} options\n     */\n    addField(id, label, options) {\n        this.fields.push({\n            id: id,\n            label: label.toUpperCase(),\n            options: options,\n        });\n        this.selectedOption.push(0);\n        for (let i = 0, m = options.length; i < m; i++) {\n            this.maxwidth = Math.max(this.maxwidth, (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontWidth)(options[i][1].toUpperCase()));\n        }\n    }\n    /**\n     * @param {number} delta\n     */\n    selectField(delta) {\n        this.selectedField = (0,_shared_util__WEBPACK_IMPORTED_MODULE_2__.ensureIndexWithinBounds)(this.selectedField + delta, this.fields);\n    }\n    /**\n     * @param {number} delta\n     */\n    selectOption(delta) {\n        const focusField = this.fields[this.selectedField];\n        if (focusField) {\n            this.selectedOption[this.selectedField] = (0,_shared_util__WEBPACK_IMPORTED_MODULE_2__.ensureIndexWithinBounds)(this.selectedOption[this.selectedField] + delta, focusField.options);\n        }\n    }\n    /**\n     * @return {Shape}\n     */\n    getShape() {\n        let x;\n        let optionX;\n        let y;\n        let shape;\n        x = _const__WEBPACK_IMPORTED_MODULE_3__.MENU_LEFT;\n        y = _const__WEBPACK_IMPORTED_MODULE_3__.MENU_TOP;\n        optionX = _const__WEBPACK_IMPORTED_MODULE_3__.MENU_LEFT + 2 + _const__WEBPACK_IMPORTED_MODULE_3__.MENU_WIDTH - this.maxwidth - (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontWidth)(\" \" + _const__WEBPACK_IMPORTED_MODULE_3__.UC_TR_LEFT);\n        shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_1__.Shape();\n        shape.add(this._getHeaderPixels(x, y));\n        shape.add(this._getFooterPixels(x));\n        y += _const__WEBPACK_IMPORTED_MODULE_3__.MENU_TITLE_HEIGHT;\n        // Draw options\n        for (let i = 0, m = this.fields.length; i < m; i++) {\n            let option;\n            let bbox;\n            const active = this.selectedField === i;\n            option = this._getOptionsShape(i, x, optionX, y, active);\n            if (active) {\n                bbox = option.bbox();\n                bbox.x0 -= 1;\n                bbox.x1 += 1;\n                bbox.y0 = y - 1;\n                bbox.y1 = y + _ui_font__WEBPACK_IMPORTED_MODULE_4__.LINE_HEIGHT;\n                option.invert();\n            }\n            shape.add(option.pixels);\n            y += _ui_font__WEBPACK_IMPORTED_MODULE_4__.LINE_HEIGHT_MENU;\n        }\n        return shape;\n    }\n    getData() {\n        const values = [];\n        for (let i = 0, m = this.fields.length; i < m; i++) {\n            const field = this.fields[i];\n            const optionIndex = this.selectedOption[i];\n            values[field.id] = field.options[optionIndex][0];\n        }\n        return values;\n    }\n    /**\n     * @param {number} x\n     * @param {number} y\n     * @return {PixelCollection}\n     * @private\n     */\n    _getHeaderPixels(x, y) {\n        const header = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(this.header);\n        return (0,_ui_transformClient__WEBPACK_IMPORTED_MODULE_5__.zoom)(2, header, x, y);\n    }\n    /**\n     * @param {number} x\n     * @return {PixelCollection}\n     * @private\n     */\n    _getFooterPixels(x) {\n        const height = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontHeight)(this.footer);\n        return (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(this.footer, x, _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 3 - height);\n    }\n    /**\n     * @param {number} i\n     * @param {number} x\n     * @param {number} col2X\n     * @param {number} y\n     * @param {boolean} active\n     * @return {Shape}\n     * @private\n     */\n    _getOptionsShape(i, x, col2X, y, active) {\n        let label;\n        let shape;\n        let value;\n        let option;\n        let pixels;\n        const props = {};\n        label = this.fields[i].label;\n        shape = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.font)(label, x, y);\n        option = this.fields[i].options[this.selectedOption[i] || 0];\n        value = option[1].toUpperCase();\n        props.option = col2X + (this.maxwidth - (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontWidth)(value)) / 2;\n        props.option = Math.floor(props.option);\n        pixels = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(value, props.option, y);\n        shape.add(pixels);\n        props.left = col2X - (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontWidth)(_const__WEBPACK_IMPORTED_MODULE_3__.UC_TR_LEFT + \" \");\n        props.right = col2X + this.maxwidth + (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontWidth)(\" \");\n        shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(\"<\", props.left, y), (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontPixels)(\">\", props.right, y));\n        return shape;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_class_helper/form.ts?");

/***/ }),

/***/ "./client/stage_class_helper/inputField.ts":
/*!*************************************************!*\
  !*** ./client/stage_class_helper/inputField.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"InputField\": () => (/* binding */ InputField)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/shapeGenerator */ \"./shared/shapeGenerator.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/**\n * @param {number} x\n * @param {number} y\n * @param {string=} prefix\n * @param {Object=} fontOptions\n * @constructor\n */\n\n\n\n\n\n\n\nclass InputField {\n    constructor(x, y, prefix, fontOptions) {\n        this.x = x;\n        this.y = y;\n        this.prefix = prefix;\n        this.fontOptions = fontOptions;\n        this.callback = () => { };\n        this.maxValWidth = null;\n        this.displayWidth = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH - x - 8;\n        this.maxlength = 156;\n        this.input = this.addInputToDom();\n        this.input.focus();\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.keysBlocked = true;\n    }\n    destruct() {\n        if (this.input && this.input.parentNode) {\n            this.input.parentNode.removeChild(this.input);\n        }\n        this.unbindEvents();\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.INPUT_CARET = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.INPUT_VALUE = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.keysBlocked = false;\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYPRESS, _const__WEBPACK_IMPORTED_MODULE_3__.NS_INPUT);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_3__.NS_INPUT);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYUP, _const__WEBPACK_IMPORTED_MODULE_3__.NS_INPUT);\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYPRESS, _const__WEBPACK_IMPORTED_MODULE_3__.NS_INPUT, function () {\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.audio.play(\"menu_alt\");\n        });\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_3__.NS_INPUT, this.updateShapes.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_3__.DOM_EVENT_KEYUP, _const__WEBPACK_IMPORTED_MODULE_3__.NS_INPUT, this.updateShapes.bind(this));\n    }\n    /**\n     * @param {string} value\n     */\n    setValue(value) {\n        this.input.focus();\n        this.input.value = value;\n        this.input.setSelectionRange(value.length, value.length);\n        this.bindEvents();\n        this.updateShapes();\n    }\n    /**\n     * @return {string}\n     */\n    getValue() {\n        return this.input.value;\n    }\n    updateShapes() {\n        this.maxwidthCutOff();\n        this.callback(this.input.value);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.INPUT_CARET = this.getCaretShape();\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.INPUT_VALUE = this.getInputValueShape();\n    }\n    /**\n     * @return {Element}\n     */\n    addInputToDom() {\n        const input = document.createElement(\"input\");\n        input.setAttribute(\"maxlength\", String(this.maxlength));\n        input.focus();\n        document.body.appendChild(input);\n        return input;\n    }\n    getCaretShape() {\n        const segments = this.getSelectionSegments();\n        const untilCaretStr = segments[0] + segments[1];\n        const endPos = (0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontEndPos)(this.prefix + untilCaretStr, this.x, this.y, this.fontOptions);\n        const caret = [endPos[0] - 1, endPos[1]];\n        const caretShape = (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_2__.lineShape)(caret[0], caret[1] - 1, caret[0], caret[1] + 7);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__.flash)(caretShape, _const__WEBPACK_IMPORTED_MODULE_3__.FRAME * 20, _const__WEBPACK_IMPORTED_MODULE_3__.FRAME * 20);\n        return caretShape;\n    }\n    getInputValueShape() {\n        let endpos;\n        const values = this.getSelectionSegments();\n        const shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_1__.Shape();\n        shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontPixels)(this.prefix + values[0], this.x, this.y, this.fontOptions));\n        if (values[1]) {\n            // Selection\n            endpos = (0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontEndPos)(this.prefix + values[0], this.x, this.y, this.fontOptions);\n            shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontPixels)(values[1], endpos[0], endpos[1], { invert: true }));\n        }\n        endpos = (0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontEndPos)(this.prefix + values[0] + values[1], this.x, this.y, this.fontOptions);\n        shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontPixels)(values[2], endpos[0], endpos[1]));\n        return shape;\n    }\n    /**\n     * @return {Array.<string>}\n     * @private\n     */\n    getSelectionSegments() {\n        let input;\n        let value;\n        let start;\n        let end;\n        input = this.input;\n        value = input.value;\n        start = input.selectionStart;\n        end = input.selectionEnd;\n        // Handle situation where input value is wider than display width.\n        while ((0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontWidth)(value) > this.displayWidth) {\n            if (start === 0) {\n                value = value.substring(0, value.length - 2);\n            }\n            else {\n                value = value.substring(1, value.length);\n                start--;\n                end--;\n            }\n        }\n        return [value.substring(0, start), value.substring(start, end), value.substring(end)];\n    }\n    maxwidthCutOff() {\n        if (null !== this.maxValWidth) {\n            while ((0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.fontWidth)(this.input.value) > this.maxValWidth) {\n                this.input.value = this.input.value.slice(0, -1);\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_class_helper/inputField.ts?");

/***/ }),

/***/ "./client/stage_class_helper/selectMenu.ts":
/*!*************************************************!*\
  !*** ./client/stage_class_helper/selectMenu.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SelectMenu\": () => (/* binding */ SelectMenu)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_transformClient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/transformClient */ \"./client/ui/transformClient.ts\");\n\n\n\n\n\nclass SelectMenu {\n    constructor(header, footer = \"\") {\n        this.header = header;\n        this.footer = footer;\n        this.header = header || \"\";\n        this.footer = footer || \"\";\n        this._selected = 0;\n        this._options = [];\n    }\n    addOption(value, next, title, description = \"\", callback = () => { }) {\n        this._options.push({\n            value: value,\n            next: next,\n            title: title.toUpperCase(),\n            description: description,\n            callback: callback,\n        });\n    }\n    /**\n     * @return {number}\n     */\n    prev() {\n        return this.select(this._selected - 1);\n    }\n    /**\n     * @return {number}\n     */\n    next() {\n        return this.select(this._selected + 1);\n    }\n    /**\n     * @param {number} select\n     * @return {number}\n     */\n    select(select) {\n        const max = this._options.length - 1;\n        if (typeof select !== \"number\") {\n            select = 0;\n        }\n        if (select < 0) {\n            select = max;\n        }\n        else if (select > max) {\n            select = 0;\n        }\n        this._selected = select;\n        this.getSelectedOption().callback(this._selected);\n        return select;\n    }\n    /**\n     * @return {Object}\n     */\n    getSelectedOption() {\n        return this._options[this._selected];\n    }\n    /**\n     * @return {Function}\n     */\n    getNextStage() {\n        return this.getSelectedOption().next;\n    }\n    /**\n     * @return {Shape}\n     */\n    getShape() {\n        let x;\n        let y;\n        let header;\n        let headerPixels;\n        let shape;\n        let desc;\n        x = _const__WEBPACK_IMPORTED_MODULE_2__.MENU_LEFT;\n        y = _const__WEBPACK_IMPORTED_MODULE_2__.MENU_TOP;\n        // Header\n        header = this.header;\n        headerPixels = (0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(header);\n        headerPixels = (0,_ui_transformClient__WEBPACK_IMPORTED_MODULE_4__.zoom)(2, headerPixels, x, y);\n        shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_1__.Shape(headerPixels);\n        y += _const__WEBPACK_IMPORTED_MODULE_2__.MENU_TITLE_HEIGHT;\n        // Footer\n        shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(this.footer, x, _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 3 - (0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontHeight)(this.footer)));\n        // Draw options\n        for (let i = 0, m = this._options.length; i < m; i++) {\n            let title;\n            const active = this._selected === i;\n            title = this._options[i].title;\n            shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(title, x, y, { invert: active }));\n            y += _ui_font__WEBPACK_IMPORTED_MODULE_3__.LINE_HEIGHT_MENU;\n        }\n        // Help text line(s)\n        if (this._options.length) {\n            desc = this.getSelectedOption().description;\n            y += _ui_font__WEBPACK_IMPORTED_MODULE_3__.LINE_HEIGHT;\n            shape.add((0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(desc, x, y, { wrap: _const__WEBPACK_IMPORTED_MODULE_2__.MENU_WRAP }));\n        }\n        return shape;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stage_class_helper/selectMenu.ts?");

/***/ }),

/***/ "./client/stages/autoJoin.ts":
/*!***********************************!*\
  !*** ./client/stages/autoJoin.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AutoJoinStage\": () => (/* binding */ AutoJoinStage)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stage_base/inputStage */ \"./client/stage_base/inputStage.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _challenge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./challenge */ \"./client/stages/challenge.ts\");\n/* harmony import */ var _quickJoinGame__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./quickJoinGame */ \"./client/stages/quickJoinGame.ts\");\n\n\n\n\n\n\n\n\nclass AutoJoinStage extends _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_3__.InputStage {\n    constructor() {\n        super();\n        /** @type {room.ClientRoom} */\n        this.room = _state_state__WEBPACK_IMPORTED_MODULE_4__.State.player.room;\n        this.header = \"JOiN GAME\";\n        this.label = this.getRoomSummary();\n        this.name = _const__WEBPACK_IMPORTED_MODULE_1__.STORAGE_NAME;\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.flow.GameStage = _quickJoinGame__WEBPACK_IMPORTED_MODULE_7__.QuickJoinGame;\n        this.next = this.room.options.isXSS ? _challenge__WEBPACK_IMPORTED_MODULE_6__.ChallengeStage : _state_state__WEBPACK_IMPORTED_MODULE_4__.State.flow.GameStage;\n        this.minlength = _shared_const__WEBPACK_IMPORTED_MODULE_0__.PLAYER_NAME_MINLENGTH;\n        this.maxwidth = _shared_const__WEBPACK_IMPORTED_MODULE_0__.PLAYER_NAME_MAXWIDTH;\n        _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_3__.InputStage.call(this);\n    }\n    getRoomSummary() {\n        const summary = [];\n        summary.push((0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AUTOJOIN_PLAYERS, this.room.players.getTotal()) +\n            \"\\t\" +\n            this.room.players.getNames().join(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_COMMA_SPACE));\n        summary.push(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_FIELD_MAX_PLAYERS + \"\\t\" + this.room.options.maxPlayers);\n        summary.push(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_FIELD_LEVEL_SET +\n            \"\\t\" +\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.levelsetRegistry.getLevelset(this.room.options.levelset).title);\n        summary.push(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_FIELD_POWERUPS + \"\\t\" + _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_BOOL[Number(this.room.options.hasPowerups)]);\n        summary.push(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_FIELD_XSS + \"\\t\" + _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_BOOL[Number(this.room.options.isXSS)]);\n        return summary.join(\"\\n\") + \"\\n\\n\" + _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AUTOJOIN_ENTER_NAME;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/autoJoin.ts?");

/***/ }),

/***/ "./client/stages/autoJoinWizard.ts":
/*!*****************************************!*\
  !*** ./client/stages/autoJoinWizard.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AutoJoinWizard\": () => (/* binding */ AutoJoinWizard)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _room_clientRoom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../room/clientRoom */ \"./client/room/clientRoom.ts\");\n/* harmony import */ var _room_clientSocketPlayer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../room/clientSocketPlayer */ \"./client/room/clientSocketPlayer.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/dialog */ \"./client/ui/dialog.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _autoJoin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./autoJoin */ \"./client/stages/autoJoin.ts\");\n/**\n * @param {string} roomKey\n * @constructor\n */\n\n\n\n\n\n\n\n\n\nclass AutoJoinWizard {\n    constructor(roomKey) {\n        this.roomKey = roomKey;\n        this.dialog = this.getInitialDialog();\n        this.autoJoinRoom();\n    }\n    getInitialDialog() {\n        return new _ui_dialog__WEBPACK_IMPORTED_MODULE_6__.Dialog(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AUTOJOIN_HEADER, _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AUTOJOIN_CONNECTING);\n    }\n    autoJoinRoom() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.player = new _room_clientSocketPlayer__WEBPACK_IMPORTED_MODULE_4__.ClientSocketPlayer(this.onconnect.bind(this));\n    }\n    onconnect() {\n        window.setTimeout(function () {\n            this.dialog.setBody(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AUTOJOIN_FETCHING);\n            window.setTimeout(this.getAutoJoinRoomStatus.bind(this), 500);\n        }.bind(this), 500);\n        this.bindEvents();\n    }\n    getAutoJoinRoomStatus() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_STATUS, [this.roomKey]);\n    }\n    bindEvents() {\n        // Use room to store data until player confirms join.\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.player.room = new _room_clientRoom__WEBPACK_IMPORTED_MODULE_3__.ClientRoom();\n        this.eventsReceived = 0;\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this.checkAllRoomDataReceived.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_OPTIONS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this.checkAllRoomDataReceived.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this.checkAllRoomDataReceived.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_JOIN_ERROR, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this.handleError.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_OPTIONS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_JOIN_ERROR, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n    }\n    checkAllRoomDataReceived() {\n        // Need room, room options and room players.\n        if (++this.eventsReceived === 3) {\n            this.dialog.destruct();\n            this.unbindEvents();\n            _state_state__WEBPACK_IMPORTED_MODULE_5__.State.flow.switchStage(_autoJoin__WEBPACK_IMPORTED_MODULE_8__.AutoJoinStage);\n        }\n    }\n    handleError(data) {\n        this.dialog.destruct();\n        this.unbindEvents();\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_7__.error)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_ERROR[data[0]]);\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.player = null;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/autoJoinWizard.ts?");

/***/ }),

/***/ "./client/stages/challenge.ts":
/*!************************************!*\
  !*** ./client/stages/challenge.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChallengeStage\": () => (/* binding */ ChallengeStage)\n/* harmony export */ });\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stage_base/inputStage */ \"./client/stage_base/inputStage.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _inputXss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./inputXss */ \"./client/stages/inputXss.ts\");\n/* jshint evil: true */\n\n\n\n\n\n\n\n/**\n * @extends {InputStage}\n * @implements {StageInterface}\n * @constructor\n */\nclass ChallengeStage extends _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_2__.InputStage {\n    constructor() {\n        super();\n        this._challenges = [\n            \"document.scripts[0].tagName\",\n            \"document.documentElement.tagName\",\n            \"location.protocol.split('').reverse().join('')[%d]\",\n            \"'OUIMERCI!'.charAt(Math.ceil(Math.random())*%d)\",\n            \"Array(%d).join(encodeURI(' '))\",\n            \"parseInt('1000',%d+2)\",\n            \"2e%d\",\n            \"String([1,2,3][3]).charAt(%d)\",\n            \"String(typeof []).charAt(%d)\",\n            \"String(typeof (5%2)).charAt(%d)\",\n            \"(/%s/).test('%s')\",\n            \"'%s%s'.replace(/%s/, 'mew')\",\n            \"'012345'.lastIndexOf('%d')\",\n            \"'%s'+'A'+Math.pow(%d,2)\",\n            \"new Date('2013,0%d,0%d').getMonth()\",\n            \"let A=%d,B=3;do{A++}while(B--); A;\",\n            \"let A=3,B=%d;do{A++}while(B--); B;\",\n            \"let A=%d;A++;++A;A+=1; A;\",\n            \"let A=%d;A--;--A;A-=1; A;\",\n            '\"%d\"+%d',\n        ];\n        this._challenge = this._getRandomChallenge();\n        this.maxwidth = 80;\n        this.header = \"DANGER DANGER\";\n        this.label =\n            \"\" +\n                \"XSS mode allows the winner of a game to execute \" +\n                \"JavaScript in the browser of every loser. This may \" +\n                \"damage you and/or your computer. To confirm that \" +\n                \"you know JavaScript and accept the risk, enter the \" +\n                \"result of the following statement:\\n\\n> \" +\n                this._challenge +\n                \"\\n> \";\n        this.next = _inputXss__WEBPACK_IMPORTED_MODULE_6__.InputXssStage;\n    }\n    inputSubmit(error, value, top) {\n        let shape;\n        let text = \"ACCESS DENIED!!\";\n        // Evalevaleval!!!\n        // Tolerate answers where user is quoting strings.\n        if (value.replace(/['\"]/g, \"\").trim() === String(eval(this._challenge))) {\n            text = \"> bleep!\";\n            _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_INPUT);\n            setTimeout(function () {\n                _state_state__WEBPACK_IMPORTED_MODULE_3__.State.flow.switchStage(this.next);\n            }.bind(this), 1000);\n        }\n        shape = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.font)(text, _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT, top);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__.lifetime)(shape, 0, 1000);\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.shapes.message = shape;\n    }\n    _getRandomChallenge() {\n        let randomStr;\n        let randomDigit;\n        let challenge;\n        randomStr = randomStr().substr(0, 3).toUpperCase();\n        randomDigit = String((0,_shared_util__WEBPACK_IMPORTED_MODULE_0__.randomRange)(0, 5));\n        challenge = String((0,_shared_util__WEBPACK_IMPORTED_MODULE_0__.randomArrItem)(this._challenges));\n        challenge = challenge.replace(/%s/g, randomStr);\n        challenge = challenge.replace(/%d/g, randomDigit);\n        return challenge;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/challenge.ts?");

/***/ }),

/***/ "./client/stages/color.ts":
/*!********************************!*\
  !*** ./client/stages/color.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ColorStage\": () => (/* binding */ ColorStage)\n/* harmony export */ });\n/* harmony import */ var _bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../bootstrap/registerColorSchemes */ \"./client/bootstrap/registerColorSchemes.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stage_base_selectStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stage_base/selectStage */ \"./client/stage_base/selectStage.ts\");\n/* harmony import */ var _stage_class_helper_selectMenu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stage_class_helper/selectMenu */ \"./client/stage_class_helper/selectMenu.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n\n\n\n\n\n\nclass ColorStage extends _stage_base_selectStage__WEBPACK_IMPORTED_MODULE_2__.SelectStage {\n    constructor() {\n        super();\n        this.menu = new _stage_class_helper_selectMenu__WEBPACK_IMPORTED_MODULE_3__.SelectMenu(\"COLOR SCHEME\");\n        for (let i = 0, m = _bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_0__.colorSchemes.length; i < m; i++) {\n            this.menu.addOption(null, null, _bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_0__.colorSchemes[i].title, _bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_0__.colorSchemes[i].desc, this.setColor.bind(this));\n        }\n        this.menu.select((0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.storage)(_const__WEBPACK_IMPORTED_MODULE_1__.STORAGE_COLOR));\n    }\n    setColor(index) {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.canvas.setColorScheme(_bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_0__.colorSchemes[index]);\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.storage)(_const__WEBPACK_IMPORTED_MODULE_1__.STORAGE_COLOR, index);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/color.ts?");

/***/ }),

/***/ "./client/stages/credits.ts":
/*!**********************************!*\
  !*** ./client/stages/credits.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreditsStage\": () => (/* binding */ CreditsStage)\n/* harmony export */ });\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stage_base_screenStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stage_base/screenStage */ \"./client/stage_base/screenStage.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_transformClient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/transformClient */ \"./client/ui/transformClient.ts\");\n/**\n * @extends {ScreenStage}\n * @implements {StageInterface}\n * @constructor\n */\n\n\n\n\n\nclass CreditsStage extends _stage_base_screenStage__WEBPACK_IMPORTED_MODULE_2__.ScreenStage {\n    getShape() {\n        let body;\n        let icons;\n        const left = _const__WEBPACK_IMPORTED_MODULE_1__.MENU_LEFT;\n        const top = _const__WEBPACK_IMPORTED_MODULE_1__.MENU_TOP;\n        icons = [_const__WEBPACK_IMPORTED_MODULE_1__.UC_BULB, \"{}\", _const__WEBPACK_IMPORTED_MODULE_1__.UC_FONT, _const__WEBPACK_IMPORTED_MODULE_1__.UC_BUG, _const__WEBPACK_IMPORTED_MODULE_1__.UC_MUSIC, _const__WEBPACK_IMPORTED_MODULE_1__.UC_SKULL];\n        body =\n            icons.join(\" + \") +\n                \"\\n\" +\n                \"BLAISE KAL  2012 - 2020\\n\\n\" +\n                \"www.blaise.io\\n\" +\n                \"blaise.kal@gmail.com\\n\\n\" +\n                \"Thank you for playing!\\n\" +\n                \"KEEP THE SNAKE ALIVE\";\n        return new _shared_shape__WEBPACK_IMPORTED_MODULE_0__.Shape((0,_ui_transformClient__WEBPACK_IMPORTED_MODULE_4__.zoom)(2, (0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(\"CREDITS\"), left, top), (0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(body, left, top + _const__WEBPACK_IMPORTED_MODULE_1__.MENU_TITLE_HEIGHT));\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/credits.ts?");

/***/ }),

/***/ "./client/stages/inputXss.ts":
/*!***********************************!*\
  !*** ./client/stages/inputXss.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"InputXssStage\": () => (/* binding */ InputXssStage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stage_base/inputStage */ \"./client/stage_base/inputStage.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/**\n * @extends {InputStage}\n * @implements {StageInterface}\n * @constructor\n */\n\n\n\n\nclass InputXssStage extends _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_1__.InputStage {\n    constructor() {\n        super();\n        this.name = _const__WEBPACK_IMPORTED_MODULE_0__.STORAGE_XSS;\n        this.header = \"ENTER YOUR EVAL\";\n        this.label =\n            \"\" +\n                \"Paste your JS. Keep it short; max 256 chars.\\n\" +\n                \"Line breaks will be removed.\\n\\n\" +\n                \"> \";\n        this.minlength = 2;\n        this.maxChars = 256;\n        this.displayWidth = _const__WEBPACK_IMPORTED_MODULE_0__.MENU_WIDTH - (0,_ui_font__WEBPACK_IMPORTED_MODULE_3__.fontWidth)(\"> \");\n        this.next = _state_state__WEBPACK_IMPORTED_MODULE_2__.State.flow.GameStage;\n        _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_1__.InputStage.call(this);\n        this.value = this.value || 'document.title = \"LOSER!!\"';\n    }\n    getData() {\n        return {\n            xss: this.getValue(),\n        };\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/inputXss.ts?");

/***/ }),

/***/ "./client/stages/main.ts":
/*!*******************************!*\
  !*** ./client/stages/main.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MainStage\": () => (/* binding */ MainStage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _stage_menuSnake__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stage/menuSnake */ \"./client/stage/menuSnake.ts\");\n/* harmony import */ var _stage_base_selectStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stage_base/selectStage */ \"./client/stage_base/selectStage.ts\");\n/* harmony import */ var _stage_class_helper_selectMenu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../stage_class_helper/selectMenu */ \"./client/stage_class_helper/selectMenu.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _autoJoinWizard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./autoJoinWizard */ \"./client/stages/autoJoinWizard.ts\");\n/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./color */ \"./client/stages/color.ts\");\n/* harmony import */ var _credits__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./credits */ \"./client/stages/credits.ts\");\n/* harmony import */ var _name__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./name */ \"./client/stages/name.ts\");\n/* harmony import */ var _quickGame__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./quickGame */ \"./client/stages/quickGame.ts\");\n/* harmony import */ var _singlePlayer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./singlePlayer */ \"./client/stages/singlePlayer.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass MainStage extends _stage_base_selectStage__WEBPACK_IMPORTED_MODULE_3__.SelectStage {\n    constructor() {\n        super();\n        const roomKey = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_6__.urlHash)(_const__WEBPACK_IMPORTED_MODULE_0__.HASH_ROOM);\n        this.menu = this._getMenu();\n        if (roomKey) {\n            new _autoJoinWizard__WEBPACK_IMPORTED_MODULE_7__.AutoJoinWizard(roomKey);\n        }\n        else if (!_state_state__WEBPACK_IMPORTED_MODULE_5__.State.menuSnake) {\n            _state_state__WEBPACK_IMPORTED_MODULE_5__.State.menuSnake = new _stage_menuSnake__WEBPACK_IMPORTED_MODULE_2__.MenuSnake();\n        }\n    }\n    construct() {\n        this.data = {};\n        super.construct();\n    }\n    getData() {\n        return this.data;\n    }\n    _getMenu() {\n        const name = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_6__.storage)(_const__WEBPACK_IMPORTED_MODULE_0__.STORAGE_NAME);\n        const header = name ? \"YAY \" + name.toUpperCase() + \" IS BACK!\" : \"MULTIPLAYER SNAKE!\";\n        const menu = new _stage_class_helper_selectMenu__WEBPACK_IMPORTED_MODULE_4__.SelectMenu(header, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_MAIN_INSTRUCT);\n        menu.addOption(null, _quickGame__WEBPACK_IMPORTED_MODULE_11__.QuickGame, \"QUICK GAME\");\n        menu.addOption(null, _name__WEBPACK_IMPORTED_MODULE_10__.NameStage, \"MULTIPLAYER\");\n        menu.addOption(null, _singlePlayer__WEBPACK_IMPORTED_MODULE_12__.SinglePlayer, \"SINGLE PLAYER\");\n        menu.addOption(null, _color__WEBPACK_IMPORTED_MODULE_8__.ColorStage, \"COLOR SCHEME\");\n        menu.addOption(null, _credits__WEBPACK_IMPORTED_MODULE_9__.CreditsStage, \"CREDITS\");\n        return menu;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/main.ts?");

/***/ }),

/***/ "./client/stages/multiplayer.ts":
/*!**************************************!*\
  !*** ./client/stages/multiplayer.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MultiplayerStage\": () => (/* binding */ MultiplayerStage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _stage_base_formStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stage_base/formStage */ \"./client/stage_base/formStage.ts\");\n/* harmony import */ var _stage_class_helper_form__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stage_class_helper/form */ \"./client/stage_class_helper/form.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _challenge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./challenge */ \"./client/stages/challenge.ts\");\n/* harmony import */ var _startGame__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./startGame */ \"./client/stages/startGame.ts\");\n\n\n\n\n\n\n\nclass MultiplayerStage extends _stage_base_formStage__WEBPACK_IMPORTED_MODULE_2__.FormStage {\n    constructor() {\n        super();\n        this.form = this._getForm();\n    }\n    getData() {\n        return {\n            multiplayer: this.form.getData(),\n        };\n    }\n    getNextStage(values) {\n        if (values[_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_XSS]) {\n            return _challenge__WEBPACK_IMPORTED_MODULE_5__.ChallengeStage;\n        }\n        else {\n            return _startGame__WEBPACK_IMPORTED_MODULE_6__.StartGameStage;\n        }\n    }\n    _getForm() {\n        let footer;\n        let form;\n        footer = _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FORM_INSTRUCT;\n        form = new _stage_class_helper_form__WEBPACK_IMPORTED_MODULE_3__.Form(_copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_OPTIONS_STAGE_HEADER, footer);\n        form.addField(_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_LEVEL_SET, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_LEVEL_SET, _state_state__WEBPACK_IMPORTED_MODULE_4__.State.levelsetRegistry.getAsFieldValues());\n        form.addField(_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_POWERUPS, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_POWERUPS, [\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE],\n            [false, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_FALSE],\n        ]);\n        // Trololol\n        form.addField(_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_BUGS, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_BUGS, [\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT1],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT2],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT3],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT4],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT5],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT6],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT7],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT8],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE_OPT9],\n        ]);\n        form.addField(_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_PRIVATE, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_PRIVATE, [\n            [false, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_FALSE],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE],\n        ]);\n        form.addField(_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_XSS, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_XSS, [\n            [false, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_FALSE],\n            [true, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_TRUE],\n        ]);\n        form.addField(_const__WEBPACK_IMPORTED_MODULE_0__.FIELD_MAX_PLAYERS, _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_FIELD_MAX_PLAYERS, [\n            [6, \"6\"],\n            [1, \"1\"],\n            [2, \"2\"],\n            [3, \"3\"],\n            [4, \"4\"],\n            [5, \"5\"],\n        ]);\n        return form;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/multiplayer.ts?");

/***/ }),

/***/ "./client/stages/name.ts":
/*!*******************************!*\
  !*** ./client/stages/name.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NameStage\": () => (/* binding */ NameStage)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stage_base/inputStage */ \"./client/stage_base/inputStage.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _multiplayer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./multiplayer */ \"./client/stages/multiplayer.ts\");\n/**\n * @extends {InputStage}\n * @implements {StageInterface}\n * @constructor\n */\n\n\n\n\n\n\n\n\nclass NameStage extends _stage_base_inputStage__WEBPACK_IMPORTED_MODULE_3__.InputStage {\n    constructor() {\n        super();\n        this._wits = [\n            \"%s%s%s!!!\",\n            \"You have the same name as my mom\",\n            \"LOVELY \" + new Array(4).join(_const__WEBPACK_IMPORTED_MODULE_2__.UC_WHITE_HEART),\n            _const__WEBPACK_IMPORTED_MODULE_2__.UC_SKULL,\n            \"Lamest name EVER\",\n            \"Clever name!\",\n            \"Mmm I love the way you handled that keyboard\",\n            \"asdasdasdasd\",\n            \"Please dont touch anything\",\n            \"Hello %s\",\n            \"Are you excited?\",\n            \"ARE YOU READY TO PARTY???\",\n            \"Is that your real name?\",\n            \"You dont look like a %s…\",\n            \"Are you new here?\",\n            \"I remember you\",\n            \"I dont believe that's your name, but continue anyway\",\n            \"Can I have your number?\",\n            \"My name is NaN\",\n            \"#$%^&*!!\",\n            \"I thought I banned you?\",\n            \"Jesus saves\",\n            \"Is this your first time online?\",\n            \"Are you from the internet?\",\n            \"%s? OMGOMG\",\n            \"Your soul is beautiful!\",\n            \"Your soul is delicous\",\n        ];\n        this.next = _multiplayer__WEBPACK_IMPORTED_MODULE_7__.MultiplayerStage;\n        this.name = _const__WEBPACK_IMPORTED_MODULE_2__.STORAGE_NAME;\n        this.header = \"HELLO\";\n        this.label = \"My name is \";\n        this.minlength = _shared_const__WEBPACK_IMPORTED_MODULE_0__.PLAYER_NAME_MINLENGTH;\n        this.maxwidth = _shared_const__WEBPACK_IMPORTED_MODULE_0__.PLAYER_NAME_MAXWIDTH;\n    }\n    getData() {\n        return {\n            name: this.getValue(),\n        };\n    }\n    /**\n     * @param {string} error\n     * @param {string} value\n     * @param {number} top\n     * @private\n     */\n    inputSubmit(error, value, top) {\n        let shape;\n        let text;\n        let duration = 500;\n        if (error) {\n            text = error;\n        }\n        else {\n            _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_2__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_2__.NS_INPUT);\n            text = (0,_shared_util__WEBPACK_IMPORTED_MODULE_1__.randomArrItem)(this._wits).replace(/%s/g, value);\n            duration = Math.max(Math.min(text.length * 30, 500), 100);\n            setTimeout(function () {\n                _state_state__WEBPACK_IMPORTED_MODULE_4__.State.flow.switchStage(this.next);\n            }.bind(this), duration);\n        }\n        shape = (0,_ui_font__WEBPACK_IMPORTED_MODULE_5__.font)(text, _const__WEBPACK_IMPORTED_MODULE_2__.MENU_LEFT, top);\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_6__.lifetime)(shape, 0, duration);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes.message = shape;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/name.ts?");

/***/ }),

/***/ "./client/stages/quickGame.ts":
/*!************************************!*\
  !*** ./client/stages/quickGame.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"QuickGame\": () => (/* binding */ QuickGame)\n/* harmony export */ });\n/* harmony import */ var _room_options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../room/options */ \"./client/room/options.ts\");\n/* harmony import */ var _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stage_base/gameStage */ \"./client/stage_base/gameStage.ts\");\n\n\nclass QuickGame extends _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_1__.Game {\n    getSerializedGameOptions() {\n        const options = new _room_options__WEBPACK_IMPORTED_MODULE_0__.ClientOptions();\n        options.isQuickGame = true;\n        return options.serialize();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/quickGame.ts?");

/***/ }),

/***/ "./client/stages/quickJoinGame.ts":
/*!****************************************!*\
  !*** ./client/stages/quickJoinGame.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"QuickJoinGame\": () => (/* binding */ QuickJoinGame)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stage_base/gameStage */ \"./client/stage_base/gameStage.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n\n\n\n\n\n\nclass QuickJoinGame extends _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_3__.Game {\n    connectServer() {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.player.room.setupComponents();\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYER_NAME, [this.getPlayerName()]);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_JOIN_KEY, [_state_state__WEBPACK_IMPORTED_MODULE_4__.State.player.room.key]);\n        this.bindEvents();\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this.setupRoom.bind(this));\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.on(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_JOIN_ERROR, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES, this.handleError.bind(this));\n    }\n    unbindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_PLAYERS_SERIALIZE, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.off(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_JOIN_ERROR, _const__WEBPACK_IMPORTED_MODULE_1__.NS_STAGES);\n    }\n    setupRoom() {\n        this.destructStageLeftovers();\n        this.unbindEvents();\n    }\n    handleError(data) {\n        this.unbindEvents();\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.error)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_ERROR[data[0]]);\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.player = null;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/quickJoinGame.ts?");

/***/ }),

/***/ "./client/stages/singlePlayer.ts":
/*!***************************************!*\
  !*** ./client/stages/singlePlayer.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SinglePlayer\": () => (/* binding */ SinglePlayer)\n/* harmony export */ });\n/* harmony import */ var _room_options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../room/options */ \"./client/room/options.ts\");\n/* harmony import */ var _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stage_base/gameStage */ \"./client/stage_base/gameStage.ts\");\n\n\nclass SinglePlayer extends _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_1__.Game {\n    getSerializedGameOptions() {\n        const options = new _room_options__WEBPACK_IMPORTED_MODULE_0__.ClientOptions();\n        options.maxPlayers = 1;\n        options.isPrivate = true;\n        return options.serialize();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/singlePlayer.ts?");

/***/ }),

/***/ "./client/stages/startGame.ts":
/*!************************************!*\
  !*** ./client/stages/startGame.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StartGameStage\": () => (/* binding */ StartGameStage)\n/* harmony export */ });\n/* harmony import */ var _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../stage_base/gameStage */ \"./client/stage_base/gameStage.ts\");\n\nclass StartGameStage extends _stage_base_gameStage__WEBPACK_IMPORTED_MODULE_0__.Game {\n    constructor() {\n        super();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/stages/startGame.ts?");

/***/ }),

/***/ "./client/state/state.ts":
/*!*******************************!*\
  !*** ./client/state/state.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"State\": () => (/* binding */ State)\n/* harmony export */ });\nclass State {\n}\nState.keysBlocked = false;\n\n\n//# sourceURL=webpack://xssnake/./client/state/state.ts?");

/***/ }),

/***/ "./client/ui/audioPlayer.ts":
/*!**********************************!*\
  !*** ./client/ui/audioPlayer.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AudioPlayer\": () => (/* binding */ AudioPlayer)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _data_mp3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/mp3 */ \"./client/data/mp3.ts\");\n/* harmony import */ var _data_ogg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/ogg */ \"./client/data/ogg.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/**\n * @constructor\n */\n\n\n\n\n\nclass AudioPlayer {\n    constructor() {\n        /** @type {Object.<string,string>} */\n        this.files;\n        /** @type {string} */\n        this.mimetype;\n        this.setupFiles();\n    }\n    /**\n     * @param {string} file\n     */\n    play(file) {\n        if (this.files && this.files[file] && !(0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_4__.storage)(_const__WEBPACK_IMPORTED_MODULE_0__.STORAGE_MUTE) && _state_state__WEBPACK_IMPORTED_MODULE_3__.State.canvas.focus) {\n            new Audio(\"data:\" + this.mimetype + \";base64,\" + this.files[file]).play();\n        }\n    }\n    getSupportedAudioFiles() {\n        const audioElement = document.createElement(\"audio\");\n        const mimetypes = {\n            mp3: \"audio/mpeg\",\n            ogg: \"audio/ogg\",\n        };\n        if (audioElement.canPlayType) {\n            // Prefer ogg over mp3 because of this Firefox bug:\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=849264\n            if (audioElement.canPlayType(mimetypes.ogg).replace(/no/, \"\")) {\n                return { mimetype: mimetypes.ogg, files: _data_ogg__WEBPACK_IMPORTED_MODULE_2__.OGG_FILES };\n            }\n            else if (audioElement.canPlayType(mimetypes.mp3).replace(/no/, \"\")) {\n                return { mimetype: mimetypes.mp3, files: _data_mp3__WEBPACK_IMPORTED_MODULE_1__.MP3_FILES };\n            }\n        }\n        return null;\n    }\n    setupFiles() {\n        const audioFiles = this.getSupportedAudioFiles();\n        if (audioFiles) {\n            this.mimetype = audioFiles.mimetype;\n            this.files = audioFiles.files;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/audioPlayer.ts?");

/***/ }),

/***/ "./client/ui/canvas.ts":
/*!*****************************!*\
  !*** ./client/ui/canvas.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Canvas\": () => (/* binding */ Canvas)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bootstrap/registerColorSchemes */ \"./client/bootstrap/registerColorSchemes.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _canvasTile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./canvasTile */ \"./client/ui/canvasTile.ts\");\n/* harmony import */ var _shapeCache__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shapeCache */ \"./client/ui/shapeCache.ts\");\n/* harmony import */ var _shapeClient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shapeClient */ \"./client/ui/shapeClient.ts\");\n\n\n\n\n\n\n\n\n\nclass Canvas {\n    constructor() {\n        const color = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.storage)(_const__WEBPACK_IMPORTED_MODULE_3__.STORAGE_COLOR);\n        this.fps = [];\n        this.canvas = this._setupCanvas();\n        this.context = this.canvas.getContext(\"2d\");\n        this.tile = new _canvasTile__WEBPACK_IMPORTED_MODULE_6__.CanvasTile(_bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_2__.colorSchemes[color] || _bootstrap_registerColorSchemes__WEBPACK_IMPORTED_MODULE_2__.colorSchemes[0]);\n        this._setCanvasDimensions();\n        this._positionCanvas();\n        this._bindEvents();\n        this.focus = true;\n        this._prevFrame = new Date();\n        this._frameBound = this._frame.bind(this);\n        window.requestAnimationFrame(this._frameBound);\n    }\n    /**\n     * @param {ColorScheme} colorScheme\n     */\n    setColorScheme(colorScheme) {\n        this.tile.setColorScheme(colorScheme);\n        this._flushShapeCache();\n    }\n    /**\n     * @param {number} delta\n     */\n    paint(delta) {\n        // Abuse this loop to trigger game tick\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.trigger(_const__WEBPACK_IMPORTED_MODULE_3__.EV_GAME_TICK, delta, this.focus);\n        // Clear canvas\n        this._clear();\n        // Paint all layers\n        this._paintShapes(delta);\n    }\n    /**\n     * Remove all nulled shapes. We don't delete shapes immediately\n     * because this triggers a slow garbage collection during gameplay,\n     * which may affect framerate negatively.\n     */\n    garbageCollect() {\n        const shapes = _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes;\n        for (const k in shapes) {\n            if (null === shapes[k]) {\n                delete shapes[k];\n            }\n        }\n    }\n    _flushShapeCache() {\n        const shapes = _state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes;\n        for (const k in shapes) {\n            if (null !== shapes[k]) {\n                shapes[k].uncache();\n            }\n        }\n    }\n    _clear() {\n        this.context.save();\n        this.context.fillStyle = this.tile.off;\n        this.context.globalAlpha = 1 - this.tile.colorScheme.ghosting;\n        this.context.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\n        this.context.restore();\n    }\n    /**\n     * @param {number} delta\n     * @private\n     */\n    _paintShapes(delta) {\n        const overlays = [];\n        const shapeKeys = Object.keys(_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes);\n        // Avoid looping over an uncached keyval object.\n        for (let i = 0, m = shapeKeys.length; i < m; i++) {\n            this._paintDispatch(delta, overlays, shapeKeys[i]);\n        }\n        this._paintOverlays(delta, overlays);\n    }\n    /**\n     * @param {number} delta\n     * @param {Array.<Shape>} overlays\n     * @param {string} key\n     * @private\n     */\n    _paintDispatch(delta, overlays, key) {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[key]) {\n            if (_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[key].flags.isOverlay) {\n                overlays.push(_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[key]);\n            }\n            else {\n                this._paintShape(_state_state__WEBPACK_IMPORTED_MODULE_4__.State.shapes[key], delta);\n            }\n        }\n    }\n    /**\n     * @param {number} delta\n     * @param {Array.<Shape>} overlays\n     * @private\n     */\n    _paintOverlays(delta, overlays) {\n        for (let i = 0, m = overlays.length; i < m; i++) {\n            this._paintShape(overlays[i], delta);\n        }\n    }\n    /** @private */\n    _frame(now) {\n        // Make appointment for next paint.\n        if (!this.error) {\n            window.requestAnimationFrame(this._frameBound);\n        }\n        // Time since last paint\n        const delta = now - this._prevFrame;\n        this._prevFrame = now;\n        // Show FPS in title bar\n        //this.reportFps(1000 / delta);\n        this.paint(delta);\n    }\n    reportFps(fps) {\n        this.fps.unshift(fps);\n        this.fps.length = 10;\n        document.title = \"XXSNAKE \" + Math.round((0,_shared_util__WEBPACK_IMPORTED_MODULE_1__.average)(this.fps));\n    }\n    /**\n     * @param {Shape} shape\n     * @param {number} delta\n     * @private\n     */\n    _paintShape(shape, delta) {\n        const translate = shape.transform.translate;\n        // Apply effects if FPS is in a normal range. If window is out\n        // of focus, we don't want animations. Also we do not want anims\n        // if a browser is \"catching up\" frames after being focused after\n        // a blur, where it tries to make up for slow frames.\n        if (delta > _const__WEBPACK_IMPORTED_MODULE_3__.MIN_FRAME_DELTA && delta < _const__WEBPACK_IMPORTED_MODULE_3__.MAX_FRAME_DELTA) {\n            (0,_shapeClient__WEBPACK_IMPORTED_MODULE_8__.applyEffects)(shape, delta);\n        }\n        // Draw on canvas if shape is enabled and visible\n        if (!shape.flags.enabled) {\n            return;\n        }\n        // Create cache\n        if (!shape.cache) {\n            shape.cache = new _shapeCache__WEBPACK_IMPORTED_MODULE_7__.ShapeCache(shape, this.tile);\n        }\n        if (shape.mask) {\n            // A mask specifies a bounding box (x0, y0, x1, y1)\n            // where anything outside will not get drawn.\n            this._drawMaskedShape(shape);\n        }\n        else {\n            // Paint cached image on canvas\n            this.context.drawImage(shape.cache.canvas, shape.cache.bbox.x0 + translate[0] * this.tile.size, shape.cache.bbox.y0 + translate[1] * this.tile.size);\n        }\n    }\n    /**\n     * @param {Shape} shape\n     * @private\n     */\n    _drawMaskedShape(shape) {\n        const translate = shape.transform.translate;\n        const mx0 = shape.mask[0] * this.tile.size;\n        const my0 = shape.mask[1] * this.tile.size;\n        const mx1 = shape.mask[2] * this.tile.size;\n        const my1 = shape.mask[3] * this.tile.size;\n        let sx = 0;\n        let sy = 0;\n        let width = shape.cache.bbox.width + this.tile.size;\n        let height = shape.cache.bbox.height + this.tile.size;\n        let dx = shape.cache.bbox.x0 + translate[0] * this.tile.size;\n        let dy = shape.cache.bbox.y0 + translate[1] * this.tile.size;\n        // Cut top off\n        if (dy < my0) {\n            sy = my0 - dy;\n            dy += sy;\n            height -= sy;\n        }\n        // Cut left off\n        if (dx < mx0) {\n            sx = mx0 - dx;\n            dx += sx;\n            width -= sx;\n        }\n        // Cut bottom off\n        if (dy + height > my1) {\n            height -= dy + height - my1;\n        }\n        // Cut right off\n        if (dx + width > mx1) {\n            width -= dx + width - mx1;\n        }\n        this.context.drawImage(shape.cache.canvas, sx, sy, width, height, dx, dy, width, height);\n    }\n    _bindEvents() {\n        this.canvas.onclick = this._promoteKeyboard.bind(this);\n        window.onresize = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.debounce)(() => {\n            this._setCanvasDimensions();\n            this._flushShapeCache();\n            this._positionCanvas();\n        });\n        window.onfocus = this._handleFocusChange.bind(this);\n        window.onblur = this._handleFocusChange.bind(this);\n    }\n    _handleFocusChange(ev) {\n        this.focus = ev.type !== \"blur\";\n        _state_state__WEBPACK_IMPORTED_MODULE_4__.State.events.trigger(_const__WEBPACK_IMPORTED_MODULE_3__.EV_WIN_FOCUS_CHANGE, this.focus);\n    }\n    _promoteKeyboard(ev) {\n        if (Number(ev.which) !== 1) {\n            // Only LMB\n            return;\n        }\n        (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_5__.instruct)(\"No mousing please\", 2000);\n    }\n    _setCanvasDimensions() {\n        const size = this.tile.updateSize();\n        this.canvasWidth = size * _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH;\n        this.canvasHeight = size * _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT;\n        this.canvas.width = this.canvasWidth;\n        this.canvas.height = this.canvasHeight;\n        this.canvas.style.width = `${this.canvasWidth / window.devicePixelRatio}px`;\n        this.canvas.style.height = `${this.canvasHeight / window.devicePixelRatio}px`;\n    }\n    _positionCanvas() {\n        const windowCenter = window.innerWidth / 2;\n        const windowMiddle = window.innerHeight / 2;\n        const offset = 2 * window.devicePixelRatio;\n        const left = this._snapCanvasToTiles(windowCenter - this.canvasWidth / offset);\n        const top = this._snapCanvasToTiles(windowMiddle - this.canvasHeight / offset);\n        const style = this.canvas.style;\n        style.position = \"absolute\";\n        style.left = Math.max(0, left) + \"px\";\n        style.top = Math.max(0, top) + \"px\";\n    }\n    _setupCanvas() {\n        const canvas = document.createElement(\"canvas\");\n        document.body.appendChild(canvas);\n        return canvas;\n    }\n    _snapCanvasToTiles(num) {\n        return Math.floor(num / this.tile.size) * this.tile.size;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/canvas.ts?");

/***/ }),

/***/ "./client/ui/canvasTile.ts":
/*!*********************************!*\
  !*** ./client/ui/canvasTile.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CanvasTile\": () => (/* binding */ CanvasTile)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n\nclass CanvasTile {\n    constructor(colorScheme) {\n        this.colorScheme = colorScheme;\n        this.on = null;\n        this.off = null;\n        this.size = 0;\n    }\n    setColorScheme(colorScheme) {\n        this.colorScheme = colorScheme;\n        this.updatePatterns();\n    }\n    updateSize() {\n        const minWhitespace = 10;\n        const minWidth = ((window.innerWidth - minWhitespace) * window.devicePixelRatio) / _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH;\n        const minHeight = ((window.innerHeight - minWhitespace) * window.devicePixelRatio) / _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT;\n        this.size = Math.floor(Math.min(minWidth, minHeight)) || 1;\n        this.updatePatterns();\n        return this.size;\n    }\n    updatePatterns() {\n        const canvas = document.createElement(\"canvas\");\n        canvas.setAttribute(\"width\", String(this.size));\n        canvas.setAttribute(\"height\", String(this.size));\n        this.on = this._getTileForColor(canvas, this.colorScheme.on);\n        this.off = this._getTileForColor(canvas, this.colorScheme.off);\n        document.body.style.backgroundImage = \"url(\" + canvas.toDataURL(\"image/png\") + \")\";\n        document.body.style.backgroundColor = this.colorScheme.bg;\n        document.body.style.backgroundSize = this.size / 2 + \"px\";\n    }\n    _getTileForColor(canvas, color) {\n        const context = canvas.getContext(\"2d\");\n        // Prevent completely transparent borders for visibility:\n        const pixelSize = this.size === 1 ? 1 : this.size - 0.35;\n        context.fillStyle = this.colorScheme.bg;\n        context.fillRect(0, 0, this.size, this.size);\n        context.fillStyle = color;\n        context.fillRect(0, 0, pixelSize, pixelSize);\n        return context.createPattern(canvas, \"repeat\");\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/canvasTile.ts?");

/***/ }),

/***/ "./client/ui/clientShapeGenerator.ts":
/*!*******************************************!*\
  !*** ./client/ui/clientShapeGenerator.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tooltip\": () => (/* binding */ tooltip),\n/* harmony export */   \"tooltipName\": () => (/* binding */ tooltipName),\n/* harmony export */   \"showAction\": () => (/* binding */ showAction),\n/* harmony export */   \"innerBorder\": () => (/* binding */ innerBorder),\n/* harmony export */   \"outerBorder\": () => (/* binding */ outerBorder),\n/* harmony export */   \"xssnakeHeader\": () => (/* binding */ xssnakeHeader),\n/* harmony export */   \"explosion\": () => (/* binding */ explosion)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/pixelCollection */ \"./shared/pixelCollection.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared/shapeGenerator */ \"./shared/shapeGenerator.ts\");\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _font__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./font */ \"./client/ui/font.ts\");\n/* harmony import */ var _shapeClient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _transformClient__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./transformClient */ \"./client/ui/transformClient.ts\");\n\n\n\n\n\n\n\n\n\n\n/**\n * @param {string} text\n * @param {number} x\n * @param {number} y\n * @param {number} direction\n * @return {Shape}\n */\nfunction tooltip(text, x, y, direction) {\n    let width;\n    let shape;\n    let hw;\n    width = (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontWidth)(text);\n    switch (direction) {\n        case 0:\n            shape = (0,_font__WEBPACK_IMPORTED_MODULE_7__.font)(text, x - width - 6, y - 4);\n            // Left\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - width - 9, y - 5, x - width - 9, y + 3));\n            // Top\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - width - 8, y - 6, x - 6, y - 6));\n            // Bottoms\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - width - 9, y + 4, x - 5, y + 4));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - width - 8, y + 5, x - 6, y + 5));\n            // Top 1px\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 5, y - 5, x - 5, y - 5));\n            // Pointer\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 5, y - 4, x - 2, y - 1));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 5, y + 2, x - 2, y - 1));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 5, y + 3, x - 2, y));\n            break;\n        case 1:\n            hw = Math.ceil(width / 2);\n            shape = (0,_font__WEBPACK_IMPORTED_MODULE_7__.font)(text, x - hw, y - 13);\n            // Top\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - hw - 2, y - 15, x + hw + 1, y - 15));\n            // Left\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - hw - 3, y - 5, x - hw - 3, y - 14));\n            // Bottoms\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + -hw - 2, y - 4, x + hw + 1, y - 4));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + -hw - 2, y - 5, x + hw + 1, y - 5));\n            // Right\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + hw + 2, y - 5, x + hw + 2, y - 14));\n            // Pointer\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 1, y - 1, x - 4, y - 4));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 1, y - 2, x - 4, y - 5));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x, y - 1, x + 3, y - 4));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x, y - 2, x + 3, y - 5));\n            shape.remove((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 3, y - 4, x + 3, y - 4));\n            shape.remove((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 3, y - 5, x + 3, y - 5));\n            break;\n        case 2:\n            shape = (0,_font__WEBPACK_IMPORTED_MODULE_7__.font)(text, x + 8, y - 4);\n            // Right\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + width + 9, y - 5, x + width + 9, y + 3));\n            // Top\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + width + 8, y - 6, x + 6, y - 6));\n            // Bottom\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + width + 9, y + 4, x + 5, y + 4));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + width + 8, y + 5, x + 6, y + 5));\n            // Top 1px\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + 5, y - 5, x + 5, y - 5));\n            // Pointer\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + 5, y - 4, x + 2, y - 1));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + 5, y + 2, x + 2, y - 1));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + 5, y + 3, x + 2, y));\n            break;\n        case 3:\n            hw = Math.ceil(width / 2);\n            shape = (0,_font__WEBPACK_IMPORTED_MODULE_7__.font)(text, x - hw, y + 6);\n            // Top\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + -hw - 2, y + 4, x + hw + 1, y + 4));\n            // Left\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - hw - 3, y + 5, x - hw - 3, y + 14));\n            // Bottoms\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - hw - 2, y + 14, x + hw + 1, y + 14));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - hw - 2, y + 15, x + hw + 1, y + 15));\n            // Right\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x + hw + 2, y + 5, x + hw + 2, y + 14));\n            // Pointer\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 1, y + 1, x - 4, y + 4));\n            shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x, y + 1, x + 3, y + 4));\n            shape.remove((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x - 3, y + 4, x + 3, y + 4));\n            break;\n    }\n    shape.flags.isOverlay = true;\n    shape.bbox();\n    return shape;\n}\n/**\n * @param {string} text\n * @param {Coordinate} part\n * @param {number} direction\n * @return {Shape}\n */\nfunction tooltipName(text, part, direction) {\n    let x;\n    let y;\n    const t = _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE;\n    const d = _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE * 2.5;\n    x = part[0] * t;\n    y = part[1] * t;\n    switch (direction) {\n        case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_LEFT:\n            y += t;\n            x -= t;\n            break;\n        case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_UP:\n            y -= t;\n            x += t;\n            break;\n        case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_RIGHT:\n            y += t;\n            x += d;\n            break;\n        case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_DOWN:\n            y += d;\n            x += t;\n            break;\n    }\n    return tooltip(text, x, y, direction);\n}\n/**\n * @param {string} label\n * @param {Coordinate} coordinate\n * @param {number} duration\n * @param {number=} amount\n */\nfunction showAction(label, coordinate, duration, amount = 3) {\n    for (let s = 0; s <= duration * amount; s += duration) {\n        let shape;\n        let name;\n        shape = (0,_font__WEBPACK_IMPORTED_MODULE_7__.font)(label, coordinate[0] * _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE + (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-12, 12), coordinate[1] * _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE + (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-12, 12));\n        name = _const__WEBPACK_IMPORTED_MODULE_5__.NS_ACTION + (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomStr)();\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.shapes[name] = (0,_shapeClient__WEBPACK_IMPORTED_MODULE_8__.lifetime)(shape, s, s + duration);\n    }\n}\n/**\n * @return {Shape}\n */\nfunction innerBorder() {\n    const w = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH - 1;\n    const h = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 1;\n    return new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(2, h - 25, w - 2, h - 25), (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(2, h - 26, w - 2, h - 26));\n}\nfunction outerBorder() {\n    const w = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH - 1;\n    const h = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 1;\n    return {\n        outerBorderTop: new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(1, 0, w - 1, 0), (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(0, 1, w, 1)),\n        outerBorderRight: new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(w, 2, w, h - 2), (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(w - 1, 2, w - 1, h - 2)),\n        outerBorderBottom: new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(1, h, w - 1, h), (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(0, h - 1, w, h - 1)),\n        outerBorderLeft: new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(0, 2, 0, h - 2), (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(1, 2, 1, h - 2)),\n    };\n}\nfunction xssnakeHeader() {\n    let x;\n    let y;\n    let shape;\n    const welcome = (0,_font__WEBPACK_IMPORTED_MODULE_7__.font)(\"<XSSNAKE>\").pixels;\n    x = _const__WEBPACK_IMPORTED_MODULE_5__.MENU_LEFT - 2;\n    y = _const__WEBPACK_IMPORTED_MODULE_5__.MENU_TOP - 34;\n    shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape((0,_transformClient__WEBPACK_IMPORTED_MODULE_9__.zoom)(4, welcome, x, y));\n    x += 2;\n    y += 28;\n    shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(x, y, x + _const__WEBPACK_IMPORTED_MODULE_5__.MENU_WIDTH, y));\n    return shape;\n}\nfunction explosion(location, direction = -1, intensity = 16) {\n    let to;\n    const w = 10;\n    const d = 20;\n    while (intensity--) {\n        switch (direction) {\n            case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_LEFT:\n                to = [(0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-w, d), (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-w, w)];\n                break;\n            case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_UP:\n                to = [(0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-w, w), (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-d, w)];\n                break;\n            case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_RIGHT:\n                to = [(0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-d, w), (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-w, w)];\n                break;\n            case _shared_const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_DOWN:\n                to = [(0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-w, w), (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-w, d)];\n                break;\n            default:\n                to = [(0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-d, d), (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(-d, d)];\n        }\n        const pixel = new _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection().add(location[0], location[1]);\n        const duration = Math.pow((0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomRange)(1, 10), 3);\n        const shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape(pixel);\n        (0,_shapeClient__WEBPACK_IMPORTED_MODULE_8__.animate)(shape, { to: to, duration: duration });\n        (0,_shapeClient__WEBPACK_IMPORTED_MODULE_8__.lifetime)(shape, 0, duration);\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.shapes[_const__WEBPACK_IMPORTED_MODULE_5__.NS_EXPLOSION + (0,_shared_util__WEBPACK_IMPORTED_MODULE_4__.randomStr)(3)] = shape;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/clientShapeGenerator.ts?");

/***/ }),

/***/ "./client/ui/colorScheme.ts":
/*!**********************************!*\
  !*** ./client/ui/colorScheme.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ColorScheme\": () => (/* binding */ ColorScheme)\n/* harmony export */ });\nclass ColorScheme {\n    constructor(title, desc, bg, off, on, ghosting = 0.6) {\n        this.title = title;\n        this.desc = desc;\n        this.bg = bg;\n        this.off = off;\n        this.on = on;\n        this.ghosting = ghosting;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/colorScheme.ts?");

/***/ }),

/***/ "./client/ui/dialog.ts":
/*!*****************************!*\
  !*** ./client/ui/dialog.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Dialog\": () => (/* binding */ Dialog)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/pixelCollection */ \"./shared/pixelCollection.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared/shapeGenerator */ \"./shared/shapeGenerator.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _font__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./font */ \"./client/ui/font.ts\");\n/* harmony import */ var _shapeClient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _transformClient__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./transformClient */ \"./client/ui/transformClient.ts\");\n\n\n\n\n\n\n\n\n\n\n/**\n * @param {string} header\n * @param {string} body\n * @param {DialogSettings=} settings\n * @constructor\n */\nclass Dialog {\n    constructor(header, body, settings = {}) {\n        this.header = header;\n        this.body = body;\n        this.header = header.toUpperCase();\n        this._body = body;\n        /** @type {DialogSettings} */\n        this.settings = {\n            keysBlocked: true,\n            type: Dialog.TYPE.INFO,\n            width: 80,\n            ok: () => { },\n            cancel: () => { },\n        };\n        Object.assign(this.settings, settings);\n        this._bindEvents();\n        this._updateShape();\n        // TODO: Play a bubble sound\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.shapes.dialog = null;\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.keysBlocked = false;\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_4__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_4__.NS_DIALOG);\n    }\n    restore() {\n        this._bindEvents();\n        this._updateShape();\n    }\n    ok() {\n        this.destruct();\n        this.settings.ok();\n    }\n    cancel() {\n        this.destruct();\n        this.settings.cancel();\n    }\n    //    /**\n    //     * @param {string} header\n    //     */\n    //    setHeader(header) {\n    //        State.audio.play('menu_alt');\n    //        this._header = header.toUpperCase();\n    //        this._updateShape();\n    //    }\n    //\n    /**\n     * @param {string} body\n     */\n    setBody(body) {\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.audio.play(\"menu_alt\");\n        this._body = body;\n        this._updateShape();\n    }\n    /**\n     * @private\n     */\n    _bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.keysBlocked = this.settings.keysBlocked;\n        if (this.settings.type !== Dialog.TYPE.INFO) {\n            _state_state__WEBPACK_IMPORTED_MODULE_6__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_4__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_4__.NS_DIALOG, this._handleKeys.bind(this));\n        }\n        if (this.settings.type === Dialog.TYPE.ALERT) {\n            this._okSelected = true;\n        }\n        else if (this.settings.type === Dialog.TYPE.CONFIRM) {\n            this._okSelected = false;\n        }\n    }\n    /**\n     * @param {Event} ev\n     * @private\n     */\n    _handleKeys(ev) {\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_LEFT:\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_UP:\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_DOWN:\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_RIGHT:\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_TAB:\n                if (this.settings.type === Dialog.TYPE.CONFIRM) {\n                    _state_state__WEBPACK_IMPORTED_MODULE_6__.State.audio.play(\"menu_alt\");\n                    this._okSelected = !this._okSelected;\n                    this._updateShape();\n                }\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_BACKSPACE:\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_ESCAPE:\n                if (this.settings.type === Dialog.TYPE.CONFIRM) {\n                    this.cancel();\n                }\n                else {\n                    this.ok();\n                }\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_ENTER:\n            case _const__WEBPACK_IMPORTED_MODULE_4__.KEY_SPACE:\n                if (this._okSelected) {\n                    this.ok();\n                }\n                else {\n                    this.cancel();\n                }\n                break;\n        }\n    }\n    /**\n     * @return {number}\n     * @private\n     */\n    _getAreaHeight() {\n        //        if (remoteRoom && remoteRoom.rounds.round.game && remoteRoom.rounds.round.game.level) {\n        //            return remoteRoom.rounds.round.game.level.data.height * GAME_TILE;\n        //        } else {\n        //            return HEIGHT;\n        //        }\n        return Math.round((_shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT / 3) * 2);\n    }\n    /**\n     * @return {number}\n     * @private\n     */\n    _getContentWidth() {\n        return Math.max(this.settings.width, -2 + (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontWidth)(this.header) * 2);\n    }\n    /**\n     * @return {number}\n     * @private\n     */\n    _getButtonPosition() {\n        const bodyBBox = this._getBodyPixels().bbox();\n        return _font__WEBPACK_IMPORTED_MODULE_7__.MAX_HEIGHT * 3 + bodyBBox.height + 4;\n    }\n    /**\n     * @return {PixelCollection}\n     * @private\n     */\n    _getHeaderPixels() {\n        let header;\n        header = (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontPixels)(this.header, 0, 0);\n        header = (0,_transformClient__WEBPACK_IMPORTED_MODULE_9__.zoom)(2, header, 0, 0);\n        return header;\n    }\n    /**\n     * @return {PixelCollection}\n     * @private\n     */\n    _getBodyPixels() {\n        let y;\n        const settings = { wrap: this._getContentWidth() };\n        y = 1 + _font__WEBPACK_IMPORTED_MODULE_7__.MAX_HEIGHT * 2;\n        return (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontPixels)(this._body, 0, y, settings);\n    }\n    /**\n     * @param {number} y\n     * @return {PixelCollection}\n     * @private\n     */\n    _getLine(y) {\n        return (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_3__.line)(0, y - 5, this._getContentWidth(), y - 5);\n    }\n    /**\n     * @param {number} x\n     * @param {number} y\n     * @return {PixelCollection}\n     * @private\n     */\n    _getCancelButton(x, y) {\n        const settings = { invert: !this._okSelected };\n        return (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontPixels)(_copy_copy__WEBPACK_IMPORTED_MODULE_5__.COPY_DIALOG_CANCEL, x, y, settings);\n    }\n    /**\n     * @param {number} x\n     * @param {number} y\n     * @return {PixelCollection}\n     * @private\n     */\n    _getOkButton(x, y) {\n        const settings = { invert: this._okSelected };\n        return (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontPixels)(_copy_copy__WEBPACK_IMPORTED_MODULE_5__.COPY_DIALOG_OK, x, y, settings);\n    }\n    /**\n     * @return {PixelCollection}\n     * @private\n     */\n    _getAlertPixels() {\n        let y;\n        let ok;\n        let line;\n        y = this._getButtonPosition();\n        ok = this._getOkButton(1, y);\n        line = this._getLine(y);\n        return new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape(ok, line).pixels;\n    }\n    /**\n     * @return {PixelCollection}\n     * @private\n     */\n    _getConfirmPixels() {\n        let x;\n        let y;\n        let cancel;\n        let ok;\n        let line;\n        x = (0,_font__WEBPACK_IMPORTED_MODULE_7__.fontWidth)(_copy_copy__WEBPACK_IMPORTED_MODULE_5__.COPY_DIALOG_CANCEL) + 5;\n        y = this._getButtonPosition();\n        cancel = this._getCancelButton(1, y);\n        ok = this._getOkButton(x, y);\n        line = this._getLine(y);\n        return new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape(ok, cancel, line).pixels;\n    }\n    /**\n     * @private\n     */\n    _updateShape() {\n        let buttons = new _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection();\n        const header = this._getHeaderPixels();\n        const body = this._getBodyPixels();\n        switch (this.settings.type) {\n            case Dialog.TYPE.ALERT:\n                buttons = this._getAlertPixels();\n                break;\n            case Dialog.TYPE.CONFIRM:\n                buttons = this._getConfirmPixels();\n                break;\n        }\n        const shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_2__.Shape(header, body, buttons);\n        shape.flags.isOverlay = true;\n        shape.transform.translate[1] = _const__WEBPACK_IMPORTED_MODULE_4__.MENU_TOP - 2;\n        (0,_transformClient__WEBPACK_IMPORTED_MODULE_9__.outline)(shape);\n        (0,_shapeClient__WEBPACK_IMPORTED_MODULE_8__.center)(shape, 0, 0);\n        _state_state__WEBPACK_IMPORTED_MODULE_6__.State.shapes.dialog = shape;\n    }\n}\n/** @enum {number} */\nDialog.TYPE = {\n    INFO: 0,\n    ALERT: 1,\n    CONFIRM: 2, // OK and CANCEL button\n};\n\n\n//# sourceURL=webpack://xssnake/./client/ui/dialog.ts?");

/***/ }),

/***/ "./client/ui/font.ts":
/*!***************************!*\
  !*** ./client/ui/font.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MAX_WIDTH\": () => (/* binding */ MAX_WIDTH),\n/* harmony export */   \"MAX_HEIGHT\": () => (/* binding */ MAX_HEIGHT),\n/* harmony export */   \"BASELINE\": () => (/* binding */ BASELINE),\n/* harmony export */   \"LINE_HEIGHT\": () => (/* binding */ LINE_HEIGHT),\n/* harmony export */   \"LINE_HEIGHT_MENU\": () => (/* binding */ LINE_HEIGHT_MENU),\n/* harmony export */   \"BLURRY_TRESHOLD\": () => (/* binding */ BLURRY_TRESHOLD),\n/* harmony export */   \"font\": () => (/* binding */ font),\n/* harmony export */   \"fontPixels\": () => (/* binding */ fontPixels),\n/* harmony export */   \"fontHeight\": () => (/* binding */ fontHeight),\n/* harmony export */   \"fontWidth\": () => (/* binding */ fontWidth),\n/* harmony export */   \"fastWidth\": () => (/* binding */ fastWidth),\n/* harmony export */   \"fontEndPos\": () => (/* binding */ fontEndPos),\n/* harmony export */   \"getMaxes\": () => (/* binding */ getMaxes),\n/* harmony export */   \"getKerning\": () => (/* binding */ getKerning)\n/* harmony export */ });\n/* harmony import */ var _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/pixelCollection */ \"./shared/pixelCollection.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _shared_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/transform */ \"./shared/transform.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n\n\n\n\nconst MAX_WIDTH = 9;\nconst MAX_HEIGHT = 7;\nconst BASELINE = 6;\nconst LINE_HEIGHT = 8;\nconst LINE_HEIGHT_MENU = 9;\nconst BLURRY_TRESHOLD = 3;\nconst _cache = {};\nconst _ctx = _getContext();\nfunction font(str, x = 0, y = 0, options = {}) {\n    let tabx1;\n    const shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_1__.Shape();\n    const pointer = { x: 0, y: 0 };\n    const chrs = str.split(\"\");\n    for (let i = 0, m = chrs.length; i < m; i++) {\n        let nextWordFit = true;\n        const chr = chrs[i];\n        const width = _appendChr(x, y, shape, chrs[i], pointer);\n        if (options.wrap && chr.match(/[\\s-]/)) {\n            nextWordFit = _nextWordFit(str, i, pointer, options.wrap);\n        }\n        if (chr === \"\\t\") {\n            if (tabx1) {\n                pointer.x = tabx1;\n            }\n            else {\n                pointer.x = tabx1 = _getTabx1(str);\n            }\n        }\n        else if (chr === \"\\n\" || !nextWordFit) {\n            pointer.x = 0;\n            pointer.y += LINE_HEIGHT;\n        }\n        else {\n            pointer.x += width + 2;\n        }\n    }\n    if (options.invert) {\n        _invert(shape, y);\n    }\n    return shape;\n}\nfunction fontPixels(str, x = 0, y = 0, options = {}) {\n    return font(str, x, y, options).pixels;\n}\n/**\n * @param {string} str\n * @param {number=} x\n * @param {number=} y\n * @param {Object=} options\n * @return {number}\n */\nfunction fontHeight(str, x = 0, y = 0, options = {}) {\n    let remainder;\n    let height;\n    const LH = LINE_HEIGHT;\n    height = font(str, x, y, options).pixels.pixels.length + 1;\n    // Don't allow absence of font descenders affect height.\n    remainder = LH - ((height - (y || 0)) % LH || LH);\n    return height + remainder;\n}\n/**\n * @param {string} str\n * @param {number=} x\n * @param {number=} y\n * @param {Object=} options\n * @return {number}\n */\nfunction fontWidth(str, x = 0, y = 0, options = {}) {\n    let pixels;\n    let width;\n    const maxes = [0];\n    pixels = font(str, x, y, options).pixels;\n    for (let i = pixels.pixels.length - LINE_HEIGHT + 1, m = pixels.pixels.length; i < m; i++) {\n        if (pixels.pixels[i]) {\n            maxes.push(Math.max.apply(this, pixels.pixels[i]));\n        }\n    }\n    width = Math.max.apply(this, maxes) + 2;\n    // Ends with a space. Ending with multiple spaces not supported.\n    if (\" \" === str.slice(-1)) {\n        width += 3;\n    }\n    return width;\n}\n/**\n * Ignores kerning.\n * @param {string} str\n * @return {number}\n */\nfunction fastWidth(str) {\n    let chrs;\n    let width = 0;\n    chrs = str.split(\"\\n\");\n    chrs = chrs[chrs.length - 1].split(\"\");\n    for (let i = 0, m = chrs.length; i < m; i++) {\n        width += _chrProperties(chrs[i]).width;\n        width += 2;\n    }\n    return width;\n}\n/**\n * @param {string} str\n * @param {number=} x\n * @param {number=} y\n * @param {Object=} options\n * @return {Array}\n */\nfunction fontEndPos(str, x, y, options) {\n    return [fontWidth(str, x, y, options), fontHeight(str, x, y, options) - LINE_HEIGHT];\n}\n/**\n * @param chr\n * @return {Object}\n * @private\n */\nfunction _chrProperties(chr) {\n    if (!_cache[chr]) {\n        const chrProperties = _getChrProperties(chr);\n        _cache[chr] = chrProperties || _chrProperties(_const__WEBPACK_IMPORTED_MODULE_3__.UC_SQUARE);\n    }\n    return _cache[chr];\n}\n/**\n * @param {number} x\n * @param {number} y\n * @param {Shape} shape\n * @param {string} chr\n * @param {Object.<string,number>} pointer\n * @return {number}\n * @private\n */\nfunction _appendChr(x, y, shape, chr, pointer) {\n    let chrProperties;\n    let shiftedPixels;\n    let kerning = 0;\n    chrProperties = _chrProperties(chr);\n    if (pointer.x) {\n        kerning = getKerning(x, y, shape, pointer, chrProperties);\n    }\n    shiftedPixels = (0,_shared_transform__WEBPACK_IMPORTED_MODULE_2__.shift)(chrProperties.pixels, pointer.x + x + kerning, pointer.y + y);\n    shape.add(shiftedPixels);\n    return chrProperties.width + kerning;\n}\nfunction getMaxes(x, y, shape, pointer) {\n    const maxes = [];\n    for (let i = 0; i < LINE_HEIGHT; i++) {\n        if (shape.pixels.pixels[y + pointer.y + i]) {\n            maxes[i] = Math.max.apply(this, shape.pixels.pixels[y + pointer.y + i]) - x;\n        }\n    }\n    return maxes;\n}\nfunction getKerning(x, y, shape, pointer, chrProperties) {\n    let gap;\n    const gaps = [];\n    const maxes = getMaxes(x, y, shape, pointer);\n    for (let i = 0; i < LINE_HEIGHT; i++) {\n        let min = null;\n        let max;\n        if (chrProperties.pixels.pixels[i]) {\n            min = Math.min.apply(this, chrProperties.pixels.pixels[i]);\n        }\n        max = Math.max(maxes[i - 1] || 0, maxes[i] || 0, maxes[i + 1] || 0);\n        if (min !== null) {\n            gaps.push(pointer.x - max + min);\n        }\n    }\n    gap = Math.min.apply(this, gaps);\n    return Math.max(-1, 2 - gap);\n}\n/**\n * Determine whether the next word will fit on the same line or not.\n * @param {string} str\n * @param {number} i\n * @param {Object.<string,number>} pointer\n * @param {number} wrap\n * @return {boolean}\n * @private\n */\nfunction _nextWordFit(str, i, pointer, wrap) {\n    const nextWord = str.substr(i + 1).split(/[\\s\\-]/)[0];\n    return pointer.x + fastWidth(nextWord) <= wrap;\n}\n/**\n * Determine X position for tab end to align a two-column table.\n * Note to future self: Does not work for more than one tab per line.\n * @param {string} str\n * @return {number}\n * @private\n */\nfunction _getTabx1(str) {\n    let maxtab = 0;\n    const lines = str.split(/\\n/g);\n    for (let i = 0, m = lines.length; i < m; i++) {\n        const segments = lines[i].split(\"\\t\");\n        if (segments.length >= 2) {\n            maxtab = Math.max(maxtab, fontWidth(\"  \" + segments[0]));\n        }\n    }\n    return maxtab;\n}\n/**\n * @param {Shape} shape\n * @param {number} y\n * @private\n */\nfunction _invert(shape, y) {\n    const bbox = shape.bbox();\n    bbox.expand(1);\n    bbox.y0 = y - 1;\n    bbox.y1 = y + LINE_HEIGHT;\n    shape.invert(bbox);\n}\n/**\n * @return {CanvasRenderingContext2D}\n * @private\n */\nfunction _getContext() {\n    let canvas;\n    let context;\n    let font;\n    canvas = document.createElement(\"canvas\");\n    canvas.width = MAX_WIDTH;\n    canvas.height = MAX_HEIGHT;\n    context = canvas.getContext(\"2d\");\n    // \"xssnake\" is a special font that was crafted for this game.\n    font = \"8px xssnake\";\n    // Specify blurry fonts in the fallback, to make it easier to detect\n    // glyphs that are (un)supported by the xssnake font.\n    font += \", courier new, serif\";\n    context.font = font;\n    return context;\n}\n/**\n * @param {string} chr\n * @return {{width: number, pixels: PixelCollection}|null}\n * @private\n */\nfunction _getChrProperties(chr) {\n    let data;\n    const pixels = new _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_0__.PixelCollection();\n    let width = 0;\n    let len = 0;\n    let blurry = 0;\n    let valid;\n    const w = MAX_WIDTH;\n    const h = MAX_HEIGHT;\n    // Handle whitespace characters\n    if (chr.match(/\\s/)) {\n        return { width: 3, pixels: pixels };\n    }\n    _ctx.fillStyle = \"#000\";\n    _ctx.fillRect(0, 0, w, h);\n    _ctx.fillStyle = \"#fff\";\n    _ctx.fillText(chr, 0, BASELINE);\n    data = _ctx.getImageData(0, 0, w, h).data;\n    for (let i = 0, m = data.length; i < m; i += 4) {\n        // When this does not work on some OS, try a few presets until\n        // it matches a known pattern.\n        if (data[i] + data[i + 1] + data[i + 2] > 650) {\n            const seq = i / 4;\n            const x = seq % w;\n            const y = Math.floor(seq / w);\n            pixels.add(x, y);\n            len++;\n            width = Math.max(x, width);\n        }\n        else if (data[i]) {\n            blurry++;\n        }\n    }\n    valid = len && blurry / len <= BLURRY_TRESHOLD;\n    return valid ? { width: width, pixels: pixels } : null;\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/font.ts?");

/***/ }),

/***/ "./client/ui/messageBox.ts":
/*!*********************************!*\
  !*** ./client/ui/messageBox.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MessageBoxUI\": () => (/* binding */ MessageBoxUI)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shape */ \"./shared/shape.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _room_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../room/message */ \"./client/room/message.ts\");\n/* harmony import */ var _stage_class_helper_inputField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../stage_class_helper/inputField */ \"./client/stage_class_helper/inputField.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _font__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./font */ \"./client/ui/font.ts\");\n/* harmony import */ var _shapeClient__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shapeClient */ \"./client/ui/shapeClient.ts\");\n\n\n\n\n\n\n\n\nclass MessageBoxUI {\n    constructor(messages, localAuthor) {\n        this.messages = messages;\n        this.localAuthor = localAuthor;\n        this.animating = false;\n        this.skipQueue = false;\n        this.queued = 0;\n        this.inputField = null;\n        this.sendMessageFn = () => { };\n        this.lineHeight = 7;\n        this.animationDuration = 200;\n        this.x0 = 109;\n        this.x1 = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH - 2;\n        this.y0 = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 25;\n        this.y1 = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 2;\n        this.padding = { x0: 0, x1: 0, y0: 1, y1: 1 };\n        this.bindEvents();\n        this.updateMessages();\n    }\n    destruct() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_2__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_2__.NS_CHAT);\n        if (this.inputField) {\n            this.inputField.destruct();\n            this.inputField = null;\n        }\n    }\n    bindEvents() {\n        _state_state__WEBPACK_IMPORTED_MODULE_5__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_2__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_2__.NS_CHAT, this.handleKeys.bind(this));\n    }\n    handleKeys(ev) {\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_2__.KEY_ESCAPE:\n                this.hideInput();\n                this.hideEnterKey();\n                ev.preventDefault();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_2__.KEY_ENTER:\n                if (this.inputField) {\n                    this.sendMessage(this.inputField.getValue());\n                    this.hideInput();\n                }\n                else if (!_state_state__WEBPACK_IMPORTED_MODULE_5__.State.keysBlocked) {\n                    this.showInput();\n                }\n                ev.preventDefault();\n                break;\n        }\n    }\n    showInput() {\n        let x;\n        let y;\n        let prefix;\n        x = this.x0 + this.padding.x1 + new _room_message__WEBPACK_IMPORTED_MODULE_3__.Message(\"\", \"\").getOffset();\n        y = this.y1 - this.padding.y1 - this.lineHeight;\n        prefix = this.localAuthor.name + \": \";\n        this.inputField = new _stage_class_helper_inputField__WEBPACK_IMPORTED_MODULE_4__.InputField(x, y, prefix);\n        this.inputField.maxValWidth = this.x1 - x - (0,_font__WEBPACK_IMPORTED_MODULE_6__.fontWidth)(prefix);\n        this.inputField.maxValWidth -= this.padding.x0 + this.padding.x1;\n        this.inputField.displayWidth = this.inputField.maxValWidth;\n        this.inputField.displayWidth -= (0,_font__WEBPACK_IMPORTED_MODULE_6__.fontWidth)(_const__WEBPACK_IMPORTED_MODULE_2__.UC_ENTER_KEY) + 1;\n        this.inputField.setValue(\"\");\n        this.updateMessages();\n        this.showEnterKey();\n    }\n    hideInput() {\n        if (this.inputField) {\n            this.inputField.destruct();\n            this.inputField = null;\n        }\n        this.updateMessages();\n    }\n    sendMessage(body) {\n        const author = String(this.localAuthor.name);\n        if (body.trim()) {\n            this.messages.push(new _room_message__WEBPACK_IMPORTED_MODULE_3__.Message(author, body));\n            this.sendMessageFn(body);\n            this.skipQueue = true;\n        }\n        this.hideEnterKey(!!body.trim());\n    }\n    showEnterKey() {\n        const x = this.x1 - this.padding.x1 - (0,_font__WEBPACK_IMPORTED_MODULE_6__.fontWidth)(_const__WEBPACK_IMPORTED_MODULE_2__.UC_ENTER_KEY);\n        const y = this.y1 - this.lineHeight - this.padding.y1 + 1;\n        const shape = (_state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes.MSG_ENTER = (0,_font__WEBPACK_IMPORTED_MODULE_6__.font)(_const__WEBPACK_IMPORTED_MODULE_2__.UC_ENTER_KEY, x, y));\n        shape.invert(shape.bbox(2));\n        shape.flags.isOverlay = true;\n    }\n    /**\n     * @param {boolean=} flashKey\n     */\n    hideEnterKey(flashKey) {\n        const speed = _const__WEBPACK_IMPORTED_MODULE_2__.FRAME * 4;\n        if (flashKey) {\n            (0,_shapeClient__WEBPACK_IMPORTED_MODULE_7__.flash)(_state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes.MSG_ENTER, speed, speed);\n            (0,_shapeClient__WEBPACK_IMPORTED_MODULE_7__.lifetime)(_state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes.MSG_ENTER, 0, speed);\n        }\n        else {\n            _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes.MSG_ENTER = null;\n        }\n    }\n    getDisplayMessages(num) {\n        return this.messages.slice(-num - 1 - this.queued, this.messages.length - this.queued);\n    }\n    getNumMessagesFit() {\n        let fits = this.y1 - this.padding.y1 - (this.y0 + this.padding.y0);\n        fits = Math.floor(fits / this.lineHeight);\n        fits -= this.inputField === null ? 0 : 1;\n        return fits;\n    }\n    debounceUpdate() {\n        if (this.animating && !this.skipQueue) {\n            this.queued++;\n        }\n        else {\n            this.updateMessages();\n        }\n    }\n    updateMessages() {\n        let num;\n        let shape;\n        let messages;\n        shape = new _shared_shape__WEBPACK_IMPORTED_MODULE_1__.Shape();\n        shape.mask = [\n            this.x0,\n            this.y0,\n            this.x1,\n            this.y1 - (this.inputField ? this.lineHeight - this.padding.y1 : 0),\n        ];\n        num = this.getNumMessagesFit();\n        messages = this.getDisplayMessages(num);\n        if (messages.length) {\n            _state_state__WEBPACK_IMPORTED_MODULE_5__.State.shapes.MSG_BOX = shape;\n        }\n        else {\n            return false;\n        }\n        for (let i = 0, m = messages.length; i < m; i++) {\n            shape.add(this.getMessagePixels(i, messages[i]));\n        }\n        if (this.skipQueue) {\n            this.skipQueue = false;\n            this.queued = 0;\n            if (messages.length === num + 1) {\n                this.animateCallback(shape);\n            }\n        }\n        else if (messages.length === num + 1) {\n            this.animate(shape);\n        }\n    }\n    getMessagePixels(lineIndex, message) {\n        let x;\n        let y;\n        x = this.x0 + this.padding.x0;\n        y = this.y0 + this.padding.y0 + lineIndex * this.lineHeight;\n        return (0,_font__WEBPACK_IMPORTED_MODULE_6__.fontPixels)(message.getFormatted(), x + message.getOffset(), y);\n    }\n    animate(shape) {\n        this.animating = true;\n        const anim = {\n            to: [0, -this.lineHeight],\n            duration: this.animationDuration,\n            doneCallback: this.animateCallback.bind(this),\n        };\n        (0,_shapeClient__WEBPACK_IMPORTED_MODULE_7__.animate)(shape, anim);\n    }\n    animateCallback(shape) {\n        shape.transform.translate = [0, -this.lineHeight];\n        shape.pixels.removeLine(this.y0 + this.lineHeight);\n        shape.uncache();\n        setTimeout(this.processQueue.bind(this), 200);\n    }\n    processQueue() {\n        this.animating = false;\n        if (this.queued >= 1) {\n            this.debounceUpdate();\n            this.queued--;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/messageBox.ts?");

/***/ }),

/***/ "./client/ui/preGame.ts":
/*!******************************!*\
  !*** ./client/ui/preGame.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PreGameUI\": () => (/* binding */ PreGameUI)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dialog */ \"./client/ui/dialog.ts\");\n\n\n\n\n\n\nclass PreGameUI {\n    constructor(players, options) {\n        this.players = players;\n        this.options = options;\n        this.dialog = null;\n        this.countdownStarted = null;\n        this.countdownInterval = null;\n        this.confirmExit = false;\n        this.confirmStart = false;\n        this.bindKeys();\n        this.updateUI();\n    }\n    destruct() {\n        window.clearInterval(this.countdownInterval);\n        this.unbindKeys();\n        this.players = null;\n        this.options = null;\n        if (this.dialog) {\n            this.dialog.destruct();\n        }\n    }\n    bindKeys() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.on(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_PRE_GAME, this.handleKeys.bind(this));\n    }\n    unbindKeys() {\n        _state_state__WEBPACK_IMPORTED_MODULE_3__.State.events.off(_const__WEBPACK_IMPORTED_MODULE_1__.DOM_EVENT_KEYDOWN, _const__WEBPACK_IMPORTED_MODULE_1__.NS_PRE_GAME);\n    }\n    handleKeys(ev) {\n        if (_state_state__WEBPACK_IMPORTED_MODULE_3__.State.keysBlocked) {\n            return;\n        }\n        switch (ev.keyCode) {\n            case _const__WEBPACK_IMPORTED_MODULE_1__.KEY_BACKSPACE:\n            case _const__WEBPACK_IMPORTED_MODULE_1__.KEY_ESCAPE:\n                this.confirmExit = true;\n                this.updateUI();\n                break;\n            case _const__WEBPACK_IMPORTED_MODULE_1__.KEY_START:\n                if (this.playerCanStartRound()) {\n                    this.confirmStart = true;\n                    this.updateUI();\n                }\n                break;\n        }\n    }\n    updateUI() {\n        if (this.dialog) {\n            this.dialog.destruct();\n        }\n        if (this.confirmExit) {\n            this.showConfirmExitDialog();\n        }\n        else if (this.confirmStart) {\n            this.showConfirmStartDialog();\n        }\n        else if (this.countdownStarted) {\n            this.showCountdown();\n        }\n        else {\n            this.showInvitePlayersDialog();\n        }\n    }\n    hideConfirmDialog() {\n        this.confirmExit = false;\n        this.confirmStart = false;\n        this.updateUI();\n    }\n    playerCanStartRound() {\n        return this.players.getTotal() > 1 && this.players.localPlayerIsHost();\n    }\n    showInvitePlayersDialog() {\n        const numplayers = this.players.getTotal();\n        const remaining = this.options.maxPlayers - numplayers;\n        let body = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_4__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AWAITING_PLAYERS_BODY, remaining, remaining === 1 ? \"\" : \"s\");\n        if (this.playerCanStartRound()) {\n            body += \"\\n\\n\" + _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AWAITING_PLAYERS_START_NOW;\n        }\n        this.dialog = new _dialog__WEBPACK_IMPORTED_MODULE_5__.Dialog(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_AWAITING_PLAYERS_HEADER, body, {\n            keysBlocked: false,\n        });\n    }\n    showConfirmExitDialog() {\n        const settings = {\n            type: _dialog__WEBPACK_IMPORTED_MODULE_5__.Dialog.TYPE.CONFIRM,\n            cancel: this.hideConfirmDialog.bind(this),\n            ok: function () {\n                this.destruct();\n                _state_state__WEBPACK_IMPORTED_MODULE_3__.State.flow.restart();\n            }.bind(this),\n        };\n        this.dialog = new _dialog__WEBPACK_IMPORTED_MODULE_5__.Dialog(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_CONFIRM_EXIT_HEADER, this.players.getTotal() === 2\n            ? _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_CONFIRM_EXIT_BODY_DRAMATIC\n            : _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_CONFIRM_EXIT_BODY, settings);\n    }\n    showConfirmStartDialog() {\n        const settings = {\n            type: _dialog__WEBPACK_IMPORTED_MODULE_5__.Dialog.TYPE.CONFIRM,\n            cancel: this.hideConfirmDialog.bind(this),\n            ok: function () {\n                _state_state__WEBPACK_IMPORTED_MODULE_3__.State.player.emit(_shared_const__WEBPACK_IMPORTED_MODULE_0__.NC_ROOM_START);\n                this.hideConfirmDialog();\n            }.bind(this),\n        };\n        this.dialog = new _dialog__WEBPACK_IMPORTED_MODULE_5__.Dialog(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_CONFIRM_START_HEADER, _copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_CONFIRM_START_BODY, settings);\n    }\n    /**\n     * @param {boolean} started\n     */\n    toggleCountdown(started) {\n        if (started) {\n            this.countdownStarted = new Date();\n        }\n        else {\n            this.countdownStarted = null;\n            window.clearInterval(this.countdownInterval);\n        }\n    }\n    getCountdownRemaining() {\n        let remaining = _shared_const__WEBPACK_IMPORTED_MODULE_0__.SECONDS_ROUND_COUNTDOWN;\n        remaining -= (+new Date() - +this.countdownStarted) / 1000;\n        return Math.max(0, Math.round(remaining));\n    }\n    startCountdownTimer() {\n        if (this.countdownInterval) {\n            window.clearInterval(this.countdownInterval);\n        }\n        this.countdownInterval = window.setInterval(function () {\n            _state_state__WEBPACK_IMPORTED_MODULE_3__.State.audio.play(\"menu_alt\");\n            // Prevent re-creating dialog which destroys button selection.\n            if (!this.confirmExit) {\n                this.updateUI();\n            }\n        }.bind(this), 1000);\n    }\n    showCountdown() {\n        const body = (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_4__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_COUNTDOWN_BODY, this.getCountdownRemaining());\n        this.startCountdownTimer();\n        this.dialog = new _dialog__WEBPACK_IMPORTED_MODULE_5__.Dialog(_copy_copy__WEBPACK_IMPORTED_MODULE_2__.COPY_COUNTDOWN_TITLE, body, {\n            keysBlocked: false,\n        });\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/preGame.ts?");

/***/ }),

/***/ "./client/ui/scoreboard.ts":
/*!*********************************!*\
  !*** ./client/ui/scoreboard.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ScoreboardUI\": () => (/* binding */ ScoreboardUI)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _font__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./font */ \"./client/ui/font.ts\");\n/* harmony import */ var _shapeClient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shapeClient */ \"./client/ui/shapeClient.ts\");\n\n\n\n\n\nclass ScoreboardUI {\n    constructor(players) {\n        this.players = players;\n        this.x0 = 3;\n        this.x1 = 56;\n        this.y0 = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 24;\n        this.y1 = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - 2;\n        this.podiumSize = 6;\n        this.lineHeight = 7;\n        this.animationDuration = 200;\n        this.animationPause = 200;\n        this.columnSpacing = (0,_font__WEBPACK_IMPORTED_MODULE_3__.fontWidth)(\" \");\n        this.animating = false;\n        this.queue = false;\n        this.queueTimer = 0;\n        this.oldPlayerOrder = this.getPlayersSortedByScore();\n        this.updateScoreboard();\n    }\n    destruct() {\n        clearInterval(this.queueTimer);\n        this.destructShapes();\n    }\n    destructShapes() {\n        for (let i = 0; i < this.podiumSize; i++) {\n            _state_state__WEBPACK_IMPORTED_MODULE_2__.State.shapes[_const__WEBPACK_IMPORTED_MODULE_1__.NS_SCORE + i] = null;\n        }\n    }\n    debounceUpdate() {\n        if (this.animating) {\n            this.queue = true;\n        }\n        else {\n            this.updateScoreboard();\n        }\n    }\n    updateScoreboard() {\n        const newOrder = this.getPlayersSortedByScore();\n        const oldOrder = this.oldPlayerOrder;\n        for (let i = 0, m = this.podiumSize; i < m; i++) {\n            if (i >= oldOrder.length) {\n                // New player.\n                this.paint(this.players.players[i], i, i);\n                this.queue = true;\n            }\n            else if (typeof oldOrder[i] === \"undefined\") {\n                // Player placeholder.\n                this.paint(null, i, i);\n            }\n            else if (-1 === this.players.players.indexOf(oldOrder[i])) {\n                // Player left.\n                this.paint(null, i, this.players.getTotal());\n                this.queue = true;\n            }\n            else {\n                // Existing player.\n                const indexNew = newOrder.indexOf(oldOrder[i]);\n                this.paint(oldOrder[i], i, indexNew);\n            }\n        }\n        this.oldPlayerOrder = newOrder;\n    }\n    paint(player, oldIndex, newIndex) {\n        const oldCoordinate = this.getCoordinatesForIndex(oldIndex);\n        const shape = this.getPlayerScoreShape(player, oldCoordinate);\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.shapes[_const__WEBPACK_IMPORTED_MODULE_1__.NS_SCORE + oldIndex] = shape;\n        if (oldIndex !== newIndex) {\n            const newCoordinate = this.getCoordinatesForIndex(newIndex);\n            this.animateToNewPos(shape, oldCoordinate, newCoordinate);\n        }\n    }\n    animateToNewPos(shape, oldCoordinate, newCoordinate) {\n        this.animating = true;\n        (0,_shapeClient__WEBPACK_IMPORTED_MODULE_4__.animate)(shape, {\n            to: [newCoordinate[0] - oldCoordinate[0], newCoordinate[1] - oldCoordinate[1]],\n            duration: this.animationDuration,\n            doneCallback: this.animateCallback.bind(this),\n        });\n    }\n    animateCallback() {\n        this.queueTimer = window.setTimeout(this.queueUpdate.bind(this), this.animationPause);\n    }\n    queueUpdate() {\n        this.animating = false;\n        if (this.queue) {\n            this.queue = false;\n            this.updateScoreboard();\n        }\n    }\n    getPlayerScoreShape(player, coordinate) {\n        let name = \"-\", score = 0;\n        if (player && player.connected) {\n            name = player.name;\n            score = player.score;\n        }\n        let scoreX = coordinate[0] + this.itemWidth();\n        scoreX -= (0,_font__WEBPACK_IMPORTED_MODULE_3__.fontWidth)(String(score)) + this.columnSpacing;\n        const shape = (0,_font__WEBPACK_IMPORTED_MODULE_3__.font)(name, coordinate[0], coordinate[1]);\n        shape.add((0,_font__WEBPACK_IMPORTED_MODULE_3__.fontPixels)(String(score), scoreX, coordinate[1]));\n        if (player && player.local) {\n            this.markLocalPlayer(shape);\n        }\n        return shape;\n    }\n    markLocalPlayer(shape) {\n        const bbox = shape.bbox(1);\n        bbox.y1 = bbox.y0 + this.lineHeight;\n        bbox.setDimensions();\n        shape.invert();\n    }\n    itemWidth() {\n        return Math.floor(this.x1 - this.x0 / 2);\n    }\n    getCoordinatesForIndex(index) {\n        // 0 3\n        // 1 4\n        // 2 5\n        return [\n            this.x0 + (index + 1 <= this.podiumSize / 2 ? 0 : this.itemWidth()),\n            this.y0 + (index % (this.podiumSize / 2)) * this.lineHeight,\n        ];\n        // More chaotic?\n        // 0 1\n        // 2 3\n        // 4 5\n        //return [\n        //    this.x0 + (index % 2 ? this.itemWidth() : 0),\n        //    this.y0 + (Math.floor(index / 2) * this.lineHeight)\n        //];\n    }\n    getPlayersSortedByScore() {\n        const players = this.players.players.slice();\n        players.sort(function (a, b) {\n            return (b.connected ? b.score : -1) - (a.connected ? a.score : -1);\n        });\n        return players;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/scoreboard.ts?");

/***/ }),

/***/ "./client/ui/shapeCache.ts":
/*!*********************************!*\
  !*** ./client/ui/shapeCache.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ShapeCache\": () => (/* binding */ ShapeCache)\n/* harmony export */ });\n/* harmony import */ var _shared_boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/boundingBox */ \"./shared/boundingBox.ts\");\n/**\n * Create a paintable cached version for a shape.\n * @param {Shape} shape\n * @param {CanvasTile} tile\n * @constructor\n */\n\nclass ShapeCache {\n    constructor(shape, tile) {\n        this.shape = shape;\n        this.tile = tile;\n        this.bbox = this._getBBox();\n        this.canvas = this._getCanvas();\n        this.context = this.canvas.getContext(\"2d\");\n        this._paintShapePixels();\n    }\n    _getCanvas() {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = this.bbox.width + this._getSize();\n        canvas.height = this.bbox.height + this._getSize();\n        return canvas;\n    }\n    /**\n     * Save paint calls by merging pixels.\n     * First to lines, then combine lines to rectangles.\n     * Balance processing costs with paint saving costs.\n     */\n    _mergePixels(shapePixels) {\n        const lines = this._getLines(shapePixels);\n        return this._getRectangles(lines);\n    }\n    _getLines(pixels) {\n        let cache = null;\n        const lines = [];\n        pixels.sort().each(function (x, y) {\n            // cache: x,y,w\n            if (cache && x === cache[0] + cache[2] && y === cache[1]) {\n                cache[2]++;\n            }\n            else {\n                if (cache) {\n                    lines.push(cache);\n                }\n                cache = [x, y, 1];\n            }\n        });\n        if (cache) {\n            lines.push(cache);\n        }\n        return lines;\n    }\n    _getRectangles(lines) {\n        let cache = null;\n        const rectangles = [];\n        lines.sort(function (a, b) {\n            return a[0] - b[0];\n        });\n        for (let i = 0, m = lines.length; i < m; i++) {\n            // cache: x,y,w,h\n            if (cache &&\n                lines[i][0] === cache[0] &&\n                lines[i][1] === cache[1] + cache[3] &&\n                lines[i][2] === cache[2]) {\n                cache[3]++;\n            }\n            else {\n                if (cache) {\n                    rectangles.push(cache);\n                }\n                cache = lines[i];\n                cache.push(1);\n            }\n        }\n        if (cache) {\n            rectangles.push(cache);\n        }\n        return rectangles;\n    }\n    _fillBackground() {\n        const expand = this.shape.expand * this.tile.size * -1;\n        this.context.fillStyle = this.tile.off;\n        this.context.fillRect(expand, expand, this.bbox.width + this.tile.size - expand, this.bbox.height + this.tile.size - expand);\n    }\n    _getSize() {\n        return this.tile.size * this.shape.transform.scale;\n    }\n    _paintShapePixels() {\n        const size = this._getSize();\n        const rectangles = this._mergePixels(this.shape.pixels);\n        if (this.shape.flags.isOverlay) {\n            this._fillBackground();\n        }\n        this.context.fillStyle = this.tile.on;\n        for (let i = 0, m = rectangles.length; i < m; i++) {\n            this.context.fillRect(rectangles[i][0] * size - this.bbox.x0, rectangles[i][1] * size - this.bbox.y0, rectangles[i][2] * size, rectangles[i][3] * size);\n        }\n    }\n    _getBBox() {\n        const size = this._getSize();\n        const pixelBBox = this.shape.pixels.bbox();\n        const tileBBox = new _shared_boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        const tileBBoxKeys = Object.keys(pixelBBox);\n        for (let i = 0, m = tileBBoxKeys.length; i < m; i++) {\n            const k = tileBBoxKeys[i];\n            tileBBox[k] = pixelBBox[k] * size;\n        }\n        return tileBBox;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/shapeCache.ts?");

/***/ }),

/***/ "./client/ui/shapeClient.ts":
/*!**********************************!*\
  !*** ./client/ui/shapeClient.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"center\": () => (/* binding */ center),\n/* harmony export */   \"setGameTransform\": () => (/* binding */ setGameTransform),\n/* harmony export */   \"flash\": () => (/* binding */ flash),\n/* harmony export */   \"lifetime\": () => (/* binding */ lifetime),\n/* harmony export */   \"animate\": () => (/* binding */ animate),\n/* harmony export */   \"applyEffects\": () => (/* binding */ applyEffects)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _shared_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/util */ \"./shared/util.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n\n\n\n\nfunction center(shape, width = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH, height = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT) {\n    const bbox = shape.bbox();\n    const x = Math.round((width - bbox.width) / 2);\n    const y = Math.round((height - bbox.height) / 2);\n    shape.transform.translate = [x - bbox.x0, y - bbox.y0];\n}\nfunction setGameTransform(shape) {\n    shape.transform.scale = _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE;\n    shape.transform.translate[0] = shape.transform.translate[0] * _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE + _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE / _const__WEBPACK_IMPORTED_MODULE_2__.GAME_LEFT;\n    shape.transform.translate[1] = shape.transform.translate[1] * _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE + _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE / _const__WEBPACK_IMPORTED_MODULE_2__.GAME_TOP;\n}\nfunction flash(shape, on = _const__WEBPACK_IMPORTED_MODULE_2__.FRAME * 24, off = _const__WEBPACK_IMPORTED_MODULE_2__.FRAME * 6) {\n    let progress = 0;\n    const duration = [on, off];\n    shape.effects.flash = (delta) => {\n        progress += delta;\n        if (progress > duration[+!shape.flags.enabled]) {\n            progress -= duration[+!shape.flags.enabled];\n            shape.flags.enabled = !shape.flags.enabled;\n        }\n    };\n    return shape;\n}\nfunction lifetime(shape, start, end) {\n    let progress = 0;\n    let started = false;\n    shape.effects.lifetime = (delta) => {\n        // Start time reached.\n        if (start && progress >= start && !started) {\n            started = true;\n            shape.flags.enabled = true;\n        }\n        // Stop time reached.\n        if (end && progress >= end) {\n            const key = (0,_shared_util__WEBPACK_IMPORTED_MODULE_1__.getKey)(_state_state__WEBPACK_IMPORTED_MODULE_3__.State.shapes, shape);\n            if (key) {\n                _state_state__WEBPACK_IMPORTED_MODULE_3__.State.shapes[key] = null;\n            }\n        }\n        progress += delta;\n    };\n    return shape;\n}\nfunction animate(shape, options) {\n    let progress = 0;\n    options = Object.assign({ from: [0, 0], to: [0, 0], duration: 200, doneCallback: () => { }, progressCallback: () => { } }, options);\n    shape.effects.animate = (delta) => {\n        progress += delta;\n        const percent = Math.sqrt(progress / options.duration);\n        if (progress < options.duration) {\n            const x = Math.round(options.from[0] - (options.from[0] - options.to[0]) * percent);\n            const y = Math.round(options.from[1] - (options.from[1] - options.to[1]) * percent);\n            shape.transform.translate = [x, y];\n            options.progressCallback(shape, x, y);\n        }\n        else {\n            shape.transform.translate = options.to;\n            delete shape.effects.animate;\n            options.doneCallback(shape);\n        }\n    };\n    return shape;\n}\nfunction applyEffects(shape, delta) {\n    for (const k in shape.effects) {\n        shape.effects[k](delta);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/shapeClient.ts?");

/***/ }),

/***/ "./client/ui/switchRound.ts":
/*!**********************************!*\
  !*** ./client/ui/switchRound.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WrapupGame\": () => (/* binding */ WrapupGame)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _copy_copy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _util_clientUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/clientUtil */ \"./client/util/clientUtil.ts\");\n/* harmony import */ var _dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dialog */ \"./client/ui/dialog.ts\");\n\n\n\n\n\nclass WrapupGame {\n    constructor(players, winner) {\n        this.players = players;\n        this.winner = winner;\n        this.dialog = null;\n        this.countdownStarted = new Date();\n        this.countdownInterval = null;\n        this.showCountdown();\n    }\n    destruct() {\n        window.clearInterval(this.countdownInterval);\n        this.players = null;\n        this.winner = null;\n        if (this.dialog) {\n            this.dialog.destruct();\n            this.dialog = null;\n        }\n    }\n    getCountdownRemaining() {\n        let remaining = this.winner ? _shared_const__WEBPACK_IMPORTED_MODULE_0__.SECONDS_ROUND_GLOAT : _shared_const__WEBPACK_IMPORTED_MODULE_0__.SECONDS_ROUND_PAUSE;\n        remaining -= (+new Date() - +this.countdownStarted) / 1000;\n        return Math.max(0, Math.round(remaining));\n    }\n    getBody() {\n        return (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_3__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_ROUND_NEW_BODY, this.getCountdownRemaining());\n    }\n    showCountdown() {\n        const title = this.winner\n            ? (0,_util_clientUtil__WEBPACK_IMPORTED_MODULE_3__.format)(_copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_ROUND_WINNER_TITLE, String(this.winner.name))\n            : _copy_copy__WEBPACK_IMPORTED_MODULE_1__.COPY_ROUND_DRAW_TITLE;\n        this.dialog = new _dialog__WEBPACK_IMPORTED_MODULE_4__.Dialog(title, this.getBody(), {\n            keysBlocked: false,\n            width: 100,\n        });\n        this.countdownInterval = window.setInterval(function () {\n            _state_state__WEBPACK_IMPORTED_MODULE_2__.State.audio.play(\"menu_alt\");\n            this.dialog.setBody(this.getBody());\n        }.bind(this), 1000);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/switchRound.ts?");

/***/ }),

/***/ "./client/ui/transformClient.ts":
/*!**************************************!*\
  !*** ./client/ui/transformClient.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"outline\": () => (/* binding */ outline),\n/* harmony export */   \"zoomIn\": () => (/* binding */ zoomIn),\n/* harmony export */   \"zoom\": () => (/* binding */ zoom)\n/* harmony export */ });\n/* harmony import */ var _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/pixelCollection */ \"./shared/pixelCollection.ts\");\n/* harmony import */ var _shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/shapeGenerator */ \"./shared/shapeGenerator.ts\");\n/* harmony import */ var _shared_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/transform */ \"./shared/transform.ts\");\n/**\n * @param {Shape} shape\n * @param {number=} hPadding\n * @param {number=} vPadding\n * @param {boolean=} round\n * @return {Shape}\n */\n\n\n\nfunction outline(shape, hPadding = 6, vPadding = 6, round = true) {\n    let r;\n    let x0;\n    let x1;\n    let y0;\n    let y1;\n    let bbox = shape.bbox();\n    r = round ? 1 : 0;\n    hPadding = typeof hPadding === \"number\" ? hPadding : 6;\n    vPadding = typeof vPadding === \"number\" ? vPadding : 6;\n    // Keep in viewport\n    if (bbox.y0 - vPadding < 0) {\n        shape.set((0,_shared_transform__WEBPACK_IMPORTED_MODULE_2__.shift)(shape.pixels, 0, vPadding - bbox.y0));\n        bbox = shape.bbox();\n    }\n    x0 = bbox.x0 - hPadding;\n    x1 = bbox.x1 + hPadding;\n    y0 = bbox.y0 - vPadding;\n    y1 = bbox.y1 + vPadding;\n    shape.add((0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_1__.line)(x0, y0 + 1, x0, y1), // Left\n    (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_1__.line)(x0 + r, y0, x1 - r, y0), // Top\n    (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_1__.line)(x1, y0 + 1, x1, y1), // Right\n    (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_1__.line)(x0, y1, x1, y1), // Bottom\n    (0,_shared_shapeGenerator__WEBPACK_IMPORTED_MODULE_1__.line)(x0 + r, y1 + 1, x1 - r, y1 + 1) // Bottom 2\n    );\n    // Don't clear the missing pixel in the corners\n    // because of rounded corners:\n    shape.bbox(-1);\n    return shape;\n}\n/**\n * @param {PixelCollection} pixels\n * @param {number=} xshift\n * @param {number=} yshift\n * @return {PixelCollection}\n */\nfunction zoomIn(pixels, xshift = 0, yshift = 0) {\n    const ret = new _shared_pixelCollection__WEBPACK_IMPORTED_MODULE_0__.PixelCollection();\n    pixels.each(function (x, y) {\n        const xx = x * 2 + xshift;\n        const yy = y * 2 + yshift;\n        ret.add(xx, yy);\n        ret.add(xx, yy + 1);\n        ret.add(xx + 1, yy);\n        ret.add(xx + 1, yy + 1);\n    });\n    return ret;\n}\n/**\n * @param {number} zoomlevel (2 or 4)\n * @param {PixelCollection} pixels\n * @param {number=} shiftX\n * @param {number=} shiftY\n * @param {boolean=} antiAlising\n * @return {PixelCollection}\n */\nfunction zoom(zoomlevel, pixels, shiftX = 0, shiftY = 0, antiAlising = true) {\n    let zoomedPixels;\n    shiftX = shiftX || 0;\n    shiftY = shiftY || 0;\n    if (2 === zoomlevel) {\n        zoomedPixels = zoomIn(pixels, shiftX, shiftY);\n    }\n    else if (4 === zoomlevel) {\n        zoomedPixels = zoomIn(pixels);\n        zoomedPixels = zoomIn(zoomedPixels, shiftX, shiftY);\n    }\n    else {\n        return pixels; // Unsupported zoom level.\n    }\n    if (antiAlising !== false) {\n        pixels.each(function (x, y) {\n            for (let dirX = -1; dirX <= 1; dirX += 2) {\n                for (let dirY = -1; dirY <= 1; dirY += 2) {\n                    handlePixel(x, y, dirX, dirY);\n                }\n            }\n        });\n    }\n    function add(dirX, dirY, x, y) {\n        let baseY;\n        let baseX;\n        baseX = x * zoomlevel + shiftX;\n        baseY = y * zoomlevel + shiftY;\n        if (2 === zoomlevel) {\n            x = baseX + (dirX === -1 ? 0 : 1);\n            y = baseY + (dirY === -1 ? 0 : 1);\n            zoomedPixels.add(x, y);\n        }\n        if (4 === zoomlevel) {\n            // Anti-aliasing in all directions.\n            for (let dirX2 = -1; dirX2 <= 1; dirX2 += 2) {\n                for (let dirY2 = -1; dirY2 <= 1; dirY2 += 2) {\n                    if (dirX === dirX2 && dirY === dirY2) {\n                        addX4s(baseX, dirX2, baseY, dirY2);\n                    }\n                }\n            }\n        }\n    }\n    // XX#\n    //  XX\n    //   X\n    function addX4s(baseX, dirX2, baseY, dirY2) {\n        let compX;\n        let compY;\n        compX = baseX + (dirX2 === -1 ? 0 : 3);\n        compY = baseY + (dirY2 === -1 ? 0 : 3);\n        zoomedPixels.add(compX, compY);\n        zoomedPixels.add(compX - 1 * dirX2, compY);\n        zoomedPixels.add(compX - 2 * dirX2, compY);\n        zoomedPixels.add(compX - 1 * dirX2, compY - dirY2);\n        zoomedPixels.add(compX, compY - dirY2);\n        zoomedPixels.add(compX, compY - 2 * dirY2);\n    }\n    function handlePixel(x, y, dirX, dirY) {\n        // !X\n        // #!\n        if (!pixels.has(x, y - dirY) &&\n            !pixels.has(x + dirX, y) &&\n            pixels.has(x + dirX, y - dirY)) {\n            add(dirX, dirY, x, y - dirY);\n        }\n        // !X\n        // #X\n        if (!pixels.has(x - dirX, y - dirY - dirY) &&\n            !pixels.has(x - dirX, y - dirY) &&\n            !pixels.has(x, y - dirY - dirY) &&\n            !pixels.has(x, y - dirY) &&\n            pixels.has(x + dirX, y) &&\n            pixels.has(x + dirX, y - dirY) &&\n            // !XX\n            // #X\n            // Fixes: 0\n            (pixels.has(x + dirX + dirX, y - dirY) ||\n                //  !X\n                // !X!\n                // #X\n                // Fixes: z, Z, 2\n                (pixels.has(x + dirX + dirX, y - dirY - dirY) &&\n                    !pixels.has(x + dirX, y - dirY - dirY) &&\n                    !pixels.has(x + dirX + dirX, y - dirY)) ||\n                //  !X!\n                //  #X!\n                //   X!\n                //   XO\n                //    O\n                // Fixes: 1, 4, M, N\n                (pixels.has(x + dirX, y + dirY) &&\n                    pixels.has(x + dirX, y + dirY + dirY) &&\n                    !pixels.has(x - dirX, y) &&\n                    !pixels.has(x + dirX + dirX, y - dirY) &&\n                    !pixels.has(x + dirX + dirX, y) &&\n                    !pixels.has(x + dirX + dirX, y + dirY) &&\n                    (!pixels.has(x - dirX, y + dirY + dirY) || // Exclude b, d, p\n                        pixels.has(x + dirX + dirX, y + dirY + dirY + dirY) || // 1\n                        pixels.has(x + dirX + dirX, y + dirY + dirY)))) // 4\n        ) {\n            add(dirX, dirY, x, y - dirY);\n        }\n    }\n    return zoomedPixels;\n}\n\n\n//# sourceURL=webpack://xssnake/./client/ui/transformClient.ts?");

/***/ }),

/***/ "./client/util/clientUtil.ts":
/*!***********************************!*\
  !*** ./client/util/clientUtil.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"instruct\": () => (/* binding */ instruct),\n/* harmony export */   \"error\": () => (/* binding */ error),\n/* harmony export */   \"storage\": () => (/* binding */ storage),\n/* harmony export */   \"isMac\": () => (/* binding */ isMac),\n/* harmony export */   \"urlHash\": () => (/* binding */ urlHash),\n/* harmony export */   \"format\": () => (/* binding */ format),\n/* harmony export */   \"translateGame\": () => (/* binding */ translateGame),\n/* harmony export */   \"translateGameX\": () => (/* binding */ translateGameX),\n/* harmony export */   \"translateGameY\": () => (/* binding */ translateGameY),\n/* harmony export */   \"debounce\": () => (/* binding */ debounce)\n/* harmony export */ });\n/* harmony import */ var _shared_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/const */ \"./shared/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./client/const.ts\");\n/* harmony import */ var _state_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _ui_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/dialog */ \"./client/ui/dialog.ts\");\n/* harmony import */ var _ui_font__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/font */ \"./client/ui/font.ts\");\n/* harmony import */ var _ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n\n\n\n\n\n\nfunction instruct(str, duration = 2000, flashInstruct = false) {\n    const x = _shared_const__WEBPACK_IMPORTED_MODULE_0__.WIDTH - (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontWidth)(str) - 2;\n    const y = _shared_const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT - (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.fontHeight)(str) - 2;\n    const shape = (0,_ui_font__WEBPACK_IMPORTED_MODULE_4__.font)(str, x, y, { invert: true });\n    shape.flags.isOverlay = true;\n    (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__.lifetime)(shape, 0, duration);\n    if (flashInstruct) {\n        (0,_ui_shapeClient__WEBPACK_IMPORTED_MODULE_5__.flash)(shape);\n    }\n    _state_state__WEBPACK_IMPORTED_MODULE_2__.State.shapes.INSTRUCTION = shape;\n}\nfunction error(str, callback) {\n    urlHash();\n    const exit = function () {\n        dialog.destruct();\n        if (callback) {\n            callback();\n        }\n        _state_state__WEBPACK_IMPORTED_MODULE_2__.State.flow.restart();\n    };\n    const body = \"Press \" + _const__WEBPACK_IMPORTED_MODULE_1__.UC_ENTER_KEY + \" to continue\";\n    const dialog = new _ui_dialog__WEBPACK_IMPORTED_MODULE_3__.Dialog(str, body, {\n        type: _ui_dialog__WEBPACK_IMPORTED_MODULE_3__.Dialog.TYPE.ALERT,\n        ok: exit,\n    });\n}\nfunction storage(key, value) {\n    if (arguments.length === 1) {\n        try {\n            return JSON.parse(localStorage.getItem(key));\n        }\n        catch (err) {\n            localStorage.removeItem(key);\n        }\n        return \"\";\n    }\n    else if (arguments.length === 2) {\n        if (value === null) {\n            localStorage.removeItem(key);\n            return \"\";\n        }\n        else {\n            return localStorage.setItem(key, JSON.stringify(value));\n        }\n    }\n}\nfunction isMac() {\n    return /Macintosh/.test(navigator.appVersion);\n}\nfunction urlHash(key = \"\", value = \"\") {\n    let newhash = \"\";\n    const dict = {};\n    const hash = location.hash.substr(1);\n    const arr = hash.split(/[:;]/g);\n    // Populate dict\n    for (let i = 0, m = arr.length; i < m; i += 2) {\n        dict[arr[i]] = arr[i + 1];\n    }\n    switch (arguments.length) {\n        case 0: // Empty\n            if (location.hash) {\n                history.replaceState(null, \"\", location.pathname + location.search);\n            }\n            return;\n        case 1: // Return value\n            return dict[key] || \"\";\n        case 2: // Set value\n            dict[key] = value;\n            for (const k in dict) {\n                if (k && dict[k]) {\n                    newhash += k + \":\" + dict[k] + \";\";\n                }\n            }\n            location.replace(\"#\" + newhash.replace(/;$/, \"\"));\n            return value;\n    }\n}\nfunction format(str, ...data) {\n    return str.replace(/{(\\d+)}/g, (match, number) => {\n        return String(data[number]);\n    });\n}\nfunction translateGame(coordinate) {\n    coordinate[0] = translateGameX(coordinate[0]);\n    coordinate[1] = translateGameY(coordinate[1]);\n    return coordinate;\n}\nfunction translateGameX(x) {\n    return x * _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE + _const__WEBPACK_IMPORTED_MODULE_1__.GAME_LEFT;\n}\nfunction translateGameY(y) {\n    return y * _shared_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TILE + _const__WEBPACK_IMPORTED_MODULE_1__.GAME_TOP;\n}\nfunction debounce(fn, delay = 100) {\n    let timeout;\n    return (...args) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            timeout = null;\n            // TODO: Promise, await, async.\n            fn(...args);\n        }, delay);\n    };\n}\n\n\n//# sourceURL=webpack://xssnake/./client/util/clientUtil.ts?");

/***/ }),

/***/ "./shared/boundingBox.ts":
/*!*******************************!*\
  !*** ./shared/boundingBox.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BoundingBox\": () => (/* binding */ BoundingBox)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const */ \"./shared/const.ts\");\n\nclass BoundingBox {\n    constructor(pixels) {\n        this.x0 = 0;\n        this.x1 = 0;\n        this.y0 = 0;\n        this.y1 = 0;\n        this.width = 0;\n        this.height = 0;\n        if (pixels) {\n            this.calculate(pixels);\n        }\n    }\n    expand(expand) {\n        this.x0 -= expand;\n        this.y0 -= expand;\n        this.x1 += expand;\n        this.y1 += expand;\n        this.setDimensions();\n        return this;\n    }\n    calculate(pixels) {\n        let x0 = _const__WEBPACK_IMPORTED_MODULE_0__.WIDTH;\n        let x1 = 0;\n        let y0 = _const__WEBPACK_IMPORTED_MODULE_0__.HEIGHT;\n        let y1 = 0;\n        pixels.each(function (x, y) {\n            if (x0 > x) {\n                x0 = x;\n            }\n            if (x1 < x) {\n                x1 = x;\n            }\n            if (y0 > y) {\n                y0 = y;\n            }\n            if (y1 < y) {\n                y1 = y;\n            }\n        });\n        this.x0 = x0;\n        this.x1 = x1;\n        this.y0 = y0;\n        this.y1 = y1;\n        this.setDimensions();\n        return this;\n    }\n    setDimensions() {\n        this.width = this.x1 - this.x0;\n        this.height = this.y1 - this.y0;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/boundingBox.ts?");

/***/ }),

/***/ "./shared/config.ts":
/*!**************************!*\
  !*** ./shared/config.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SERVER_HOST\": () => (/* binding */ SERVER_HOST),\n/* harmony export */   \"SERVER_PORT\": () => (/* binding */ SERVER_PORT),\n/* harmony export */   \"SERVER_PATH\": () => (/* binding */ SERVER_PATH),\n/* harmony export */   \"SERVER_ENDPOINT\": () => (/* binding */ SERVER_ENDPOINT)\n/* harmony export */ });\nconst SERVER_HOST = \"127.0.0.1\";\nconst SERVER_PORT = 8001;\nconst SERVER_PATH = \"\";\nconst SERVER_ENDPOINT = SERVER_HOST + \":\" + SERVER_PORT + SERVER_PATH;\n\n\n//# sourceURL=webpack://xssnake/./shared/config.ts?");

/***/ }),

/***/ "./shared/const.ts":
/*!*************************!*\
  !*** ./shared/const.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WIDTH\": () => (/* binding */ WIDTH),\n/* harmony export */   \"HEIGHT\": () => (/* binding */ HEIGHT),\n/* harmony export */   \"GAME_TILE\": () => (/* binding */ GAME_TILE),\n/* harmony export */   \"NC_CHAT_NOTICE\": () => (/* binding */ NC_CHAT_NOTICE),\n/* harmony export */   \"NC_CHAT_MESSAGE\": () => (/* binding */ NC_CHAT_MESSAGE),\n/* harmony export */   \"NC_GAME_DESPAWN\": () => (/* binding */ NC_GAME_DESPAWN),\n/* harmony export */   \"NC_GAME_STATE\": () => (/* binding */ NC_GAME_STATE),\n/* harmony export */   \"NC_GAME_SPAWN\": () => (/* binding */ NC_GAME_SPAWN),\n/* harmony export */   \"NC_PING\": () => (/* binding */ NC_PING),\n/* harmony export */   \"NC_PONG\": () => (/* binding */ NC_PONG),\n/* harmony export */   \"NC_PLAYER_NAME\": () => (/* binding */ NC_PLAYER_NAME),\n/* harmony export */   \"NC_PLAYERS_SERIALIZE\": () => (/* binding */ NC_PLAYERS_SERIALIZE),\n/* harmony export */   \"NC_ROOM_JOIN_KEY\": () => (/* binding */ NC_ROOM_JOIN_KEY),\n/* harmony export */   \"NC_ROOM_JOIN_MATCHING\": () => (/* binding */ NC_ROOM_JOIN_MATCHING),\n/* harmony export */   \"NC_ROOM_SERIALIZE\": () => (/* binding */ NC_ROOM_SERIALIZE),\n/* harmony export */   \"NC_ROOM_START\": () => (/* binding */ NC_ROOM_START),\n/* harmony export */   \"NC_ROOM_STATUS\": () => (/* binding */ NC_ROOM_STATUS),\n/* harmony export */   \"NC_ROOM_JOIN_ERROR\": () => (/* binding */ NC_ROOM_JOIN_ERROR),\n/* harmony export */   \"NC_OPTIONS_SERIALIZE\": () => (/* binding */ NC_OPTIONS_SERIALIZE),\n/* harmony export */   \"NC_ROUND_SERIALIZE\": () => (/* binding */ NC_ROUND_SERIALIZE),\n/* harmony export */   \"NC_ROUND_COUNTDOWN\": () => (/* binding */ NC_ROUND_COUNTDOWN),\n/* harmony export */   \"NC_ROUND_START\": () => (/* binding */ NC_ROUND_START),\n/* harmony export */   \"NC_ROUND_WRAPUP\": () => (/* binding */ NC_ROUND_WRAPUP),\n/* harmony export */   \"NC_SCORE_UPDATE\": () => (/* binding */ NC_SCORE_UPDATE),\n/* harmony export */   \"NC_SNAKE_ACTION\": () => (/* binding */ NC_SNAKE_ACTION),\n/* harmony export */   \"NC_SNAKE_CRASH\": () => (/* binding */ NC_SNAKE_CRASH),\n/* harmony export */   \"NC_SNAKE_SIZE\": () => (/* binding */ NC_SNAKE_SIZE),\n/* harmony export */   \"NC_SNAKE_SPEED\": () => (/* binding */ NC_SNAKE_SPEED),\n/* harmony export */   \"NC_SNAKE_UPDATE\": () => (/* binding */ NC_SNAKE_UPDATE),\n/* harmony export */   \"NC_XSS\": () => (/* binding */ NC_XSS),\n/* harmony export */   \"SE_PLAYER_DISCONNECT\": () => (/* binding */ SE_PLAYER_DISCONNECT),\n/* harmony export */   \"SE_PLAYER_COLLISION\": () => (/* binding */ SE_PLAYER_COLLISION),\n/* harmony export */   \"HEARTBEAT_INTERVAL_MS\": () => (/* binding */ HEARTBEAT_INTERVAL_MS),\n/* harmony export */   \"GAME_SHIFT_MAP\": () => (/* binding */ GAME_SHIFT_MAP),\n/* harmony export */   \"DIRECTION_LEFT\": () => (/* binding */ DIRECTION_LEFT),\n/* harmony export */   \"DIRECTION_UP\": () => (/* binding */ DIRECTION_UP),\n/* harmony export */   \"DIRECTION_RIGHT\": () => (/* binding */ DIRECTION_RIGHT),\n/* harmony export */   \"DIRECTION_DOWN\": () => (/* binding */ DIRECTION_DOWN),\n/* harmony export */   \"ROOM_KEY_LENGTH\": () => (/* binding */ ROOM_KEY_LENGTH),\n/* harmony export */   \"ROOM_CAPACITY\": () => (/* binding */ ROOM_CAPACITY),\n/* harmony export */   \"ROUNDS_MAX\": () => (/* binding */ ROUNDS_MAX),\n/* harmony export */   \"ROOM_WIN_BY_MIN\": () => (/* binding */ ROOM_WIN_BY_MIN),\n/* harmony export */   \"PLAYER_NAME_MINLENGTH\": () => (/* binding */ PLAYER_NAME_MINLENGTH),\n/* harmony export */   \"PLAYER_NAME_MAXWIDTH\": () => (/* binding */ PLAYER_NAME_MAXWIDTH),\n/* harmony export */   \"SECONDS_ROUND_PAUSE\": () => (/* binding */ SECONDS_ROUND_PAUSE),\n/* harmony export */   \"SECONDS_ROUND_GLOAT\": () => (/* binding */ SECONDS_ROUND_GLOAT),\n/* harmony export */   \"SECONDS_ROUNDSET_GLOAT\": () => (/* binding */ SECONDS_ROUNDSET_GLOAT),\n/* harmony export */   \"SECONDS_ROUND_COUNTDOWN\": () => (/* binding */ SECONDS_ROUND_COUNTDOWN),\n/* harmony export */   \"SPAWN_SOMETHING_EVERY\": () => (/* binding */ SPAWN_SOMETHING_EVERY),\n/* harmony export */   \"SPAWN_CHANCE_APPLE\": () => (/* binding */ SPAWN_CHANCE_APPLE),\n/* harmony export */   \"SNAKE_SPEED\": () => (/* binding */ SNAKE_SPEED),\n/* harmony export */   \"SNAKE_SIZE\": () => (/* binding */ SNAKE_SIZE),\n/* harmony export */   \"FIELD_VALUE_EASY\": () => (/* binding */ FIELD_VALUE_EASY),\n/* harmony export */   \"FIELD_VALUE_MEDIUM\": () => (/* binding */ FIELD_VALUE_MEDIUM),\n/* harmony export */   \"FIELD_VALUE_HARD\": () => (/* binding */ FIELD_VALUE_HARD),\n/* harmony export */   \"ROOM_JOINABLE\": () => (/* binding */ ROOM_JOINABLE),\n/* harmony export */   \"ROOM_INVALID_KEY\": () => (/* binding */ ROOM_INVALID_KEY),\n/* harmony export */   \"ROOM_FULL\": () => (/* binding */ ROOM_FULL),\n/* harmony export */   \"ROOM_NOT_FOUND\": () => (/* binding */ ROOM_NOT_FOUND),\n/* harmony export */   \"ROOM_IN_PROGRESS\": () => (/* binding */ ROOM_IN_PROGRESS),\n/* harmony export */   \"ROOM_UNKNOWN_ERROR\": () => (/* binding */ ROOM_UNKNOWN_ERROR),\n/* harmony export */   \"CRASH_UNKNOWN\": () => (/* binding */ CRASH_UNKNOWN),\n/* harmony export */   \"CRASH_WALL\": () => (/* binding */ CRASH_WALL),\n/* harmony export */   \"CRASH_MOVING_WALL\": () => (/* binding */ CRASH_MOVING_WALL),\n/* harmony export */   \"CRASH_SELF\": () => (/* binding */ CRASH_SELF),\n/* harmony export */   \"CRASH_OPPONENT\": () => (/* binding */ CRASH_OPPONENT),\n/* harmony export */   \"CRASH_OPPONENT_DRAW\": () => (/* binding */ CRASH_OPPONENT_DRAW),\n/* harmony export */   \"NETCODE_PING_INTERVAL\": () => (/* binding */ NETCODE_PING_INTERVAL),\n/* harmony export */   \"NETCODE_SYNC_MS\": () => (/* binding */ NETCODE_SYNC_MS),\n/* harmony export */   \"VALIDATE_SUCCES\": () => (/* binding */ VALIDATE_SUCCES),\n/* harmony export */   \"VALIDATE_ERR_GAP\": () => (/* binding */ VALIDATE_ERR_GAP),\n/* harmony export */   \"VALIDATE_ERR_NO_COMMON\": () => (/* binding */ VALIDATE_ERR_NO_COMMON),\n/* harmony export */   \"VALIDATE_ERR_MISMATCHES\": () => (/* binding */ VALIDATE_ERR_MISMATCHES),\n/* harmony export */   \"SCORE_LEADING\": () => (/* binding */ SCORE_LEADING),\n/* harmony export */   \"SCORE_NEUTRAL\": () => (/* binding */ SCORE_NEUTRAL),\n/* harmony export */   \"SCORE_BEHIND\": () => (/* binding */ SCORE_BEHIND),\n/* harmony export */   \"SPAWN_APPLE\": () => (/* binding */ SPAWN_APPLE),\n/* harmony export */   \"SPAWN_POWERUP\": () => (/* binding */ SPAWN_POWERUP),\n/* harmony export */   \"NOTICE_CRASH\": () => (/* binding */ NOTICE_CRASH),\n/* harmony export */   \"NOTICE_JOIN\": () => (/* binding */ NOTICE_JOIN),\n/* harmony export */   \"NOTICE_DISCONNECT\": () => (/* binding */ NOTICE_DISCONNECT),\n/* harmony export */   \"NOTICE_NEW_ROUND\": () => (/* binding */ NOTICE_NEW_ROUND)\n/* harmony export */ });\nconst WIDTH = 256;\nconst HEIGHT = 161;\nconst GAME_TILE = 4;\nconst NC_CHAT_NOTICE = 10;\nconst NC_CHAT_MESSAGE = 11;\nconst NC_GAME_DESPAWN = 20;\nconst NC_GAME_STATE = 21;\nconst NC_GAME_SPAWN = 22;\nconst NC_PING = 0;\nconst NC_PONG = 1;\nconst NC_PLAYER_NAME = 30;\nconst NC_PLAYERS_SERIALIZE = 31;\nconst NC_ROOM_JOIN_KEY = 40;\nconst NC_ROOM_JOIN_MATCHING = 41;\nconst NC_ROOM_SERIALIZE = 42;\nconst NC_ROOM_START = 43;\nconst NC_ROOM_STATUS = 44;\nconst NC_ROOM_JOIN_ERROR = 45;\nconst NC_OPTIONS_SERIALIZE = 47;\nconst NC_ROUND_SERIALIZE = 50;\nconst NC_ROUND_COUNTDOWN = 51;\nconst NC_ROUND_START = 52;\nconst NC_ROUND_WRAPUP = 53;\nconst NC_SCORE_UPDATE = 60;\nconst NC_SNAKE_ACTION = 70;\nconst NC_SNAKE_CRASH = 71;\nconst NC_SNAKE_SIZE = 72;\nconst NC_SNAKE_SPEED = 73;\nconst NC_SNAKE_UPDATE = 74;\nconst NC_XSS = 666;\n// Server EventEmitters\nconst SE_PLAYER_DISCONNECT = 101;\nconst SE_PLAYER_COLLISION = 102;\nconst HEARTBEAT_INTERVAL_MS = 5000;\nconst GAME_SHIFT_MAP = [\n    [-1, 0],\n    [0, -1],\n    [1, 0],\n    [0, 1],\n];\nconst DIRECTION_LEFT = 0;\nconst DIRECTION_UP = 1;\nconst DIRECTION_RIGHT = 2;\nconst DIRECTION_DOWN = 3;\nconst ROOM_KEY_LENGTH = 5;\nconst ROOM_CAPACITY = 6;\nconst ROUNDS_MAX = 3;\nconst ROOM_WIN_BY_MIN = 2;\nconst PLAYER_NAME_MINLENGTH = 1;\nconst PLAYER_NAME_MAXWIDTH = 36;\nconst SECONDS_ROUND_PAUSE = 3;\nconst SECONDS_ROUND_GLOAT = 5;\nconst SECONDS_ROUNDSET_GLOAT = 10;\nconst SECONDS_ROUND_COUNTDOWN = 3;\nconst SPAWN_SOMETHING_EVERY = [20, 60];\nconst SPAWN_CHANCE_APPLE = 0.9;\nconst SNAKE_SPEED = 120;\nconst SNAKE_SIZE = 4;\nconst FIELD_VALUE_EASY = 1;\nconst FIELD_VALUE_MEDIUM = 2;\nconst FIELD_VALUE_HARD = 3;\nconst ROOM_JOINABLE = 1;\nconst ROOM_INVALID_KEY = 2;\nconst ROOM_FULL = 3;\nconst ROOM_NOT_FOUND = 4;\nconst ROOM_IN_PROGRESS = 5;\nconst ROOM_UNKNOWN_ERROR = 6;\nconst CRASH_UNKNOWN = 0;\nconst CRASH_WALL = 1;\nconst CRASH_MOVING_WALL = 2;\nconst CRASH_SELF = 3;\nconst CRASH_OPPONENT = 4;\nconst CRASH_OPPONENT_DRAW = 5;\nconst NETCODE_PING_INTERVAL = 3000;\nconst NETCODE_SYNC_MS = 500;\nconst VALIDATE_SUCCES = 0;\nconst VALIDATE_ERR_GAP = 1;\nconst VALIDATE_ERR_NO_COMMON = 2;\nconst VALIDATE_ERR_MISMATCHES = 3;\nconst SCORE_LEADING = 1;\nconst SCORE_NEUTRAL = 2;\nconst SCORE_BEHIND = 3;\nconst SPAWN_APPLE = 1;\nconst SPAWN_POWERUP = 2;\nconst NOTICE_CRASH = 1;\nconst NOTICE_JOIN = 2;\nconst NOTICE_DISCONNECT = 3;\nconst NOTICE_NEW_ROUND = 4;\n\n\n//# sourceURL=webpack://xssnake/./shared/const.ts?");

/***/ }),

/***/ "./shared/data/levels.ts":
/*!*******************************!*\
  !*** ./shared/data/levels.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"levels\": () => (/* binding */ levels)\n/* harmony export */ });\n// TODO: Import images using from \"import file.png\"\nconst levels = {\n    blank: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhCAYAAABug3M0AAAATklEQVR4Xu3XsQ0AMAgDQe/K/jMQKWOY+47y5Irs4eDh/5WdmS3suxLLw8PD9wcPDw8PDw+f7X5sLA8PD38heHh4eHh4+JQ/Nrm+PDz8A9XeSXZnpGoTAAAAAElFTkSuQmCC\",\n    },\n    borobudur: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEX///8AAABjY2P/AP///wD/AAAA//8A/wAAAP/e3t6UsGDPAAAAt0lEQVR4XoVUwQpDIQxredvdHL152va7Hvu3o1b6VoZEqoQQQl6tT0RVdHqt1Zufm1FdGGcBgjwKYj3HWfChDiUDAEhvCqBlhhBHdbPpAjNrSW4BlsAd4A69JSmSZ+TbQTZZT6QAVXC7KeC7khnSoU3flUy8jN0h0L9gR0sUdTcqeiSSqF5Wdhlto7vV1/gV9CJ4UQeagXwF6wPtJL8Lfpt8HvhE8ZnkU83fxWOcBW/uwF83/T98AR09bCcOuGr0AAAAAElFTkSuQmCC\",\n    },\n    break_out: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAG1BMVEX///8AAABjY2P/AP///wD/AAAA//8A/wAAAP/yjXqqAAAAT0lEQVR4XmMgCBgFBQUFBIEAO4OwgsFjBW67CCsgFQgCAYrthBUMEcCqwIATaDBgA4wCDPgBowADvQEzHl+oMQwVwILHF+pYcgDhLEIqAABRVwy8UdO8QwAAAABJRU5ErkJggg==\",\n    },\n    crosshair: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAG1BMVEUAAAAAAP8A/wAA//9jY2P/AAD/AP///wD////y32ryAAAAQElEQVQ4y2PowA8aGNAFyFDQ6oFbgSN1rKC7go4hqqDNA7+CBgYE4IAIIokwELDCeYgGVMMQVdCOJ2c50SXZAwC+PiE3lNCmnQAAAABJRU5ErkJggg==\",\n    },\n    destination: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEUAAAAAAP8A/wAA//9jY2Pe3t7/AAD/AP///wD///9GJQNIAAAAvUlEQVR4XtWSOw7CMBBEp3ExxwIqOjcuuNVUwN6W0eJYIPIrEBLJevUsvYwtbRDrj74hXM/LwmEz4W8EF1yEi1QgkmRkCmosF7XwVoHqbVKpKmQXwMBTKBCGUF8Son9HKYZgGndQJoCT0O/AXcO6rQzrtCvBiyGaaQS9sk8YYUzRHuYEoRl7ZWyPM5Rmwb2muyhkWAEqwzQJRjcMIV8zZgQDRyo6qEdtCnoThNcjwDmBH8L2sO4rwzr+5Ld/APOp8o3zmfzSAAAAAElFTkSuQmCC\",\n    },\n    lines: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAG1BMVEX///8AAABjY2P/AP///wD/AAAA//8A/wAAAP/yjXqqAAAANElEQVR4XmOgB2BVYMAJNBiGCmAURAABBgYGBkEkwDBsADOeyFJjGFRgNDZZ8ESWOgM9AACt5gQS0D0R6gAAAABJRU5ErkJggg==\",\n    },\n    noise: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAG1BMVEX///8AAABjY2P/AP///wD/AAAA//8A/wAAAP/yjXqqAAAA1klEQVR4Xm2SUWoAMRBCfbT9d26wX23vf8JCkckKGViiq5k4JJJGliT0Lv9T59uyJDyqDWvCEiYUOdLXU8ba+auqPpCGq7T7zlwdWB3JNSSL8bp92hReD4KALRweZQ9lsjrS1IRGbH+RYeFE7sDkwkp1ZSU4vMtNKfZRl9Xwu9wnZd5Eqe4fHskrEXhL5uK2RUads2+C0u42DBah1mw/uQezJOZkozv1w3eez0Q2BFBenOaiXl/k6bhd67yXTQwWn09pvDf/ECBMVonRJP31QN4axX1L+weknwhwgGDMTAAAAABJRU5ErkJggg==\",\n    },\n    onion_jack: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEUAAAAAAP8A/wAA//9jY2Pe3t7/AAD/AP///wD///9GJQNIAAAAxUlEQVR4Xq3TMQ7CQAwFUTcUORZQpUuz99oK8G2J+RbzC5Q0uIo0T4qy3kQez4zHmjO+s2SGz97E4jI+s4N+UhdoAaBfBSQA3RXmghCgCwRCwHsUMCFgvcDmooD3AsNEUe+xFTAhQB8CJgpYF0Ao0AVYg6Z7zzzd5jl4rkf9/o9XTP+IXq1dKz8onSRiVOGo2QWiAV0AIUBv4KIAnfuQvm46NwqxA+8CiALpvQGiAB2AmPFa6YASDZIOQMxQ//13Z97Ot/kG5IqEQIQLV+oAAAAASUVORK5CYII=\",\n    },\n    pacman: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEX///8AAADe3t5jY2P/AP///wAA////AAAA/wAAAP9PyCv5AAAA8ElEQVR4XoWUQa7CMBBDvQCxpZzguSdghfj3v9hXgjWkDdARijqW7UkmE7T8jqvWMdywDYK43FXRCajiT4gw2498tiQwwr0WXnC0bklghDsVG6eusckXIjo3XQIHNCiVSzQmrCAkj6LRDr1O4aHsuCFvThHRLiF9+OyQPtTRUUU1RSiSNK8WYohSlNwEfYnn+zZxlh5dXA6c7iVG63JDLpuHtHFAtlE5THugOSFPezBm50A6gcLOPHQoSTdCYU/zEFcU9nQXcUVJprsItiGoYk9YmSYqWAjfZjIEf51q+/hdcPyyOP94m09x+LoP/x/+Ad2aaMxTh/MAAAAAAElFTkSuQmCC\",\n    },\n    poles: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAG1BMVEX///8AAABjY2P/AP///wD/AAAA//8A/wAAAP/yjXqqAAAAM0lEQVR4XmOgB2BVYGBgEMAiwcjAoMEAATgVMNBVwagCZjyRpTa4fDGqgAVPZKkz0AMAAMU7Aq0z0hzLAAAAAElFTkSuQmCC\",\n    },\n    pong: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEX/AP8AAP8A//8A/wD//wD/AAD////e3t5jY2MAAADDo6s2AAAAa0lEQVR4XmNIww8S0BVk4lUwcxqCRCiYiVAwvQxElmNRgDAhE8WEDDGEAoRefCbgdwPCF/gUpJGmgHIrMtQSSImLzGnYrYhAKMBjArWim3QrMsyoYgUHHgWZ0/BYgVBAggkDZoUHZVbQI7oB0wCqOZbN5p0AAAAASUVORK5CYII=\",\n    },\n    space_invaders: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEX///8AAADe3t5jY2P/AAD/AP///wAA/wAA//8AAP8mgNz0AAAAw0lEQVR4Xt2QUWoDMRBDl2kJ/bVOMJoT5Cg5So6SI3ekXSiMKfQjX31rr/Rsg8HHW4g8sza9IByxctOrnZULu57NNZZ2proRqkSXTa+jXunAVFNgdQQLOdWQ8KVYzF1dqUoWdjUZ0dG/nPouQqNJjaGGqXEUjkBOFYGWNhYLUwX9dIEOYFM//iI6oG9qwyUyHJjaUEvMcyenNmQVqVurMFVELCJ6JzWnmgqV0LTWj/4fPhz33+un60N+c33Kv1xff7jgGwmLICypShLuAAAAAElFTkSuQmCC\",\n    },\n    tetris: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAHlBMVEX///8AAABjY2MAAP///wD/AP/e3t4A//8A/wD/AABsPeryAAAA00lEQVR4Xn2SwY7DQAhDbaldaW/mDyLtof3/L9yDpzIqtBySQTw7QAaJAn6EL0GAn4DSAZyUbOj4vQAGLRCCefx1k+pfYIGYEVuov/s5ugDsQKwD1HnIFM3BLSloagIIyFicLPEEB8AAtomYtVmvRWiYeg1hTfkUzs1xWUbIrYT7lcI79UAPVvpnwdkUUlA2uvkqfLx1cjZg7YzaZmOjDdRoXinGaF6LdeaIU1LW3f9jM6meqoEEPem8+ARtvGz4dll/rpo68MS+36pWmKGZjMUl0T8jrgix90FavwAAAABJRU5ErkJggg==\",\n    },\n    traps: {\n        imagedata: \"iVBORw0KGgoAAAANSUhEUgAAAD8AAAAhBAMAAACcrW4HAAAAG1BMVEUAAAAAAP8A/wAA//9jY2P/AAD/AP///wD////y32ryAAAAYklEQVR4Xr2TQQqAMAwE/Zp66bP2os6zpV4ClSWXkD2UNpnC0mY3QITWvSqAa2AA2FGHhykHRDMK/xpGhcAUcfiWtSl3G1AFcA+MBzhRg4f0HRr+IpuHfKJakvX4ZHG0JOsFYY0Jj60hQlQAAAAASUVORK5CYII=\",\n    },\n};\n\n\n//# sourceURL=webpack://xssnake/./shared/data/levels.ts?");

/***/ }),

/***/ "./shared/game/collision.ts":
/*!**********************************!*\
  !*** ./shared/game/collision.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Collision\": () => (/* binding */ Collision)\n/* harmony export */ });\n/**\n * @param {Coordinate} part\n * @param {number} into\n * @constructor\n */\nclass Collision {\n    constructor(location, into) {\n        this.location = location;\n        this.into = into;\n        this.tick = 0;\n    }\n    serialize() {\n        return this.location;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/game/collision.ts?");

/***/ }),

/***/ "./shared/game/snakeMove.ts":
/*!**********************************!*\
  !*** ./shared/game/snakeMove.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SnakeMove\": () => (/* binding */ SnakeMove)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./shared/const.ts\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collision */ \"./shared/game/collision.ts\");\n\n\nclass SnakeMove {\n    constructor(snake, players, level, location) {\n        this.snake = snake;\n        this.players = players;\n        this.level = level;\n        this.location = location;\n        this.collision = this.getCollission();\n    }\n    getParts(part) {\n        const parts = this.snake.parts.slice();\n        parts.unshift();\n        parts.push(part);\n        return parts;\n    }\n    getCollission() {\n        const parts = this.getParts(this.location);\n        for (let i = 0, m = parts.length; i < m; i++) {\n            const collision = this.getCollisionPart(i, parts[i]);\n            if (collision) {\n                return collision;\n            }\n        }\n        return null;\n    }\n    getCollisionPart(index, part) {\n        let players;\n        let levelData;\n        let partIndex;\n        players = this.players;\n        levelData = this.level.data;\n        if (index > 4) {\n            partIndex = this.snake.getPartIndex(part);\n            if (-1 !== partIndex && index !== partIndex) {\n                return new _collision__WEBPACK_IMPORTED_MODULE_1__.Collision(part, _const__WEBPACK_IMPORTED_MODULE_0__.CRASH_SELF);\n            }\n        }\n        if (levelData.isWall(part[0], part[1])) {\n            return new _collision__WEBPACK_IMPORTED_MODULE_1__.Collision(part, _const__WEBPACK_IMPORTED_MODULE_0__.CRASH_WALL);\n        }\n        if (levelData.isMovingWall(part)) {\n            return new _collision__WEBPACK_IMPORTED_MODULE_1__.Collision(part, _const__WEBPACK_IMPORTED_MODULE_0__.CRASH_MOVING_WALL);\n        }\n        for (let i = 0, m = players.length; i < m; i++) {\n            const opponentSnake = players[i].snake;\n            if (opponentSnake.crashed === false &&\n                opponentSnake !== this.snake &&\n                opponentSnake.hasPart(part)) {\n                return new _collision__WEBPACK_IMPORTED_MODULE_1__.Collision(part, _const__WEBPACK_IMPORTED_MODULE_0__.CRASH_OPPONENT);\n            }\n        }\n        return null;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/game/snakeMove.ts?");

/***/ }),

/***/ "./shared/level/data.ts":
/*!******************************!*\
  !*** ./shared/level/data.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LevelData\": () => (/* binding */ LevelData)\n/* harmony export */ });\n/* harmony import */ var _client_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/const */ \"./client/const.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./shared/const.ts\");\n/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parser */ \"./shared/level/parser.ts\");\n\n\n\nclass LevelData {\n    constructor(imagedata, animations) {\n        const parser = new _parser__WEBPACK_IMPORTED_MODULE_2__.Parser(imagedata);\n        this.width = imagedata.width;\n        this.height = imagedata.height;\n        this.walls = parser.walls;\n        this.spawns = parser.spawns;\n        this.unreachables = parser.unreachables;\n        this.animations = animations;\n    }\n    isWall(x, y) {\n        if (this.outOfBounds(x, y)) {\n            return true;\n        }\n        else if (this.walls.has(x, y)) {\n            return true;\n        }\n        return false;\n    }\n    isMovingWall(coordinate) {\n        for (let i = 0, m = this.animations.walls.length; i < m; i++) {\n            if (this.inShapes(this.animations.walls[i], coordinate)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    inShapes(shapeCollection, coordinate) {\n        for (let i = 0, m = shapeCollection.shapes.length; i < m; i++) {\n            const shape = shapeCollection.shapes[i];\n            if (shape) {\n                const translate = shape.transform.translate;\n                const translated = this.convertToGameSystem(coordinate, translate);\n                if (shape.pixels.has(translated[0], translated[1])) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * Translate coordinate to game coordinate system.\n     */\n    convertToGameSystem(coordinate, translate) {\n        let tx;\n        let ty;\n        if (true) {\n            // In Client, Game transforms left/top. Not ideal, but it is done\n            // so that we can move shapes without losing cache => performance.\n            tx = (translate[0] - _client_const__WEBPACK_IMPORTED_MODULE_0__.GAME_LEFT) / _const__WEBPACK_IMPORTED_MODULE_1__.GAME_TILE;\n            ty = (translate[1] - _client_const__WEBPACK_IMPORTED_MODULE_0__.GAME_TOP) / _const__WEBPACK_IMPORTED_MODULE_1__.GAME_TILE;\n        }\n        else {}\n        return [coordinate[0] - tx, coordinate[1] - ty];\n    }\n    getSpawn(playerID) {\n        return this.spawns[playerID].location;\n    }\n    getSpawnDirection(playerID) {\n        return this.spawns[playerID].direction;\n    }\n    getEmptyLocation(nonEmptyLocations) {\n        let maxTries = 50;\n        while (--maxTries) {\n            const location = [\n                Math.floor(Math.random() * this.width),\n                Math.floor(Math.random() * this.height),\n            ];\n            if (this.isEmptyLocation(nonEmptyLocations, location)) {\n                return location;\n            }\n        }\n    }\n    isEmptyLocation(nonEmptyLocations, location) {\n        if (this.isWall(location[0], location[1])) {\n            return false;\n        }\n        if (this.unreachables.has(location[0], location[1])) {\n            return false;\n        }\n        for (let i = 0, m = nonEmptyLocations.length; i < m; i++) {\n            const nonE = nonEmptyLocations[i];\n            if (nonE && nonE[0] === location[0] && nonE[1] === location[1]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    outOfBounds(x, y) {\n        if (x < 0 || y < 0) {\n            return true;\n        }\n        else {\n            return x >= this.width || y >= this.height;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/level/data.ts?");

/***/ }),

/***/ "./shared/level/gravity.ts":
/*!*********************************!*\
  !*** ./shared/level/gravity.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Gravity\": () => (/* binding */ Gravity)\n/* harmony export */ });\n/**\n * Gravity pulls snakes and power-ups a certain direction.\n *\n * gravity is an array with two numbers. The first number is tiles per second to\n * the left or right, second number is tiles per second up or down.\n *\n * Example 1: [-5, -5] pulls objects to top-left.\n * Example 2: [5, 5] pulls objects to bottom-right.\n * Example 2: [-5, 0] pulls objects to the left only.\n */\nclass Gravity {\n    constructor(gravity = [0, 0]) {\n        this.gravity = gravity;\n        this.progress = [0, 0];\n    }\n    getShift(elapsed) {\n        return [this.updateInDirection(elapsed, 0), this.updateInDirection(elapsed, 1)];\n    }\n    updateInDirection(delta, direction) {\n        if (this.gravity[direction]) {\n            const treshold = 1000 / Math.abs(this.gravity[direction]);\n            this.progress[direction] += delta;\n            if (this.progress[direction] > treshold) {\n                this.progress[direction] -= treshold;\n                return this.gravity[direction] > 0 ? 1 : -1;\n            }\n        }\n        return 0;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/level/gravity.ts?");

/***/ }),

/***/ "./shared/level/level.ts":
/*!*******************************!*\
  !*** ./shared/level/level.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Level\": () => (/* binding */ Level)\n/* harmony export */ });\n/* harmony import */ var _client_level_imageDecoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/level/imageDecoder */ \"./client/level/imageDecoder.ts\");\n/* harmony import */ var _client_state_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _client_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../client/ui/clientShapeGenerator */ \"./client/ui/clientShapeGenerator.ts\");\n/* harmony import */ var _client_ui_shapeClient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../client/ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n/* harmony import */ var _levelanim_registry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../levelanim/registry */ \"./shared/levelanim/registry.ts\");\n/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shape */ \"./shared/shape.ts\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data */ \"./shared/level/data.ts\");\n/* harmony import */ var _gravity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gravity */ \"./shared/level/gravity.ts\");\n\n\n\n\n\n\n\n\nclass Level {\n    constructor(config) {\n        this.config = config;\n        this.config = config;\n        this.animations = new _levelanim_registry__WEBPACK_IMPORTED_MODULE_4__.LevelAnimationRegistry();\n        this.gravity = new _gravity__WEBPACK_IMPORTED_MODULE_7__.Gravity(this.config.gravity);\n        this.data = config.level.cache || null;\n    }\n    registerAnimations() {\n        // () => {}?\n    }\n    /**\n     * Client-Only!\n     * TODO: Create and add to level.ClientLevel instead.\n     */\n    destruct() {\n        if (true) {\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.level = null;\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.innerborder = null;\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.outerBorderLeft = null;\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.outerBorderRight = null;\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.outerBorderTop = null;\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.outerBorderBottom = null;\n        }\n    }\n    /**\n     * Client-Only!\n     * TODO: Create and add to level.ClientLevel instead.\n     */\n    paint() {\n        if (true) {\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.level = new _shape__WEBPACK_IMPORTED_MODULE_5__.Shape(this.data.walls);\n            (0,_client_ui_shapeClient__WEBPACK_IMPORTED_MODULE_3__.setGameTransform)(_client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.level);\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes.innerborder = (0,_client_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_2__.innerBorder)();\n            Object.assign(_client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes, (0,_client_ui_clientShapeGenerator__WEBPACK_IMPORTED_MODULE_2__.outerBorder)());\n        }\n    }\n    preload(continueFn) {\n        const level = this.config.level;\n        if (level.cache) {\n            continueFn();\n        }\n        else {\n            new _client_level_imageDecoder__WEBPACK_IMPORTED_MODULE_0__.ImageDecoder(level.imagedata).then(function (data) {\n                level.cache = new _data__WEBPACK_IMPORTED_MODULE_6__.LevelData(data, this.animations);\n                level.imagedata = null;\n                this.data = level.cache;\n                this.registerAnimations();\n                continueFn();\n            }.bind(this));\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/level/level.ts?");

/***/ }),

/***/ "./shared/level/parser.ts":
/*!********************************!*\
  !*** ./shared/level/parser.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Parser\": () => (/* binding */ Parser)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ \"./shared/const.ts\");\n/* harmony import */ var _pixelCollection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../pixelCollection */ \"./shared/pixelCollection.ts\");\n/* harmony import */ var _spawn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./spawn */ \"./shared/level/spawn.ts\");\n\n\n\n/**\n * @param {ImageData} imagedata\n * @constructor\n */\nclass Parser {\n    constructor(imagedata) {\n        this.width = imagedata.width;\n        this.height = imagedata.height;\n        this.walls = new _pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection();\n        this.unreachables = new _pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection();\n        this.spawns = new Array(_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_CAPACITY);\n        this.spawnCoordinates = new Array(_const__WEBPACK_IMPORTED_MODULE_0__.ROOM_CAPACITY);\n        this.spawnDirections = [];\n        this.parsePixels(imagedata);\n        this.generateSpawns();\n    }\n    parsePixels(imagedata) {\n        const data = imagedata.data;\n        for (let i = 0, m = data.length / 4; i < m; i++) {\n            this.parsePixel([data[i * 4], data[i * 4 + 1], data[i * 4 + 2]], [i % this.width, Math.floor(i / this.width)]);\n        }\n    }\n    parsePixel(rgb, coordinate) {\n        function rgbEquals(r, g, b) {\n            return rgb[0] === r && rgb[1] === g && rgb[2] === b;\n        }\n        if (rgbEquals(0, 0, 0)) {\n            this.walls.add(coordinate[0], coordinate[1]);\n        }\n        else if (rgbEquals(222, 222, 222)) {\n            this.unreachables.add(coordinate[0], coordinate[1]);\n        }\n        else if (rgbEquals(99, 99, 99)) {\n            this.spawnDirections.push(coordinate);\n        }\n        else if (rgbEquals(255, 0, 0)) {\n            this.spawnCoordinates[0] = coordinate;\n        }\n        else if (rgbEquals(0, 255, 0)) {\n            this.spawnCoordinates[1] = coordinate;\n        }\n        else if (rgbEquals(0, 0, 255)) {\n            this.spawnCoordinates[2] = coordinate;\n        }\n        else if (rgbEquals(255, 255, 0)) {\n            this.spawnCoordinates[3] = coordinate;\n        }\n        else if (rgbEquals(255, 0, 255)) {\n            this.spawnCoordinates[4] = coordinate;\n        }\n        else if (rgbEquals(0, 255, 255)) {\n            this.spawnCoordinates[5] = coordinate;\n        }\n        else if (!rgbEquals(255, 255, 255)) {\n            throw new Error(\"Unknown color: \" + rgb + \" \" + \"at \" + coordinate);\n        }\n    }\n    generateSpawns() {\n        for (let i = 0, m = this.spawnCoordinates.length; i < m; i++) {\n            const spawnCoordinate = this.spawnCoordinates[i];\n            if (spawnCoordinate) {\n                this.spawns[i] = new _spawn__WEBPACK_IMPORTED_MODULE_2__.Spawn(spawnCoordinate, this.getDirectionForSpawn(spawnCoordinate));\n            }\n            else {\n                throw new Error(\"Missing spawn with index: \" + i);\n            }\n        }\n    }\n    getDirectionForSpawn(spawn) {\n        for (let i = 0, m = this.spawnDirections.length; i < m; i++) {\n            if (!this.spawnDirections[i]) {\n                continue;\n            }\n            const dx = spawn[0] - this.spawnDirections[i][0];\n            const dy = spawn[1] - this.spawnDirections[i][1];\n            if (1 === Math.abs(dx) + Math.abs(dy)) {\n                if (dx === 0) {\n                    return dy === 1 ? _const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_UP : _const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_DOWN;\n                }\n                else {\n                    return dx === 1 ? _const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_LEFT : _const__WEBPACK_IMPORTED_MODULE_0__.DIRECTION_RIGHT;\n                }\n            }\n        }\n        throw new Error(\"Spawn at \" + spawn + \" is missing a direction\");\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/level/parser.ts?");

/***/ }),

/***/ "./shared/level/spawn.ts":
/*!*******************************!*\
  !*** ./shared/level/spawn.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Spawn\": () => (/* binding */ Spawn)\n/* harmony export */ });\nclass Spawn {\n    constructor(location, direction) {\n        this.location = location;\n        this.direction = direction;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/level/spawn.ts?");

/***/ }),

/***/ "./shared/levelanim/registry.ts":
/*!**************************************!*\
  !*** ./shared/levelanim/registry.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LevelAnimationRegistry\": () => (/* binding */ LevelAnimationRegistry)\n/* harmony export */ });\n/* harmony import */ var _client_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/const */ \"./client/const.ts\");\n/* harmony import */ var _client_state_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _client_ui_shapeClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../client/ui/shapeClient */ \"./client/ui/shapeClient.ts\");\n\n\n\nclass LevelAnimationRegistry {\n    constructor() {\n        this.animations = [];\n        this.walls = [];\n        this.started = false;\n        this.progress = 0;\n    }\n    register(animation) {\n        this.animations.push(animation);\n    }\n    update(delta, started) {\n        this.progress += delta;\n        this.started = started;\n        this.walls = this.updateAnimations();\n        this.updateShapes();\n    }\n    updateAnimations() {\n        const walls = [];\n        for (let i = 0, m = this.animations.length; i < m; i++) {\n            const shapeCollection = this.updateAnimation(this.animations[i]);\n            if (shapeCollection) {\n                walls.push(shapeCollection);\n            }\n        }\n        return walls;\n    }\n    updateAnimation(animation) {\n        return animation.update(this.progress, this.started);\n    }\n    updateShapes() {\n        for (let i = 0, m = this.walls.length; i < m; i++) {\n            if (this.walls[i]) {\n                this._updateShapes(i, this.walls[i]);\n            }\n        }\n    }\n    _updateShapes(animIndex, shapeCollection) {\n        const shapes = shapeCollection.shapes;\n        for (let i = 0, m = shapes.length; i < m; i++) {\n            this._updateShape([_client_const__WEBPACK_IMPORTED_MODULE_0__.NS_ANIM, animIndex, i].join(\"_\"), shapes[i]);\n        }\n    }\n    _updateShape(key, shape) {\n        if (shape) {\n            if (!shape.headers.transformed) {\n                (0,_client_ui_shapeClient__WEBPACK_IMPORTED_MODULE_2__.setGameTransform)(shape);\n                shape.headers.transformed = true;\n            }\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes[key] = shape;\n        }\n        else {\n            _client_state_state__WEBPACK_IMPORTED_MODULE_1__.State.shapes[key] = null;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levelanim/registry.ts?");

/***/ }),

/***/ "./shared/levels/debug/blank.ts":
/*!**************************************!*\
  !*** ./shared/levels/debug/blank.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BlankLevel\": () => (/* binding */ BlankLevel)\n/* harmony export */ });\n/* harmony import */ var _data_levels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/levels */ \"./shared/data/levels.ts\");\n/* harmony import */ var _level_level__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../level/level */ \"./shared/level/level.ts\");\n\n\nclass BlankLevel extends _level_level__WEBPACK_IMPORTED_MODULE_1__.Level {\n    constructor(config) {\n        super(config);\n        config.level = _data_levels__WEBPACK_IMPORTED_MODULE_0__.levels.blank;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levels/debug/blank.ts?");

/***/ }),

/***/ "./shared/levels/debug/crosshair.ts":
/*!******************************************!*\
  !*** ./shared/levels/debug/crosshair.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CrosshairLevel\": () => (/* binding */ CrosshairLevel)\n/* harmony export */ });\n/* harmony import */ var _data_levels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/levels */ \"./shared/data/levels.ts\");\n/* harmony import */ var _level_level__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../level/level */ \"./shared/level/level.ts\");\n\n\nclass CrosshairLevel extends _level_level__WEBPACK_IMPORTED_MODULE_1__.Level {\n    constructor() {\n        super(...arguments);\n        this.level = _data_levels__WEBPACK_IMPORTED_MODULE_0__.levels.crosshair;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levels/debug/crosshair.ts?");

/***/ }),

/***/ "./shared/levels/debug/lines.ts":
/*!**************************************!*\
  !*** ./shared/levels/debug/lines.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LinesLevel\": () => (/* binding */ LinesLevel)\n/* harmony export */ });\n/* harmony import */ var _data_levels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/levels */ \"./shared/data/levels.ts\");\n/* harmony import */ var _level_level__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../level/level */ \"./shared/level/level.ts\");\n\n\nclass LinesLevel extends _level_level__WEBPACK_IMPORTED_MODULE_1__.Level {\n    constructor() {\n        super(...arguments);\n        this.level = _data_levels__WEBPACK_IMPORTED_MODULE_0__.levels.lines;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levels/debug/lines.ts?");

/***/ }),

/***/ "./shared/levelset/config.ts":
/*!***********************************!*\
  !*** ./shared/levelset/config.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Config\": () => (/* binding */ Config)\n/* harmony export */ });\n/* harmony import */ var _data_levels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/levels */ \"./shared/data/levels.ts\");\n\nclass Config {\n    constructor() {\n        this.level = _data_levels__WEBPACK_IMPORTED_MODULE_0__.levels.blank;\n        this.gravity = [0, 0];\n        this.enableApples = true;\n        this.enablePowerups = [];\n        this.snakeSize = 4;\n        this.snakeSpeed = 120; // Change tile every ms.\n        this.snakeIncrease = 1;\n        this.pointsApple = 1;\n        this.pointsKnockout = 3;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levelset/config.ts?");

/***/ }),

/***/ "./shared/levelset/levelset.ts":
/*!*************************************!*\
  !*** ./shared/levelset/levelset.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Levelset\": () => (/* binding */ Levelset)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./shared/util.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"./shared/levelset/config.ts\");\n\n\nclass Levelset {\n    constructor() {\n        this.title = \"\";\n        this.levels = [];\n        this.loaded = false;\n    }\n    getConfig() {\n        return new _config__WEBPACK_IMPORTED_MODULE_1__.Config();\n    }\n    getLevel(index) {\n        return this.levels[index];\n    }\n    register(Level) {\n        this.levels.push(new Level(this.getConfig()));\n    }\n    preload(continueFn) {\n        let loaded = 0;\n        const checkAllLoaded = function () {\n            if (++loaded === this.levels.length) {\n                continueFn();\n            }\n        }.bind(this);\n        if (this.levels.length) {\n            for (let i = 0, m = this.levels.length; i < m; i++) {\n                this.levels[i].preload(checkAllLoaded);\n            }\n        }\n        else {\n            continueFn();\n        }\n    }\n    getRandomLevelIndex(levelsPlayed) {\n        const notPlayed = this.levels.slice();\n        if (notPlayed.length <= 1) {\n            return 0;\n        }\n        // All levels were played.\n        // Play any level except the one just played.\n        if (this.levels.length === levelsPlayed.length) {\n            levelsPlayed.splice(0, levelsPlayed.length - 1);\n        }\n        for (let i = 0, m = levelsPlayed.length; i < m; i++) {\n            notPlayed.splice(levelsPlayed[i], 1);\n        }\n        return (0,_util__WEBPACK_IMPORTED_MODULE_0__.randomArrIndex)(notPlayed);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levelset/levelset.ts?");

/***/ }),

/***/ "./shared/levelset/registry.ts":
/*!*************************************!*\
  !*** ./shared/levelset/registry.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Registry\": () => (/* binding */ Registry)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./shared/util.ts\");\n\n/**\n * @constructor\n */\nclass Registry {\n    constructor() {\n        this.levelsets = [];\n        this.loaded = false;\n    }\n    register(levelset) {\n        this.levelsets.push(levelset);\n    }\n    preloadLevels(continueFn = () => { }) {\n        let checkAllLoaded;\n        let loaded = 0;\n        checkAllLoaded = function () {\n            if (++loaded === this.levelsets.length) {\n                this.loaded = true;\n                continueFn();\n            }\n        }.bind(this);\n        for (let i = 0, m = this.levelsets.length; i < m; i++) {\n            this.levelsets[i].preload(checkAllLoaded);\n        }\n    }\n    getLevelset(index) {\n        return this.levelsets[index];\n    }\n    /**\n     * @return {Array.<Array.<number|string>>}\n     */\n    getAsFieldValues() {\n        const values = [];\n        for (let i = 0, m = this.levelsets.length; i < m; i++) {\n            values.push([i, this.levelsets[i].title.toUpperCase()]);\n        }\n        return values;\n    }\n    /**\n     * @return {number}\n     */\n    getRandomLevelsetIndex() {\n        return (0,_util__WEBPACK_IMPORTED_MODULE_0__.randomArrIndex)(this.levelsets);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levelset/registry.ts?");

/***/ }),

/***/ "./shared/levelsets/basic.ts":
/*!***********************************!*\
  !*** ./shared/levelsets/basic.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Basic\": () => (/* binding */ Basic)\n/* harmony export */ });\n/* harmony import */ var _client_copy_copy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/copy/copy */ \"./client/copy/copy.ts\");\n/* harmony import */ var _levelset_levelset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../levelset/levelset */ \"./shared/levelset/levelset.ts\");\n\n\nclass Basic extends _levelset_levelset__WEBPACK_IMPORTED_MODULE_1__.Levelset {\n    constructor() {\n        super(...arguments);\n        this.title = _client_copy_copy__WEBPACK_IMPORTED_MODULE_0__.COPY_LEVELSET_BASIC;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/levelsets/basic.ts?");

/***/ }),

/***/ "./shared/pixelCollection.ts":
/*!***********************************!*\
  !*** ./shared/pixelCollection.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PixelCollection\": () => (/* binding */ PixelCollection)\n/* harmony export */ });\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./shared/boundingBox.ts\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util */ \"./shared/util.ts\");\n\n\n/**\n * Shape pixels stored in a multi-dimensional array.\n * I tried using Uint8Array, but performance was bad.\n */\nclass PixelCollection {\n    constructor(pixels = []) {\n        this.pixels = pixels;\n    }\n    add(x, y) {\n        const pixels = this.pixels;\n        if (pixels[y]) {\n            pixels[y].push(x);\n        }\n        else {\n            pixels[y] = [x];\n        }\n        return this;\n    }\n    bbox() {\n        return new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox(this);\n    }\n    addPairs(pairs) {\n        for (let i = 0, m = pairs.length; i < m; i++) {\n            this.add(pairs[i][0], pairs[i][1]);\n        }\n        return this;\n    }\n    sort() {\n        const pixels = this.pixels;\n        for (let i = 0, m = pixels.length; i < m; i++) {\n            if (pixels[i]) {\n                pixels[i] = (0,_util__WEBPACK_IMPORTED_MODULE_1__.sort)(pixels[i]);\n            }\n        }\n        return this;\n    }\n    each(callback) {\n        const pixels = this.pixels;\n        for (let y = 0, m = pixels.length; y < m; y++) {\n            const row = pixels[y];\n            if (row) {\n                for (let i = 0, mm = row.length; i < mm; i++) {\n                    callback(row[i], y);\n                }\n            }\n        }\n    }\n    index(x, y) {\n        const row = this.pixels[y];\n        if (row) {\n            for (let i = 0, m = row.length; i < m; i++) {\n                if (row[i] === x) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n    has(x, y) {\n        return -1 !== this.index(x, y);\n    }\n    remove(x, y) {\n        const index = this.index(x, y);\n        if (-1 !== index) {\n            this.pixels[y].splice(index, 1);\n        }\n        return this;\n    }\n    removeLine(y) {\n        if (this.pixels[y]) {\n            this.pixels[y].length = 0;\n        }\n        return this;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/pixelCollection.ts?");

/***/ }),

/***/ "./shared/room/player.ts":
/*!*******************************!*\
  !*** ./shared/room/player.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Player\": () => (/* binding */ Player)\n/* harmony export */ });\nclass Player {\n    constructor(name = \"\") {\n        this.name = name;\n        this.connected = false;\n        this.score = 0;\n        this.snake = null;\n    }\n    deserialize(serialized) {\n        let byte;\n        [this.name, byte] = serialized;\n        this.connected = Boolean((byte & 1) >> 0);\n        this.local = Boolean((byte & 2) >> 1);\n        this.score = byte >> 2;\n    }\n    serialize(local) {\n        return [\n            this.name,\n            (Number(this.connected) << 0) | (Number(local) << 1) | (this.score << 2),\n        ];\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/room/player.ts?");

/***/ }),

/***/ "./shared/room/playerRegistry.ts":
/*!***************************************!*\
  !*** ./shared/room/playerRegistry.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlayerRegistry\": () => (/* binding */ PlayerRegistry)\n/* harmony export */ });\nclass PlayerRegistry {\n    constructor() {\n        this.players = [];\n    }\n    destruct() {\n        this.players.length = 0;\n    }\n    serialize(localPlayer) {\n        const serialized = [];\n        for (let i = 0, m = this.players.length; i < m; i++) {\n            serialized.push(this.players[i].serialize(localPlayer === this.players[i]));\n        }\n        return serialized;\n    }\n    add(player) {\n        this.players.push(player);\n    }\n    remove(player) {\n        const index = this.players.indexOf(player);\n        if (-1 !== index) {\n            this.players.splice(index, 1);\n        }\n    }\n    getTotal() {\n        return this.players.length;\n    }\n    isHost(player) {\n        return 0 === this.players.indexOf(player);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/room/playerRegistry.ts?");

/***/ }),

/***/ "./shared/room/roomOptions.ts":
/*!************************************!*\
  !*** ./shared/room/roomOptions.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RoomOptions\": () => (/* binding */ RoomOptions)\n/* harmony export */ });\n/* harmony import */ var _client_state_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/state/state */ \"./client/state/state.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../const */ \"./shared/const.ts\");\n/* harmony import */ var _util_sanitizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/sanitizer */ \"./shared/util/sanitizer.ts\");\n\n\n\nclass RoomOptions {\n    constructor() {\n        this.isQuickGame = false;\n        this.maxPlayers = 6;\n        this.levelset = 0;\n        this.hasPowerups = true;\n        this.isPrivate = false;\n        this.isXSS = false;\n    }\n    destruct() { }\n    serialize() {\n        return [\n            this.maxPlayers,\n            this.levelset,\n            Number(this.isQuickGame),\n            Number(this.hasPowerups),\n            Number(this.isPrivate),\n            Number(this.isXSS),\n        ];\n    }\n    deserialize(serialized) {\n        this.maxPlayers = new _util_sanitizer__WEBPACK_IMPORTED_MODULE_2__.Sanitizer(serialized[0])\n            .assertBetween(1, _const__WEBPACK_IMPORTED_MODULE_1__.ROOM_CAPACITY)\n            .getValueOr(_const__WEBPACK_IMPORTED_MODULE_1__.ROOM_CAPACITY);\n        this.levelset = new _util_sanitizer__WEBPACK_IMPORTED_MODULE_2__.Sanitizer(serialized[1])\n            .assertBetween(0, _client_state_state__WEBPACK_IMPORTED_MODULE_0__.State.levelsetRegistry.levelsets.length - 1)\n            .getValueOr(0);\n        this.isQuickGame = Boolean(serialized[2]);\n        this.hasPowerups = Boolean(serialized[3]);\n        this.isPrivate = Boolean(serialized[4]);\n        this.isXSS = Boolean(serialized[5]);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/room/roomOptions.ts?");

/***/ }),

/***/ "./shared/room/round.ts":
/*!******************************!*\
  !*** ./shared/room/round.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Round\": () => (/* binding */ Round)\n/* harmony export */ });\n/* harmony import */ var _client_state_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/state/state */ \"./client/state/state.ts\");\n\nclass Round {\n    constructor(players, options) {\n        this.players = players;\n        this.options = options;\n        this.levelsetIndex = null;\n        this.levelIndex = null;\n        this.levelset = null;\n        this.level = null;\n        this.index = 0;\n        this.started = false;\n    }\n    serialize() {\n        return [this.levelsetIndex, this.levelIndex];\n    }\n    deserialize(serialized) {\n        this.levelsetIndex = serialized[0];\n        this.levelIndex = serialized[1];\n    }\n    getLevel(levelsetIndex, levelIndex) {\n        const levelset = _client_state_state__WEBPACK_IMPORTED_MODULE_0__.State.levelsetRegistry.getLevelset(levelsetIndex);\n        return levelset.getLevel(levelIndex);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/room/round.ts?");

/***/ }),

/***/ "./shared/shape.ts":
/*!*************************!*\
  !*** ./shared/shape.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Shape\": () => (/* binding */ Shape)\n/* harmony export */ });\n/* harmony import */ var _client_ui_transformClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../client/ui/transformClient */ \"./client/ui/transformClient.ts\");\n/* harmony import */ var _pixelCollection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pixelCollection */ \"./shared/pixelCollection.ts\");\n\n\nclass Shape {\n    constructor(...pixelCollections) {\n        this.cache = null;\n        this.effects = {};\n        this.expand = 0;\n        this.flags = {\n            enabled: true,\n            isOverlay: false,\n        };\n        this.mask = null;\n        this.pixels = new _pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection();\n        this.transform = { translate: [0, 0], scale: 1 };\n        this.add(...pixelCollections);\n    }\n    clone() {\n        return new Shape(this.pixels);\n    }\n    outline(hPadding = 0, vPadding = 0) {\n        (0,_client_ui_transformClient__WEBPACK_IMPORTED_MODULE_0__.outline)(this, hPadding, vPadding);\n        return this;\n    }\n    invert(bbox) {\n        const pixels = this.pixels;\n        const inverted = new _pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection();\n        bbox = bbox || this.bbox();\n        for (let x = bbox.x0; x <= bbox.x1; x++) {\n            for (let y = bbox.y0; y < bbox.y1; y++) {\n                if (!pixels.has(x, y)) {\n                    inverted.add(x, y);\n                }\n            }\n        }\n        return this.set(inverted);\n    }\n    uncache() {\n        this.cache = null;\n        this._bbox = null;\n        return this;\n    }\n    set(...pixelCollections) {\n        this.pixels = new _pixelCollection__WEBPACK_IMPORTED_MODULE_1__.PixelCollection();\n        return this.add(...pixelCollections);\n    }\n    add(...pixelCollections) {\n        const add = this.pixels.add.bind(this.pixels);\n        for (let i = 0, m = pixelCollections.length; i < m; i++) {\n            pixelCollections[i].each(add);\n        }\n        return this.uncache();\n    }\n    remove(...pixelCollections) {\n        const remove = this.pixels.remove.bind(this.pixels);\n        for (let i = 0, m = pixelCollections.length; i < m; i++) {\n            pixelCollections[i].each(remove);\n        }\n        return this.uncache();\n    }\n    /**\n     * @param {number=} expand\n     * @return {BoundingBox}\n     */\n    bbox(expand = 0) {\n        if (!this._bbox || this.expand !== expand) {\n            this._bbox = this.pixels.bbox();\n            if (expand) {\n                this._bbox.expand(expand);\n            }\n        }\n        this.expand = expand;\n        return this._bbox;\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/shape.ts?");

/***/ }),

/***/ "./shared/shapeGenerator.ts":
/*!**********************************!*\
  !*** ./shared/shapeGenerator.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"lineShape\": () => (/* binding */ lineShape),\n/* harmony export */   \"radianLine\": () => (/* binding */ radianLine),\n/* harmony export */   \"line\": () => (/* binding */ line)\n/* harmony export */ });\n/* harmony import */ var _pixelCollection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pixelCollection */ \"./shared/pixelCollection.ts\");\n/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shape */ \"./shared/shape.ts\");\n\n\nfunction lineShape(x0, y0, x1, y1) {\n    return new _shape__WEBPACK_IMPORTED_MODULE_1__.Shape(line(x0, y0, x1, y1));\n}\nfunction radianLine(xc, yc, radian, length) {\n    const x0 = xc + (length / 2) * Math.cos(radian);\n    const y0 = yc + (length / 2) * Math.sin(radian);\n    const x1 = xc + (length / 2) * Math.cos(radian + Math.PI);\n    const y1 = yc + (length / 2) * Math.sin(radian + Math.PI);\n    return line(Math.round(x0), Math.round(y0), Math.round(x1), Math.round(y1));\n}\n/**\n * Bresenham's line algorithm\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @return {PixelCollection}\n */\nfunction line(x0, y0, x1, y1) {\n    let pixels;\n    let dx;\n    let sx;\n    let dy;\n    let sy;\n    let err;\n    let err2;\n    pixels = new _pixelCollection__WEBPACK_IMPORTED_MODULE_0__.PixelCollection();\n    dx = Math.abs(x1 - x0);\n    sx = x0 < x1 ? 1 : -1;\n    dy = Math.abs(y1 - y0);\n    sy = y0 < y1 ? 1 : -1;\n    err = (dx > dy ? dx : -dy) / 2;\n    while (true) {\n        pixels.add(x0, y0);\n        if (x0 === x1 && y0 === y1) {\n            break;\n        }\n        err2 = err;\n        if (err2 > -dx) {\n            err -= dy;\n            x0 += sx;\n        }\n        if (err2 < dy) {\n            err += dx;\n            y0 += sy;\n        }\n    }\n    return pixels;\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/shapeGenerator.ts?");

/***/ }),

/***/ "./shared/snake.ts":
/*!*************************!*\
  !*** ./shared/snake.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Snake\": () => (/* binding */ Snake)\n/* harmony export */ });\nclass Snake {\n    constructor(index, level) {\n        this.index = index;\n        const spawn = level.data.spawns[index];\n        /** Head is last in array */\n        this.parts = [spawn.location];\n        this.direction = spawn.direction;\n        this.size = level.config.snakeSize;\n        this.speed = level.config.snakeSpeed;\n        this.crashed = false;\n        this.collision = null;\n        this.gravity = null;\n    }\n    /**\n     * @param {Coordinate} position\n     */\n    move(position) {\n        this.parts.push(position);\n        this.trimParts();\n    }\n    /**\n     * @return {Coordinate}\n     */\n    getHead() {\n        return this.parts[this.parts.length - 1];\n    }\n    hasPartPredict(part) {\n        const treshold = this.crashed ? -1 : 0;\n        return this.getPartIndex(part) > treshold;\n    }\n    trimParts() {\n        while (this.parts.length > this.size) {\n            this.parts.shift();\n        }\n    }\n    hasPart(part) {\n        return -1 !== this.getPartIndex(part);\n    }\n    getPartIndex(part) {\n        const parts = this.parts;\n        for (let i = 0, m = parts.length; i < m; i++) {\n            if (parts[i][0] === part[0] && parts[i][1] === part[1]) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    shiftParts(shift) {\n        const x = shift[0] || 0;\n        const y = shift[1] || 0;\n        if (x || y) {\n            for (let i = 0, m = this.parts.length; i < m; i++) {\n                this.parts[i][0] += x;\n                this.parts[i][1] += y;\n            }\n        }\n    }\n    /**\n     * Head-tail switch.\n     */\n    reverse() {\n        let dx;\n        let dy;\n        dx = this.parts[0][0] - this.parts[1][0];\n        dy = this.parts[0][1] - this.parts[1][1];\n        if (dx === 0) {\n            this.direction = dy === -1 ? 1 : 3;\n        }\n        else {\n            this.direction = dx === -1 ? 0 : 2;\n        }\n        this.parts.reverse();\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/snake.ts?");

/***/ }),

/***/ "./shared/transform.ts":
/*!*****************************!*\
  !*** ./shared/transform.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"shift\": () => (/* binding */ shift)\n/* harmony export */ });\n/* harmony import */ var _pixelCollection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pixelCollection */ \"./shared/pixelCollection.ts\");\n/**\n * @param {PixelCollection} pixels\n * @param {number=} xshift\n * @param {number=} yshift\n * @return {PixelCollection}\n */\n\nfunction shift(pixels, xshift = 0, yshift = 0) {\n    let ret;\n    if (xshift === 0 && yshift === 0) {\n        return pixels; // No shift\n    }\n    ret = new _pixelCollection__WEBPACK_IMPORTED_MODULE_0__.PixelCollection();\n    pixels.each(function (x, y) {\n        ret.add(x + xshift, y + yshift);\n    });\n    return ret;\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/transform.ts?");

/***/ }),

/***/ "./shared/util.ts":
/*!************************!*\
  !*** ./shared/util.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"randomRange\": () => (/* binding */ randomRange),\n/* harmony export */   \"randomArrItem\": () => (/* binding */ randomArrItem),\n/* harmony export */   \"randomArrIndex\": () => (/* binding */ randomArrIndex),\n/* harmony export */   \"randomStr\": () => (/* binding */ randomStr),\n/* harmony export */   \"ensureIndexWithinBounds\": () => (/* binding */ ensureIndexWithinBounds),\n/* harmony export */   \"average\": () => (/* binding */ average),\n/* harmony export */   \"delta\": () => (/* binding */ delta),\n/* harmony export */   \"eq\": () => (/* binding */ eq),\n/* harmony export */   \"getKey\": () => (/* binding */ getKey),\n/* harmony export */   \"sort\": () => (/* binding */ sort),\n/* harmony export */   \"benchmark\": () => (/* binding */ benchmark),\n/* harmony export */   \"getRandomName\": () => (/* binding */ getRandomName)\n/* harmony export */ });\n/**\n * @param {number} min\n * @param {number} max\n * @return {number}\n */\nfunction randomRange(min, max) {\n    return min + Math.floor(Math.random() * (max - min + 1));\n}\n/**\n * @param {Array} arr\n * @return {?}\n */\nfunction randomArrItem(arr) {\n    return arr[Math.floor(Math.random() * arr.length)];\n}\n/**\n * @param {Array} arr\n * @return {number}\n */\nfunction randomArrIndex(arr) {\n    return Math.floor(Math.random() * arr.length);\n}\n/**\n * @param {number=} len\n * @return {string}\n */\nfunction randomStr(len = 3) {\n    return Math.random().toString(36).substr(2, len);\n}\n/**\n * Ensure an array index is within bounds.\n * @param {number} index\n * @param {Array} arr\n * @return {number}\n */\nfunction ensureIndexWithinBounds(index, arr) {\n    const len = arr.length;\n    if (index >= len) {\n        return 0;\n    }\n    else if (index < 0) {\n        return len - 1;\n    }\n    return index;\n}\nfunction average(numbers) {\n    let total = 0;\n    const m = numbers.length;\n    for (let i = 0; i < m; i++) {\n        total += numbers[i];\n    }\n    return m ? total / m : 0;\n}\n/**\n * @param {Coordinate} a\n * @param {Coordinate} b\n * @return {number}\n */\nfunction delta(a, b) {\n    return Math.abs(a[0] - b[0]) + Math.abs(a[1] - b[1]);\n}\n/**\n * @param {Coordinate} a\n * @param {Coordinate} b\n * @return {boolean}\n */\nfunction eq(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * @param {*} obj\n * @param {*} val\n * @return {?string}\n */\nfunction getKey(obj, val) {\n    for (const k in obj) {\n        if (obj.hasOwnProperty(k) && val === obj[k]) {\n            return k;\n        }\n    }\n    return null;\n}\n/**\n * Faster sorting function.\n * http://jsperf.com/javascript-sort/\n *\n * @param {Array.<number>} arr\n * @return {Array.<number>}\n */\nfunction sort(arr) {\n    for (let i = 1; i < arr.length; i++) {\n        const tmp = arr[i];\n        let index = i;\n        while (arr[index - 1] > tmp) {\n            arr[index] = arr[index - 1];\n            --index;\n        }\n        arr[index] = tmp;\n    }\n    return arr;\n}\n/**\n * @param {number} iterations\n * @param {Function} fn\n * @param {string|number=} label\n */\nfunction benchmark(iterations, fn, label = \"\") {\n    let duration;\n    let i = iterations;\n    const start = +new Date();\n    while (i--) {\n        fn();\n    }\n    duration = +new Date() - start;\n    console.log(label || \"Benchmark\", {\n        x: iterations,\n        avg: duration / iterations,\n        total: duration,\n    });\n}\n/**\n * @return {string}\n */\nfunction getRandomName() {\n    const name = randomArrItem([\n        \"Ant\",\n        \"Bat\",\n        \"Bear\",\n        \"Bird\",\n        \"Cat\",\n        \"Cow\",\n        \"Crab\",\n        \"Croc\",\n        \"Deer\",\n        \"Dodo\",\n        \"Dog\",\n        \"Duck\",\n        \"Emu\",\n        \"Fish\",\n        \"Fly\",\n        \"Fox\",\n        \"Frog\",\n        \"Goat\",\n        \"Hare\",\n        \"Ibis\",\n        \"Kiwi\",\n        \"Lion\",\n        \"Lynx\",\n        \"Miao\",\n        \"Mole\",\n        \"Moth\",\n        \"Mule\",\n        \"Oger\",\n        \"Pig\",\n        \"Pika\",\n        \"Poke\",\n        \"Puma\",\n        \"Puss\",\n        \"Rat\",\n        \"Seal\",\n        \"Swan\",\n        \"Wasp\",\n        \"Wolf\",\n        \"Yak\",\n        \"Zeb\",\n    ]);\n    return name + \".\" + randomRange(10, 99);\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/util.ts?");

/***/ }),

/***/ "./shared/util/sanitizer.ts":
/*!**********************************!*\
  !*** ./shared/util/sanitizer.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Sanitizer\": () => (/* binding */ Sanitizer)\n/* harmony export */ });\n/**\n * Sanitizer / Sanitize user input.\n * @param {?=} value\n * @constructor\n */\nclass Sanitizer {\n    constructor(value) {\n        this._value = value;\n        this._valid = true;\n    }\n    /**\n     * @param {string} type\n     * @return {Sanitizer}\n     */\n    assertType(type) {\n        if (typeof this._value !== type) {\n            this._log(\"assertType\", this._value, type);\n            this._valid = false;\n        }\n        return this;\n    }\n    /**\n     * @return {Sanitizer}\n     */\n    assertArray() {\n        if (!(this._value instanceof Array)) {\n            this._log(\"assertArray\", this._value);\n            this._valid = false;\n        }\n        return this;\n    }\n    /**\n     * @return {Sanitizer}\n     */\n    assertJSON() {\n        if (this._valid) {\n            // Don't parse if already invalid\n            try {\n                this._json = JSON.parse(this._value);\n            }\n            catch (err) {\n                this._log(\"assertJSON\", this._value);\n                this._valid = false;\n            }\n        }\n        return this;\n    }\n    /**\n     * @param {Array} arr\n     * @return {Sanitizer}\n     */\n    assertInArray(arr) {\n        if (-1 === arr.indexOf(this._value)) {\n            this._log(\"assertInArray\", this._value, arr);\n            this._valid = false;\n        }\n        return this;\n    }\n    assertBetween(min, max) {\n        if (typeof this._value !== \"number\") {\n            this._log(\"assertRange type\", this._value);\n            this._valid = false;\n        }\n        else if (this._value < min || this._value > max) {\n            this._log(\"assertRange range\", this._value, min, max);\n            this._valid = false;\n        }\n        return this;\n    }\n    /**\n     *\n     * @return {Sanitizer}\n     */\n    assertIntAsBoolean() {\n        return this.assertBetween(0, 1);\n    }\n    assertStringOfLength(min, max) {\n        max = typeof max === \"undefined\" ? min : max;\n        if (typeof this._value !== \"string\") {\n            this._log(\"assertStringOfLength type\", this._value);\n            this._valid = false;\n        }\n        else if (!this._assertLength(min, max)) {\n            this._log(\"assertStringOfLength length\", this._value, min, max);\n            this._valid = false;\n        }\n        return this;\n    }\n    /**\n     * @param {number} min\n     * @param {number} max\n     * @return {Sanitizer}\n     */\n    assertArrayLengthBetween(min, max) {\n        if (!(this._value instanceof Array)) {\n            this._log(\"assertArrayOfLength type\", this._value);\n            this._valid = false;\n        }\n        else if (!this._assertLength(min, max)) {\n            this._log(\"assertArrayOfLength length\", this._value, min, max);\n            this._valid = false;\n        }\n        return this;\n    }\n    _assertLength(min, max) {\n        return this._value.length >= min && this._value.length <= max;\n    }\n    valid() {\n        return this._valid;\n    }\n    getValueOr(def) {\n        return this._valid ? this._value : def;\n    }\n    /**\n     * @param {*=} def\n     * @return {?}\n     */\n    json(def) {\n        return this._valid ? this._json : def;\n    }\n    _log(message, value, ...varArgs) {\n        console.warn(\"Validation Error\", message, JSON.stringify(value), varArgs);\n    }\n}\n\n\n//# sourceURL=webpack://xssnake/./shared/util/sanitizer.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./client/index.ts");
/******/ 	
/******/ })()
;